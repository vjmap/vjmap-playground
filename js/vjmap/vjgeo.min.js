!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).vjgeo=t()}(function(){var define,module,exports;return function r(i,o,a){function s(e,t){if(!o[e]){if(!i[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(u)return u(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}n=o[e]={exports:{}},i[e][0].call(n.exports,function(t){return s(i[e][1][t]||t)},n,n.exports,r,i,o,a)}return o[e].exports}for(var u="function"==typeof require&&require,t=0;t<a.length;t++)s(a[t]);return s}({1:[function(t,e,n){"use strict";n.byteLength=function(t){var t=h(t),e=t[0],t=t[1];return 3*(e+t)/4-t},n.toByteArray=function(t){var e,n,r=h(t),i=r[0],r=r[1],o=new l(function(t,e){return 3*(t+e)/4-e}(i,r)),a=0,s=0<r?i-4:i;for(n=0;n<s;n+=4)e=u[t.charCodeAt(n)]<<18|u[t.charCodeAt(n+1)]<<12|u[t.charCodeAt(n+2)]<<6|u[t.charCodeAt(n+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=255&e;2===r&&(e=u[t.charCodeAt(n)]<<2|u[t.charCodeAt(n+1)]>>4,o[a++]=255&e);1===r&&(e=u[t.charCodeAt(n)]<<10|u[t.charCodeAt(n+1)]<<4|u[t.charCodeAt(n+2)]>>2,o[a++]=e>>8&255,o[a++]=255&e);return o},n.fromByteArray=function(t){for(var e,n=t.length,r=n%3,i=[],o=0,a=n-r;o<a;o+=16383)i.push(function(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(function(t){return s[t>>18&63]+s[t>>12&63]+s[t>>6&63]+s[63&t]}(r));return i.join("")}(t,o,a<o+16383?a:o+16383));1==r?(e=t[n-1],i.push(s[e>>2]+s[e<<4&63]+"==")):2==r&&(e=(t[n-2]<<8)+t[n-1],i.push(s[e>>10]+s[e>>4&63]+s[e<<2&63]+"="));return i.join("")};for(var s=[],u=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=r.length;i<o;++i)s[i]=r[i],u[r.charCodeAt(i)]=i;function h(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");t=t.indexOf("="),e=(t=-1===t?e:t)===e?0:4-t%4;return[t,e]}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},{}],2:[function(k,t,L){!function(t){!function(){"use strict";var C=k("base64-js"),o=k("ieee754"),e=(L.Buffer=c,L.SlowBuffer=function(t){+t!=t&&(t=0);return c.alloc(+t)},L.INSPECT_MAX_BYTES=50,2147483647);function u(t){if(e<t)throw new RangeError('The value "'+t+'" is invalid for option "size"');t=new Uint8Array(t);return t.__proto__=c.prototype,t}function c(t,e,n){if("number"!=typeof t)return r(t,e,n);if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return a(t)}function r(t,e,n){if("string"==typeof t){var r=t,i=e;if(c.isEncoding(i="string"==typeof i&&""!==i?i:"utf8"))return o=0|p(r,i),a=u(o),a=(r=a.write(r,i))!==o?a.slice(0,r):a;throw new TypeError("Unknown encoding: "+i)}if(ArrayBuffer.isView(t))return l(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(_(t,ArrayBuffer)||t&&_(t.buffer,ArrayBuffer)){var o=t,r=e,a=n;if(r<0||o.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(o.byteLength<r+(a||0))throw new RangeError('"length" is outside of buffer bounds');return(o=void 0===r&&void 0===a?new Uint8Array(o):void 0===a?new Uint8Array(o,r):new Uint8Array(o,r,a)).__proto__=c.prototype,o}if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');i=t.valueOf&&t.valueOf();if(null!=i&&i!==t)return c.from(i,e,n);var s=function(t){{var e,n;if(c.isBuffer(t))return e=0|h(t.length),0!==(n=u(e)).length&&t.copy(n,0,0,e),n}if(void 0!==t.length)return"number"!=typeof t.length||E(t.length)?u(0):l(t);if("Buffer"===t.type&&Array.isArray(t.data))return l(t.data)}(t);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return c.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function i(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function a(t){return i(t),u(t<0?0:0|h(t))}function l(t){for(var e=t.length<0?0:0|h(t.length),n=u(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function h(t){if(e<=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+e.toString(16)+" bytes");return 0|t}function p(t,e){if(c.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||_(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return M(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return I(t).length;default:if(i)return r?-1:M(t).length;e=(""+e).toLowerCase(),i=!0}}function n(t,e,n){var r,i=!1;if((e=void 0===e||e<0?0:e)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":var o=this,a=e,s=n,u=o.length;(!s||s<0||u<s)&&(s=u);for(var l="",h=a=!a||a<0?0:a;h<s;++h)l+=function(t){return t<16?"0"+t.toString(16):t.toString(16)}(o[h]);return l;case"utf8":case"utf-8":return T(this,e,n);case"ascii":var c=this,u=e,p=n,f="";p=Math.min(c.length,p);for(var d=u;d<p;++d)f+=String.fromCharCode(127&c[d]);return f;case"latin1":case"binary":var g=this,a=e,v=n,y="";v=Math.min(g.length,v);for(var m=a;m<v;++m)y+=String.fromCharCode(g[m]);return y;case"base64":return x=this,r=n,0===(w=e)&&r===x.length?C.fromByteArray(x):C.fromByteArray(x.slice(w,r));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var x=e,w=n,b=this.slice(x,w),A="",P=0;P<b.length;P+=2)A+=String.fromCharCode(b[P]+256*b[P+1]);return A;default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function s(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function f(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),(n=(n=E(n=+n)?i?0:t.length-1:n)<0?t.length+n:n)>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:d(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,e,n):d(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function d(t,e,n,r,i){var o=1,a=t.length,s=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a/=o=2,s/=2,n/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i)for(var l=-1,h=n;h<a;h++)if(u(t,h)===u(e,-1===l?0:h-l)){if(h-(l=-1===l?h:l)+1===s)return l*o}else-1!==l&&(h-=h-l),l=-1;else for(h=n=a<n+s?a-s:n;0<=h;h--){for(var c=!0,p=0;p<s;p++)if(u(t,h+p)!==u(e,p)){c=!1;break}if(c)return h}return-1}function v(t,e,n,r){return j(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function y(t,e,n,r){return j(function(t,e){for(var n,r,i=[],o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,i.push(n%256),i.push(r);return i}(e,t.length-n),t,n,r)}function T(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,u,l=t[i],h=null,c=239<l?4:223<l?3:191<l?2:1;if(i+c<=n)switch(c){case 1:l<128&&(h=l);break;case 2:128==(192&(o=t[i+1]))&&127<(u=(31&l)<<6|63&o)&&(h=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&2047<(u=(15&l)<<12|(63&o)<<6|63&a)&&(u<55296||57343<u)&&(h=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)&&u<1114112&&(h=u)}null===h?(h=65533,c=1):65535<h&&(r.push((h-=65536)>>>10&1023|55296),h=56320|1023&h),r.push(h),i+=c}var p=r,f=p.length;if(f<=m)return String.fromCharCode.apply(String,p);for(var d="",g=0;g<f;)d+=String.fromCharCode.apply(String,p.slice(g,g+=m));return d}L.kMaxLength=e,(c.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),c.poolSize=8192,c.from=r,c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,c.alloc=function(t,e,n){return e=e,n=n,i(t=t),!(t<=0)&&void 0!==e?"string"==typeof n?u(t).fill(e,n):u(t).fill(e):u(t)},c.allocUnsafe=a,c.allocUnsafeSlow=a,c.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==c.prototype},c.compare=function(t,e){if(_(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),_(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);if(void 0===e)for(i=e=0;i<t.length;++i)e+=t[i].length;for(var n=c.allocUnsafe(e),r=0,i=0;i<t.length;++i){var o=t[i];if(_(o,Uint8Array)&&(o=c.from(o)),!c.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r),r+=o.length}return n},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)s(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)s(this,e,e+3),s(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)s(this,e,e+7),s(this,e+1,e+6),s(this,e+2,e+5),s(this,e+3,e+4);return this},c.prototype.toLocaleString=c.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?T(this,0,t):n.apply(this,arguments)},c.prototype.equals=function(t){if(c.isBuffer(t))return this===t||0===c.compare(this,t);throw new TypeError("Argument must be a Buffer")},c.prototype.inspect=function(){var t="",e=L.INSPECT_MAX_BYTES,t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim();return this.length>e&&(t+=" ... "),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,r,i){if(_(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),(e=void 0===e?0:e)<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=e)return 0;if(i<=r)return-1;if(n<=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),u=this.slice(r,i),l=t.slice(e,n),h=0;h<s;++h)if(u[h]!==l[h]){o=u[h],a=l[h];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return f(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return f(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||i<n)&&(n=i),0<t.length&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var o,a,s,u=!1;;)switch(r){case"hex":var l=this,h=t,c=e,p=n,f=(c=Number(c)||0,l.length-c);(!p||f<(p=Number(p)))&&(p=f),(f=h.length)/2<p&&(p=f/2);for(var d=0;d<p;++d){var g=parseInt(h.substr(2*d,2),16);if(E(g))return d;l[c+d]=g}return d;case"utf8":case"utf-8":return f=e,s=n,j(M(t,(a=this).length-f),a,f,s);case"ascii":return v(this,t,e,n);case"latin1":case"binary":return v(this,t,e,n);case"base64":return a=this,s=e,o=n,j(I(t),a,s,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,t,e,n);default:if(u)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),u=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var m=4096;function g(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+e)throw new RangeError("Trying to access beyond buffer length")}function x(t,e,n,r,i,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<e||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function w(t,e,n,r){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function b(t,e,n,r,i){return e=+e,n>>>=0,i||w(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function A(t,e,n,r,i){return e=+e,n>>>=0,i||w(t,0,n,8),o.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){var n=this.length,n=((t=~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),e<t&&(e=t),this.subarray(t,e));return n.__proto__=c.prototype,n},c.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||g(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},c.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||g(t,e,this.length);for(var r=this[t+--e],i=1;0<e&&(i*=256);)r+=this[t+--e]*i;return r},c.prototype.readUInt8=function(t,e){return t>>>=0,e||g(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return t>>>=0,e||g(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return t>>>=0,e||g(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return t>>>=0,e||g(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return t>>>=0,e||g(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||g(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||g(t,e,this.length);for(var r=e,i=1,o=this[t+--r];0<r&&(i*=256);)o+=this[t+--r]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return t>>>=0,e||g(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){t>>>=0,e||g(t,2,this.length);e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},c.prototype.readInt16BE=function(t,e){t>>>=0,e||g(t,2,this.length);e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},c.prototype.readInt32LE=function(t,e){return t>>>=0,e||g(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return t>>>=0,e||g(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return t>>>=0,e||g(t,4,this.length),o.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return t>>>=0,e||g(t,4,this.length),o.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return t>>>=0,e||g(t,8,this.length),o.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return t>>>=0,e||g(t,8,this.length),o.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||x(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||x(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;0<=--i&&(o*=256);)this[e+i]=t/o&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,1,255,0),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeIntLE=function(t,e,n,r){t=+t,e>>>=0,r||x(this,t,e,n,(r=Math.pow(2,8*n-1))-1,-r);var i=0,o=1,a=0;for(this[e]=255&t;++i<n&&(o*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/o>>0)-a&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){t=+t,e>>>=0,r||x(this,t,e,n,(r=Math.pow(2,8*n-1))-1,-r);var i=n-1,o=1,a=0;for(this[e+i]=255&t;0<=--i&&(o*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/o>>0)-a&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,1,127,-128),this[e]=255&(t=t<0?255+t+1:t),e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||x(this,t,e,4,2147483647,-2147483648),this[e]=(t=t<0?4294967295+t+1:t)>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeFloatLE=function(t,e,n){return b(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return b(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return A(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return A(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n=n||0,r||0===r||(r=this.length),e>=t.length&&(e=t.length),(r=0<r&&r<n?n:r)===n)return 0;if(0===t.length||0===this.length)return 0;if((e=e||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var i=(r=t.length-e<r-n?t.length-e+n:r)-n;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,n,r);else if(this===t&&n<e&&e<r)for(var o=i-1;0<=o;--o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,r),e);return i},c.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var i;1===t.length&&(i=t.charCodeAt(0),"utf8"===r&&i<128||"latin1"===r)&&(t=i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");var o;if(!(n<=e))if(e>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(t=t||0))for(o=e;o<n;++o)this[o]=t;else{var a=c.isBuffer(t)?t:c.from(t,r),s=a.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var P=/[^+/0-9A-Za-z-_]/g;function M(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],a=0;a<r;++a){if(55295<(n=t.charCodeAt(a))&&n<57344){if(!i){if(56319<n){-1<(e-=3)&&o.push(239,191,189);continue}if(a+1===r){-1<(e-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(e-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,n<128){if(--e<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function I(t){return C.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(P,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function j(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function _(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function E(t){return t!=t}}.call(this)}.call(this,k("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:3}],3:[function(t,e,n){n.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,h=-7,c=n?i-1:0,p=n?-1:1,i=t[e+c];for(c+=p,o=i&(1<<-h)-1,i>>=-h,h+=s;0<h;o=256*o+t[e+c],c+=p,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=r;0<h;a=256*a+t[e+c],c+=p,h-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(i?-1:1);a+=Math.pow(2,r),o-=l}return(i?-1:1)*a*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var a,s,u=8*o-i-1,l=(1<<u)-1,h=l>>1,c=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,f=r?1:-1,o=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(r=Math.pow(2,-a))<1&&(a--,r*=2),2<=(e+=1<=a+h?c/r:c*Math.pow(2,1-h))*r&&(a++,r/=2),l<=a+h?(s=0,a=l):1<=a+h?(s=(e*r-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));8<=i;t[n+p]=255&s,p+=f,s/=256,i-=8);for(a=a<<i|s,u+=i;0<u;t[n+p]=255&a,p+=f,a/=256,u-=8);t[n+p-f]|=128*o}},{}],4:[function(require,module,exports){var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo,vjgeo;!function(vjgeo){function tryEval(name){try{var value=eval(name);return value}catch(e){}}function detectEnvironment(){return tryEval("WorkerGlobalScope")&&tryEval("self")?vjgeo.environmentTypes.WebWorker:tryEval("window")&&tryEval("document")?vjgeo.environmentTypes.BrowserUI:tryEval("global")&&tryEval("process")?vjgeo.environmentTypes.NodeJs:vjgeo.environmentTypes.Unknown}function split(t,e){e=t.indexOf(e);return e<0?[t]:0<e?[t.substr(0,e),t.substr(e+1)]:["",t]}function splitDecimal(t){var e=t.toString();return split(e=0<e.indexOf("e")?t.toFixed(20).match(/.*[^(0+$)]/)[0]:e,".")}function round(t,e){var n;return void 0===e&&(e=1e-7),t%1==0?t:void 0===(n=1-String(Math.ceil(1/e)).length)||0==n?Math.round(t):(t=+t,isNaN(t)||"number"!=typeof n||n%1!=0?NaN:t<0?-round(-t,e):(e=split(t.toString(),"e"),+((e=split((t=Math.round(+(e[0]+"e"+(e[1]?+e[1]-n:-n)))).toString(),"e"))[0]+"e"+(e[1]?+e[1]+n:n))))}function createRouteKey(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],r=n%2==0?(0<n?".":"")+r:JSON.stringify([r]);e.push(r)}return e.join("")}function travel(t,e){if(!t||!e)return null;for(var e=Array.isArray(e)?e:JSON.parse(e),n=e.slice(),r=t,i=t.origin||[0,0];n.length;){if(!(r=r[n.shift()]))return null;r.origin&&n.length&&(i=vjgeo.point.add(i,r.origin))}return{result:r,offset:i}}vjgeo.environmentTypes={BrowserUI:"browser",NodeJs:"node",WebWorker:"worker",Unknown:"unknown"},vjgeo.environment=detectEnvironment(),vjgeo.unitType={Centimeter:"cm",Foot:"foot",Inch:"inch",Meter:"m",Millimeter:"mm"},vjgeo.splitDecimal=splitDecimal,vjgeo.round=round,vjgeo.createRouteKey=createRouteKey,vjgeo.travel=travel;var clone=require("clone");function cloneObject(t){return clone(t)}function extendObject(t,e){if(t&&e)for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}function isFunction(t){return"function"==typeof t}function isNumber(t){return"number"==typeof t}function isObject(t){return"object"==typeof t}function isObjectNotArray(t){return"object"==typeof t&&!Array.isArray(t)}function isObjectOrUndefinedNotArray(t){return"object"==typeof t&&!Array.isArray(t)||void 0===t}function isPoint(t){return t&&Array.isArray(t)&&2==t.length&&isNumber(t[0])&&isNumber(t[1])}function isPath(t){return t&&t.type&&isPoint(t.origin)}function isPathLine(t){return isPath(t)&&t.type==vjgeo.pathType.Line&&isPoint(t.end)}function isPathCircle(t){return isPath(t)&&t.type==vjgeo.pathType.Circle&&isNumber(t.radius)}function isPathArc(t){return isPath(t)&&t.type==vjgeo.pathType.Arc&&isNumber(t.radius)&&isNumber(t.startAngle)&&isNumber(t.endAngle)}function isPathArcInBezierCurve(t){return isPathArc(t)&&isObject(t.bezierData)&&isNumber(t.bezierData.startT)&&isNumber(t.bezierData.endT)}function isModel(t){return t&&(t.paths||t.models)}function isChain(t){return t&&t.links&&Array.isArray(t.links)&&isNumber(t.pathLength)}vjgeo.cloneObject=cloneObject,vjgeo.extendObject=extendObject,vjgeo.isFunction=isFunction,vjgeo.isNumber=isNumber,vjgeo.isObject=isObject,vjgeo.isObjectNotArray=isObjectNotArray,vjgeo.isObjectOrUndefinedNotArray=isObjectOrUndefinedNotArray,vjgeo.isPoint=isPoint,vjgeo.isPath=isPath,vjgeo.isPathLine=isPathLine,vjgeo.isPathCircle=isPathCircle,vjgeo.isPathArc=isPathArc,vjgeo.isPathArcInBezierCurve=isPathArcInBezierCurve,vjgeo.pathType={Line:"line",Circle:"circle",Arc:"arc",BezierSeed:"bezier-seed"},vjgeo.isModel=isModel,vjgeo.isChain=isChain;var Cascade=function(){function t(t,e){for(var n in this._module=t,this.$initial=e,this._module)this._shadow(n);this.$result=e}return t.prototype._shadow=function(t){var e=this;this[t]=function(){return e._apply(e._module[t],arguments)}},t.prototype._apply=function(t,e){e=[].slice.call(e);return e.unshift(this.$result),this.$result=t.apply(void 0,e),this},t.prototype.$reset=function(){return this.$result=this.$initial,this},t}();function $(t){return isModel(t)?new Cascade(vjgeo.model,t):isPath(t)?new Cascade(vjgeo.path,t):isPoint(t)?new Cascade(vjgeo.point,t):void 0}vjgeo.$=$}(vjgeo=vjgeo||{}),module.exports=vjgeo,!function(i){var e,o;function n(t,e){var n;return t<0&&e<0||0<t&&0<e?(n=e,t=t,(t=i.splitDecimal(t)[1])?+(i.splitDecimal(n)[0]+"."+t):n):e}function r(t){var e=Math.floor(t/360);return 0===e?t:n(t,t-360*e)}function a(t){return 180*t/Math.PI}function s(t){t=e.ofArcEnd(t)-t.startAngle;return 360<i.round(t)?r(t):t}function u(t){return r(a(l(t.origin,t.end)))}function l(t,e){e=i.point.subtract(e,t),t=e[0],e=e[1];return Math.atan2(-e,-t)+Math.PI}(e=i.angle||(i.angle={})).noRevolutions=r,e.toRadians=function(t){return r(t)*Math.PI/180},e.toDegrees=a,e.ofArcEnd=function(t){var e;return t.endAngle<t.startAngle?(e=360*Math.ceil((t.startAngle-t.endAngle)/360)+t.endAngle,n(t.endAngle,e)):t.endAngle},e.ofArcMiddle=function(t,e){return void 0===e&&(e=.5),t.startAngle+s(t)*e},e.ofArcSpan=s,e.ofLineInDegrees=u,e.ofPointInDegrees=function(t,e){return a(l(t,e))},e.ofPointInRadians=l,e.mirror=function(t,e,n){return n&&(t=360-t),t=e?(t<180?180:540)-t:t},(o={})[i.pathType.Arc]=function(t,e,n){var n=e!=n,r=n?t.endAngle-90:t.startAngle+90,n=i.point.fromArc(t)[n?1:0],t=i.point.rotate(i.point.add(n,[t.radius,0]),r,n);return new i.paths.Line(e?[t,n]:[n,t])},o[i.pathType.Line]=function(t,e,n){return n?new i.paths.Line(t.end,t.origin):t},e.ofChainLinkJoint=function(t,e){var n;return arguments.length<2?null:(180<(n=r(u((n=[t,e].map(function(t,e){e=0===e;if(t){var n=t.walkedPath.pathContext,r=o[n.type];if(r)return r(n,e,t.reversed)}}))[1])-u(n[0])))&&(n-=360),n)}}(vjgeo=vjgeo||{}),!function(o){var n,r,i,a,s;function u(t,e,n){var r=l(t);if(e)for(var i=2;i--;)n?r[i]-=e[i]:r[i]+=e[i];return r}function l(t){return t?[t[0],t[1]]:n.zero()}function h(t,e){return[t in r?0:o.round(e*Math.cos(t)),t in i?0:o.round(e*Math.sin(t))]}function e(t,e){return u(e.origin,h(o.angle.toRadians(t),e.radius))}function c(t,e){t=t.origin[0];return[t,e.slope*t+e.yIntercept]}function p(t,e){return n.add(t.origin,n.fromPolar(o.angle.toRadians(e),t.radius))}(n=o.point||(o.point={})).add=u,n.average=function(e,n){function t(t){return(e[t]+n[t])/2}return[t(0),t(1)]},n.clone=l,n.closest=function(t,e){for(var n={index:0,distance:-1},r=0;r<e.length;r++){var i=o.measure.pointDistance(t,e[r]);(-1==n.distance||i<n.distance)&&(n.distance=i,n.index=r)}return e[n.index]},(r={})[Math.PI/2]=!0,r[3*Math.PI/2]=!0,(i={})[Math.PI]=!0,i[2*Math.PI]=!0,n.fromPolar=h,n.fromAngleOnCircle=e,n.fromArc=function(t){return[e(t.startAngle,t),e(t.endAngle,t)]},(a={})[o.pathType.Arc]=function(t){return n.fromArc(t)},a[o.pathType.Line]=function(t){return[t.origin,t.end]},a[o.pathType.BezierSeed]=a[o.pathType.Line],n.fromPathEnds=function(t,e){var n=null,r=a[t.type];return n=r&&(n=r(t),e)?n.map(function(t){return u(t,e)}):n},n.fromSlopeIntersection=function(t,e,n){void 0===n&&(n={});var r=o.measure.lineSlope(t),i=o.measure.lineSlope(e);return o.measure.isSlopeParallel(r,i)?(o.measure.isSlopeEqual(r,i)&&(n.out_AreOverlapped=o.measure.isLineOverlapping(t,e,n.excludeTangents)),null):r.hasSlope?i.hasSlope?[n=(i.yIntercept-r.yIntercept)/(r.slope-i.slope),r.slope*n+r.yIntercept]:c(e,r):c(t,i)},(s={})[o.pathType.Arc]=function(t,e){return p(t,o.angle.ofArcMiddle(t,e))},s[o.pathType.Circle]=function(t,e){return p(t,360*e)},s[o.pathType.Line]=function(t,n){function e(t,e){return t+(e-t)*n}return[e(t.origin[0],t.end[0]),e(t.origin[1],t.end[1])]},s[o.pathType.BezierSeed]=function(t,e){return o.models.BezierCurve.computePoint(t,e)},n.middle=function(t,e){void 0===e&&(e=.5);var n=null,r=s[t.type];return n=r?r(t,e):n},n.mirror=function(t,e,n){return t=l(t),e&&(t[0]=-t[0]),n&&(t[1]=-t[1]),t},n.rounded=function(t,e){return[o.round(t[0],e),o.round(t[1],e)]},n.rotate=function(t,e,n){var r=o.angle.ofPointInRadians(n=void 0===n?[0,0]:n,t),t=o.measure.pointDistance(n,t);return u(n,h(r+o.angle.toRadians(e),t))},n.scale=function(t,e,n){var r=l(t);if(n)for(var i=2;i--;)r[i]=n[i]+(r[i]-n[i])*e;else for(i=2;i--;)r[i]*=e;return r},n.distort=function(t,e,n){return[t[0]*e,t[1]*n]},n.subtract=function(t,e){return u(t,e,!0)},n.zero=function(){return[0,0]}}(vjgeo=vjgeo||{}),!function(s){var t,i,a,r,o,u,l,h,c,p;function f(t,e){t&&e&&void 0!==t.layer&&(e.layer=t.layer),t&&e&&void 0!==t.data&&(e.data=t.data),t&&e&&"bezierData"in t&&(e.bezierData=t.bezierData)}function n(t,e){var n;return t&&((n=r[t.type])&&n(t,e),t.origin=e),t}function d(t,e,n){var r;return t&&e&&(t.origin=s.point.add(t.origin,e,n),r=o[t.type])&&r(t,e,n),t}function g(t,e){if(1==e)return[s.point.middle(t)];var n=[],r=e;t.type!=s.pathType.Circle&&r--;for(var i=0;i<e;i++)n.push(s.point.middle(t,i/r));return n}(t=s.path||(s.path={})).addTo=function(t,e,n,r){return s.model.addPath(e,t,n,r=void 0===r?!1:r),t},(i={})[s.pathType.Circle]=function(t,e,n){e.radius=t.radius},i[s.pathType.Arc]=function(t,e,n){i[s.pathType.Circle](t,e,n),e.startAngle=t.startAngle,e.endAngle=t.endAngle},i[s.pathType.Line]=function(t,e,n){e.end=s.point.add(t.end,n)},i[s.pathType.BezierSeed]=function(t,e,n){i[s.pathType.Line](t,e,n),e.controls=t.controls.map(function(t){return s.point.add(t,n)})},t.clone=function(t,e){var n={type:t.type,origin:s.point.add(t.origin,e)},r=i[t.type];return r&&r(t,n,e),f(t,n),n},t.copyProps=function(t,e){var n=i[t.type];return n&&(e.origin=s.point.clone(t.origin),n(t,e)),f(t,e),t},(a={})[s.pathType.Line]=function(t,e,n,r){return new s.paths.Line(e,s.point.mirror(t.end,n,r))},a[s.pathType.Circle]=function(t,e,n,r){return new s.paths.Circle(e,t.radius)},a[s.pathType.Arc]=function(t,e,n,r){var i=s.angle.mirror(t.startAngle,n,r),o=s.angle.mirror(s.angle.ofArcEnd(t),n,r),n=n!=r;return new s.paths.Arc(e,t.radius,n?o:i,n?i:o)},a[s.pathType.BezierSeed]=function(t,e,n,r){e=a[s.pathType.Line](t,e,n,r);return e.type=s.pathType.BezierSeed,e.controls=t.controls.map(function(t){return s.point.mirror(t,n,r)}),e},t.layer=function(t,e){return t.layer=e,t},t.data=function(t,e){return t.data=e,t},t.mirror=function(t,e,n){var r,i,o=null;return f(t,o=t&&(r=s.point.mirror(t.origin,e,n),i=a[t.type])?i(t,r,e,n):o),o},(r={})[s.pathType.Line]=function(t,e){var n=s.point.subtract(t.end,t.origin);t.end=s.point.add(e,n)},t.move=n,(o={})[s.pathType.Line]=function(t,e,n){t.end=s.point.add(t.end,e,n)},o[s.pathType.BezierSeed]=function(t,e,n){o[s.pathType.Line](t,e,n),t.controls=t.controls.map(function(t){return s.point.add(t,e,n)})},t.moveRelative=d,t.moveTemporary=function(t,n,e){var r=!1;function i(t,e){n[e]&&d(t,n[e],r)}t.map(i),e(),r=!0,t.map(i)},(u={})[s.pathType.Line]=function(t,e,n){t.end=s.point.rotate(t.end,e,n)},u[s.pathType.Arc]=function(t,e,n){t.startAngle=s.angle.noRevolutions(t.startAngle+e),t.endAngle=s.angle.noRevolutions(t.endAngle+e)},u[s.pathType.BezierSeed]=function(t,e,n){u[s.pathType.Line](t,e,n),t.controls=t.controls.map(function(t){return s.point.rotate(t,e,n)})},t.rotate=function(t,e,n){var r;return void 0===n&&(n=[0,0]),t&&e&&(t.origin=s.point.rotate(t.origin,e,n),r=u[t.type])&&r(t,e,n),t},(l={})[s.pathType.Line]=function(t,e,n){t.end=s.point.scale(t.end,e,n)},l[s.pathType.BezierSeed]=function(t,e,n){l[s.pathType.Line](t,e,n),t.controls=t.controls.map(function(t){return s.point.scale(t,e,n)})},l[s.pathType.Circle]=function(t,e,n){t.radius*=e,n&&(t.origin=s.point.scale(t.origin,e,n))},l[s.pathType.Arc]=l[s.pathType.Circle],t.scale=function(t,e,n){var r;return t&&1!==e&&e&&(t.origin=s.point.scale(t.origin,e,n),r=l[t.type])&&r(t,e,n),t},(h={})[s.pathType.Arc]=function(t,e,n){return new s.models.EllipticArc(t,e,n)},h[s.pathType.Circle]=function(t,e,n){var r=new s.models.Ellipse(t.radius*e,t.radius*n);return r.origin=s.point.distort(t.origin,e,n),r},h[s.pathType.Line]=function(t,e,n){return new s.paths.Line([t.origin,t.end].map(function(t){return s.point.distort(t,e,n)}))},h[s.pathType.BezierSeed]=function(t,e,n){var r=s.point.distort;return{type:s.pathType.BezierSeed,origin:r(t.origin,e,n),controls:t.controls.map(function(t){return r(t,e,n)}),end:r(t.end,e,n)}},t.distort=function(t,e,n){var r;return t&&e&&n&&(r=h[t.type])?(r=r(t,e,n),void 0!==t.layer&&(r.layer=t.layer),void 0!==t.data&&(r.data=t.data),r):null},t.converge=function(t,e,n,r){var i,o,a=s.point.fromSlopeIntersection(t,e);return a&&(i=[t,e],o=[n,r],2===arguments.length&&i.forEach(function(t,e){o[e]=s.point.closest(a,[t.origin,t.end])===t.origin}),i.forEach(function(t,e){t=t,(e=(e=o[e])?t.origin:t.end)[0]=a[0],e[1]=a[1]})),a},(c={})[s.pathType.Arc]=function(t,e,n,r){var i=s.angle.ofArcSpan(t),n=(e+n)*i/e-i;r?t.startAngle-=n:t.endAngle+=n},c[s.pathType.Circle]=function(t,e,n,r){t.radius*=(e+n)/e},c[s.pathType.Line]=function(t,e,n,r){n=s.point.scale(s.point.subtract(t.end,t.origin),n/e);r?t.origin=s.point.subtract(t.origin,n):t.end=s.point.add(t.end,n)},t.alterLength=function(t,e,n){var r,i;return void 0===n&&(n=!1),!t||!e||!(r=c[t.type])||!(i=s.measure.pathLength(t))||i<=-e?null:(r(t,i,e,n),t)},t.toPoints=g,(p={})[s.pathType.Line]=function(t){return 2},p[s.pathType.Circle]=function(t,e){t=s.measure.pathLength(t);return t?(e=e||t,Math.max(8,Math.ceil(t/(e||t)))):0},p[s.pathType.Arc]=function(t,e){var n=s.measure.pathLength(t);return n?(t=Math.ceil(s.angle.ofArcSpan(t)/45)+1,Math.max(t,Math.ceil(n/(e||n)))):0},t.toKeyPoints=function i(t,e){var o;if(t.type==s.pathType.BezierSeed)return n=new s.models.BezierCurve(t),s.model.findChains(n,function(t,e,n){if(1==t.length){var r=t[0];switch(r.links[0].walkedPath.pathId){case"arc_0":case"line_0":break;default:s.chain.reverse(r)}o=s.chain.toKeyPoints(r)}else 1===e.length&&(o=i(e[0].pathContext))}),o;var n=p[t.type];if(n=n&&n(t,e))return g(t,n);return[]},t.center=function(t){var e=s.measure.pathExtents(t),e=s.point.average(e.high,e.low);return n(t,s.point.subtract(t.origin||[0,0],e)),t},t.zero=function(t){var e=s.measure.pathExtents(t);return n(t,s.point.subtract(t.origin||[0,0],e.low)),t}}(vjgeo=vjgeo||{}),!function(s){var t,r;t=s.path||(s.path={}),(r={})[s.pathType.Arc]=function(o,t){var e,n,a=s.angle.ofPointInDegrees(o.origin,t);return s.measure.isAngleEqual(a,o.startAngle)||s.measure.isAngleEqual(a,o.endAngle)||null==(t=function(){for(var t=s.angle.noRevolutions(o.startAngle),e=t+s.angle.ofArcEnd(o)-o.startAngle,n=[0,1,-1],r=0;r<n.length;r++){var i=360*n[r];if(s.measure.isBetween(a+i,t,e,!0))return o.startAngle+a+i-t}return null}())?null:(e=o.endAngle,o.endAngle=t,(n=s.cloneObject(o)).startAngle=t,n.endAngle=e,n)},r[s.pathType.Circle]=function(t,e){t.type=s.pathType.Arc;var n=t,t=s.angle.ofPointInDegrees(t.origin,e);return n.startAngle=t,n.endAngle=t+360,null},r[s.pathType.Line]=function(t,e){var n;return s.measure.isBetweenPoints(e,t,!0)?(n=t.end,t.end=e,(t=s.cloneObject(t)).origin=e,t.end=n,t):null},t.breakAtPoint=function(t,e){if(t&&e){var n=r[t.type];if(n)return(n=n(t,e))&&"layer"in t&&(n.layer=t.layer),n&&"data"in t&&(n.data=t.data),n}return null}}(vjgeo=vjgeo||{}),!function(d){var t=d.paths||(d.paths={});function e(t,e){t=d.point.fromArc(t),this.type=d.pathType.Line,this.origin=t[0],this.end=t[1],this.data=e||{}}function n(e,n,r,t){this.type=d.pathType.Line,this.origin=d.point.clone(e.origin),this.end=d.point.clone(e.end),this.data=t||{};var i=d.angle.ofLineInDegrees(this);function o(t){t=d.point.add(e.origin,d.point.fromPolar(d.angle.toRadians(i+t),n));return{origin:t,nearness:d.measure.pointDistance(t,r)}}t=((t=[o(-90),o(90)])[0].nearness<t[1].nearness?t[0]:t[1]).origin,d.path.move(this,t)}t.Arc=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];function e(t){var e=d.angle.ofPointInDegrees(t,r[s?1:0]),n=d.angle.ofPointInDegrees(t,r[s?0:1]);return n<e&&(n+=360),{origin:t,startAngle:e,endAngle:n,size:n-e}}var n=r.length;switch(0<n&&d.isObjectOrUndefinedNotArray(r[r.length-1])&&(this.data=r[r.length-1]||{},n-=1),n){case 5:var i=r[0],o=r[1],a=(this.radius=r[2],r[3]),s=r[4],u=d.measure.pointDistance(i,o)/2;if(d.round(this.radius-u)<=0)this.radius=u,p=e(d.point.average(i,o));else{for(var l=d.path.intersection(new g(i,this.radius),new g(o,this.radius)),h=[],c=l.intersectionPoints.length;c--;)p=e(l.intersectionPoints[c]),0==h.length||p.size>h[0].size?h.push(p):h.unshift(p);var p=h[a?1:0]}this.origin=p.origin,this.startAngle=p.startAngle,this.endAngle=p.endAngle;break;case 4:this.origin=r[0],this.radius=r[1],this.startAngle=r[2],this.endAngle=r[3];break;case 3:if(d.isPoint(r[2])){g.apply(this,r);for(var f=[],c=0;c<3;c++)f.push(d.angle.ofPointInDegrees(this.origin,r[c]));this.startAngle=f[0],this.endAngle=f[2],d.measure.isBetweenArcAngles(f[1],this,!1)||(this.startAngle=f[2],this.endAngle=f[0]);break}case 2:s=r[2];g.call(this,r[0],r[1]),this.startAngle=d.angle.ofPointInDegrees(this.origin,r[s?1:0]),this.endAngle=d.angle.ofPointInDegrees(this.origin,r[s?0:1])}this.type=d.pathType.Arc};var g=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.type=d.pathType.Circle;var n=t.length;switch(0<n&&d.isObjectOrUndefinedNotArray(t[t.length-1])&&(this.data=t[t.length-1]||{},n-=1),n){case 1:this.origin=[0,0],this.radius=t[0];break;case 2:d.isNumber(t[1])?(this.origin=t[0],this.radius=t[1]):(this.origin=d.point.average(t[0],t[1]),this.radius=d.measure.pointDistance(this.origin,t[0]));break;default:for(var r=[new u(t[0],t[1]),new u(t[1],t[2])],i=[],o=2;o--;){var a=d.point.middle(r[o]);i.push(d.path.rotate(r[o],90,a))}var s=d.point.fromSlopeIntersection(i[0],i[1]);if(!s)throw"invalid parameters - attempted to construct a circle from 3 points on a line: "+JSON.stringify(t);this.origin=s,this.radius=d.measure.pointDistance(this.origin,t[0])}},u=(t.Circle=g,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.type=d.pathType.Line;var n=t.length;switch(0<n&&d.isObjectOrUndefinedNotArray(t[t.length-1])&&(this.data=t[t.length-1]||{},n-=1),n){case 1:var r=t[0];this.origin=r[0],this.end=r[1];break;case 2:this.origin=t[0],this.end=t[1]}});t.Line=u,t.Chord=e,t.Parallel=n}(vjgeo=vjgeo||{}),!function(f){var t;function s(t,e,n,r){r=(r=void 0===r?!1:r)?n:o(t,n);return t.paths=t.paths||{},t.paths[r]=e,t}function d(t,e,n,r){r=(r=void 0===r?!1:r)?n:i(t,n);return t.models=t.models||{},t.models[r]=e,t}function n(t,e){if(!t)return e;for(var n=0,r=e;r in t;)r=[e,++n].join("_");return r}function i(t,e){return n(t.models,e)}function o(t,e){return n(t.paths,e)}function a(t,e,n,r,i){if((n=void 0===n?!1:n)&&t.origin?t.origin=f.point.scale(t.origin,e,r):t.origin&&r&&!i&&(r[0]-=t.origin[0],r[1]-=t.origin[1]),t.type===f.models.BezierCurve.typeName&&f.path.scale(t.seed,e,r),t.paths)for(var o in t.paths)f.path.scale(t.paths[o],e,r);if(t.models)for(var o in t.models)a(t.models[o],e,!0,r);return t.caption&&f.path.scale(t.caption.anchor,e,r),t}function g(t,e,n,r,i,o,a){i=f.path.distort(e,i,o);(r=r||e.layer)&&(i.layer=r),"data"in e&&(i.data=e.data),f.isPath(i)?i.type===f.pathType.BezierSeed?d(t,new f.models.BezierCurve(i,a),n):s(t,i,n):d(t,i,n)}function u(t,c){if(t)return function t(e,n,r,i,o){var a=f.point.add(e.origin,r);if(n=null!=n?n:"",e.paths)for(var s in e.paths){var u=e.paths[s];u&&(u={modelContext:e,layer:null!=u.layer?u.layer:n,data:(null!=u.data?u:e).data,offset:a,pathContext:u,pathId:s,route:i.concat(["paths",s]),routeKey:o+(o?".":"")+"paths"+JSON.stringify([s])},c.onPath)&&c.onPath(u)}if(e.models)for(var l in e.models){var h=e.models[l];h&&(l={parentModel:e,layer:null!=h.layer?h.layer:n,data:(null!=h.data?h:e).data,offset:a,route:i.concat(["models",l]),routeKey:o+(o?".":"")+"models"+JSON.stringify([l]),childId:l,childModel:h},c.beforeChildWalk&&!c.beforeChildWalk(l)||(t(l.childModel,l.layer,a,l.route,l.routeKey),c.afterChildWalk&&c.afterChildWalk(l)))}}(t,t.layer,[0,0],[],""),t}(t=f.model||(f.model={})).addCaption=function(t,e,n,r){return n=n||f.point.zero(),r=r||f.point.clone(n),t.caption={text:e,anchor:new f.paths.Line(n,r)},t},t.addPath=s,t.addModel=d,t.addTo=function(t,e,n,r){return d(e,t,n,r=void 0===r?!1:r),t},t.clone=function(t){return f.cloneObject(t)},t.countChildModels=function(t){var e=0;if(t.models)for(var n in t.models)e++;return e},t.getAllCaptionsOffset=function(r){var i=[];function e(t,e,n){t.caption&&i.push({text:t.caption.text,data:r.data,anchor:f.path.clone(t.caption.anchor,f.point.add(t.origin,e)),layer:t.caption.anchor.layer||n})}return r&&e(r,r.origin,r.layer),t.walk(r,{afterChildWalk:function(t){return e(t.childModel,t.offset,t.layer)}}),i},t.getSimilarModelId=i,t.getSimilarPathId=o,t.layer=function(t,e){return t.layer=e,t},t.data=function(t,e){return t.data=e,t},t.originate=function(t,e){return function t(e,n){if(e){var r=f.point.add(e.origin,n);if(e.type===f.models.BezierCurve.typeName&&f.path.moveRelative(e.seed,r),e.paths)for(var i in e.paths)f.path.moveRelative(e.paths[i],r);if(e.models)for(var i in e.models)t(e.models[i],r);e.caption&&f.path.moveRelative(e.caption.anchor,r),e.origin=f.point.zero()}}(t,e?f.point.subtract([0,0],e):[0,0]),e&&(t.origin=e),t},t.center=function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!0);var r=f.measure.modelExtents(t),i=t.origin||[0,0];return e&&(i[0]-=r.center[0]),n&&(i[1]-=r.center[1]),t.origin=i,t},t.mirror=function t(e,n,r){var i={};if(!e)return null;if(e.origin&&(i.origin=f.point.mirror(e.origin,n,r)),e.type&&(i.type=e.type),"layer"in e&&(i.layer=e.layer),"data"in e&&(i.data=e.data),e.units&&(i.units=e.units),e.type===f.models.BezierCurve.typeName&&(i.type=f.models.BezierCurve.typeName,i.seed=f.path.mirror(e.seed,n,r)),e.paths)for(var o in i.paths={},e.paths){var a=e.paths[o];(a=a&&f.path.mirror(a,n,r))&&(i.paths[o]=a)}if(e.models)for(var o in i.models={},e.models){var s=e.models[o];(s=s&&t(s,n,r))&&(i.models[o]=s)}return e.caption&&(i.caption=f.cloneObject(e.caption),i.caption.anchor=f.path.mirror(e.caption.anchor,n,r)),i},t.move=function(t,e){return t.origin=f.point.clone(e),t},t.moveRelative=function(t,e){return t&&(t.origin=f.point.add(t.origin||f.point.zero(),e)),t},t.prefixPathIds=function(t,e){var n=[];u(t,{onPath:function(t){n.push(t)}});for(var r=0;r<n.length;r++){var i=n[r];delete i.modelContext.paths[i.pathId],i.modelContext.paths[e+i.pathId]=i.pathContext}return t},t.rotate=function t(e,n,r){if(void 0===r&&(r=[0,0]),e&&n){var i=f.point.subtract(r,e.origin);if(e.type===f.models.BezierCurve.typeName&&f.path.rotate(e.seed,n,i),e.paths)for(var o in e.paths)f.path.rotate(e.paths[o],n,i);if(e.models)for(var o in e.models)t(e.models[o],n,i);e.caption&&f.path.rotate(e.caption.anchor,n,i)}return e},t.scale=a,t.distort=function t(e,r,i,n,o){void 0===n&&(n=!1);var a={};if(e.layer&&(a.layer=e.layer),e.data&&(a.data=e.data),n&&e.origin&&(a.origin=f.point.distort(e.origin,r,i)),e.type===f.models.BezierCurve.typeName){var s,u=f.models.BezierCurve.getBezierSeeds(e,{byLayers:!0});for(s in u)!function(n){u[n].forEach(function(t,e){g(a,t,e.toString(),n,r,i,o)})}(s)}else if(e.paths)for(var l in e.paths){var h=e.paths[l];g(a,h,l,null,r,i,o)}if(e.models)for(var c in e.models){var p=t(e.models[c],r,i,!0,o);d(a,p,c)}return e.caption&&(a.caption=f.cloneObject(e.caption),a.caption.anchor=f.path.distort(e.caption.anchor,r,i)),a},t.convertUnits=function(t,e){var n;return t.units&&f.units.isValidUnit(t.units)&&f.units.isValidUnit(e)&&1!=(n=f.units.conversionScale(t.units,e))&&(a(t,n),t.units=e),t},t.walk=u,t.zero=function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!0);var r=f.measure.modelExtents(t),i=t.origin||[0,0];return e&&(i[0]-=r.low[0]),n&&(i[1]-=r.low[1]),t.origin=i,t}}(vjgeo=vjgeo||{}),!function(g){var d;function f(t,e,n){var r=n.pathContext,i=t.segments;if(g.measure.isPathEqual(i[0].absolutePath,r,1e-4,null,n.offset))i[0].overlapped=!0,i[0].duplicate=!0,e.push(i[0]);else for(var o={},a={path1Offset:t.offset,path2Offset:n.offset},s=g.path.intersection(t.pathContext,r,a),u=s?s.intersectionPoints:null,l=g.point.fromPathEnds(r,n.offset)||[],h=0;h<i.length;h++){var c=function(t,e,n){var r=[];return t.forEach(function(t){g.measure.isPointOnPath(t,e,1e-5,null,n)&&r.push(t)}),r}(u?l.concat(u):l,i[h].absolutePath,o);if(a.out_AreOverlapped&&(i[h].overlapped=!0,e.push(i[h])),0<c.length){for(var p,f=null,d=0;!f&&d<c.length;)f=function(t,e){var n=g.cloneObject(t);if(!n)return null;if(e=g.path.breakAtPoint(n,e)){for(var r=[n,e],i=2;i--;)if(0==g.round(g.measure.pathLength(r[i]),1e-4))return null;return r}return t.type==g.pathType.Circle?[n]:null}(i[h].absolutePath,c[d]),d++;f&&(t.broken=!0,i[h].absolutePath=f[0],f[1]&&(p={absolutePath:f[1],pathId:i[0].pathId,overlapped:i[h].overlapped,uniqueForeignIntersectionPoints:[]},i[h].overlapped&&e.push(p),i.push(p)),h--)}}}function v(t,a,s,u,l,h){var c=[],p=[];return d.walk(t,{onPath:function(e){var t={absolutePath:g.path.clone(e.pathContext,e.offset),pathId:e.pathId,overlapped:!1,uniqueForeignIntersectionPoints:[]},n=e;if(n.broken=!1,n.segments=[t],d.walk(a,{onPath:function(t){e.pathContext!==t.pathContext&&g.measure.isMeasurementOverlapping(u.pathMap[e.routeKey],l.pathMap[t.routeKey])&&f(n,p,t)},beforeChildWalk:function(t){t=l.modelMap[t.routeKey];return t&&g.measure.isMeasurementOverlapping(u.pathMap[e.routeKey],t)}}),s)for(var r=0;r<n.segments.length;r++){var i=g.point.middle(n.segments[r].absolutePath),o={measureAtlas:l,farPoint:h};n.segments[r].isInside=g.measure.isPointInsideModel(i,a,o),n.segments[r].uniqueForeignIntersectionPoints=o.out_intersectionPoints}c.push(n)}}),{crossedPaths:c,overlappedSegments:p}}function y(t,i,o){function e(t){for(var e,n,r=0;r<i.length;r++)e=i[r],n=t,g.measure.isPathEqual(e.absolutePath,n.absolutePath,o)&&(e.duplicate=n.duplicate=!0)}for(var n=0;n<t.length;n++)e(t[n])}function m(i,t,e,n,o,r){function a(t,e,n){var r=d.getSimilarPathId(t,e),e=r==e?i.routeKey:g.createRouteKey(i.route.slice(0,-1).concat([r]));n.addedPath=g.cloneObject(i.pathContext),n.addedPath.type=n.absolutePath.type,g.path.copyProps(n.absolutePath,n.addedPath),g.path.moveRelative(n.addedPath,i.offset,!0),t.paths[r]=n.addedPath,i.broken?(t=g.measure.pathExtents(n.absolutePath),o.pathMap[e]=t,o.modelsMeasured=!1):o.pathMap[e]=s}var s=o.pathMap[i.routeKey];delete i.modelContext.paths[i.pathId],delete o.pathMap[i.routeKey];for(var u,l,h,c=0;c<i.segments.length;c++)i.segments[c].duplicate?n?a(i.modelContext,i.pathId,i.segments[c]):r(i.segments[c].absolutePath,i.routeKey,"segment is duplicate"):(u=i.modelContext,l=i.pathId,(h=i.segments[c]).isInside&&t||!h.isInside&&e?a(u,l,h):(o.modelsMeasured=!1,r(h.absolutePath,i.routeKey,"segment is "+(h.isInside?"inside":"outside")+" intersectionPoints="+JSON.stringify(h.uniqueForeignIntersectionPoints))))}function n(t,e,n,r,i,o,a){void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===i&&(i=!1),void 0===o&&(o=!0);var s={trimDeadEnds:!0,pointMatchingDistance:.005,out_deleted:[{paths:{}},{paths:{}}]},u=(g.extendObject(s,a),s.measureA=s.measureA||new g.measure.Atlas(t),s.measureB=s.measureB||new g.measure.Atlas(e),s.measureA.measureModels(),s.measureB.measureModels(),s.farPoint||(f=g.measure.increase(g.measure.increase({high:[null,null],low:[null,null]},s.measureA.modelMap[""]),s.measureB.modelMap[""]),s.farPoint=g.point.add(f.high,[1,1])),v(t,e,!0,s.measureA,s.measureB,s.farPoint)),l=v(e,t,!0,s.measureB,s.measureA,s.farPoint);function h(t,e,n,r){d.addPath(s.out_deleted[t],e,"deleted");t=e;t.reason=r,t.routeKey=n}y(u.overlappedSegments,l.overlappedSegments,s.pointMatchingDistance);for(var c=0;c<u.crossedPaths.length;c++)m(u.crossedPaths[c],n,r,!0,s.measureA,function(t,e,n){h(0,t,e,n)});for(c=0;c<l.crossedPaths.length;c++)m(l.crossedPaths[c],i,o,!1,s.measureB,function(t,e,n){h(1,t,e,n)});var p,f={models:{a:t,b:e}};return s.trimDeadEnds&&d.removeDeadEnds(f,null,p=n||i?p:function(t){for(var e=0;e<u.overlappedSegments.length;e++)if(u.overlappedSegments[e].duplicate&&t.pathContext===u.overlappedSegments[e].addedPath)return!1;return!0},function(t,e){h("a"===t.route[1]?0:1,t.pathContext,t.routeKey,e)}),g.extendObject(a,s),f}(d=g.model||(g.model={})).breakPathsAtIntersections=function(t,e){var n,r=new g.measure.Atlas(t);return r.measureModels(),e?(n=new g.measure.Atlas(e)).measureModels():(e=t,n=r),v(t,e||t,!1,r,n),t},d.combine=n,d.combineIntersection=function(t,e){return n(t,e,!0,!1,!0,!1)},d.combineSubtraction=function(t,e){return n(t,e,!1,!0,!0,!1)},d.combineUnion=function(t,e){return n(t,e,!1,!0,!1,!0)}}(vjgeo=vjgeo||{}),!function(u){function t(t){this.comparer=t,this.collections=[]}t.prototype.addItemToCollection=function(t,e){var n=this.findCollection(t);n?n.push(e):this.collections.push({key:t,items:[e]})},t.prototype.findCollection=function(t,e){for(var n=0;n<this.collections.length;n++){var r=this.collections[n];if(this.comparer(t,r.key))return e&&e(n),r.items}return null},t.prototype.removeCollection=function(t){var e=this;return!!this.findCollection(t,function(t){e.collections.splice(t,1)})},t.prototype.removeItemFromCollection=function(t,e){var n=this.findCollection(t);if(n){for(var r=0;r<n.length;r++)if(n[r]===e)return n.splice(r,1),!0;return!1}},t.prototype.getCollectionsOfMultiple=function(t){for(var e=0;e<this.collections.length;e++){var n=this.collections[e];1<n.items.length&&t(n.key,n.items)}},u.Collector=t;var e=require("kdbush"),l=e.default||e;function n(){this.reset()}n.prototype.reset=function(){this.insertedCount=0,this.graph={},this.index={},this.merged={},this.values=[]},n.prototype.insertValue=function(t){return this.values.push(t),this.values.length-1},n.prototype.insertValueIdAtPoint=function(t,e){var n,r=e[0],i=e[1],r=(this.graph[r]||(this.graph[r]={}),this.graph[r]),o=i in r;return o?((n=r[i])in this.merged&&(n=this.merged[n]),this.index[n].valueIds.push(t)):(r[i]=n=this.insertedCount++,this.index[n]={pointId:n,point:e,valueIds:[t]}),{existed:o,pointId:n}},n.prototype.mergePoints=function(n){var r=this,t=[],i=[];for(a in this.index){var e=this.index[a],o=e.point;e.kdId=t.length,t.push(o),i.push(e)}this.kdbush=l(t);var a,s=this;for(a in this.index)!function(t){if(t in s.merged)return;var e=s.index[t];s.kdbush.within(e.point[0],e.point[1],n).forEach(function(t){t!==e.kdId&&r.mergeIndexElements(e,i[t])})}(a)},n.prototype.mergeNearestSinglePoints=function(o){var t,a=this,s=[];for(t in this.index){var e=this.index[t];1===e.valueIds.length&&s.push(e)}this.kdbush=l(s.map(function(t){return t.point})),s.forEach(function(e){if(!(e.pointId in a.merged)){var t=a.kdbush.within(e.point[0],e.point[1],o),n=[];t.forEach(function(t){t=s[t];t.pointId!==e.pointId&&n.push({el:t,distance:u.measure.pointDistance(t.point,e.point)})}),n.sort(function(t,e){return t.distance-e.distance});for(var r=0;r<n.length;r++){var i=n[r].el;if(!(i.pointId in a.merged))return void(i.merged&&0<i.merged.length?a.mergeIndexElements(i,e):a.mergeIndexElements(e,i))}}})},n.prototype.mergeIndexElements=function(t,e){return t.merged=t.merged||[],t.merged.push(e.pointId),this.merged[e.pointId]=t.pointId,t.valueIds.push.apply(t.valueIds,e.valueIds),delete this.index[e.pointId],t.pointId},n.prototype.forEachPoint=function(t){for(var e=this,n=0;n<this.insertedCount;n++){var r=this.index[n];r&&0<r.valueIds.length&&t(r.point,r.valueIds.map(function(t){return e.values[t]}),n,r)}},n.prototype.getIdOfPoint=function(t){var e=this.graph[t[0]];if(e){e=e[t[1]];if(0<=e)return e in this.merged?this.merged[e]:e}},n.prototype.getElementAtPoint=function(t){t=this.getIdOfPoint(t);if(0<=t)return this.index[t]},u.PointGraph=n}(vjgeo=vjgeo||{}),!function(u){var l;function h(t,e,n){var r=0;do{var i=t[r];do{for(var o=!1,a=r+1;a<t.length;a++){var s=t[a];if(o=e(i.pathContext,s.pathContext,!1)){n(i.pathContext,s.pathContext),delete s.modelContext.paths[s.pathId],t.splice(a,1);break}}}while(o)}while(++r<t.length)}(l=u.model||(u.model={})).simplify=function(t,e){function n(t,e){return Math.abs(t.radius-e.radius)<=s.scalarMatchingDistance&&u.measure.pointDistance(t.origin,e.origin)<=s.pointMatchingDistance}var r=new u.Collector(n),i=new u.Collector(n),o=new u.Collector(u.measure.isSlopeEqual),a={},s=(a[u.pathType.Arc]=function(t){r.addItemToCollection(t.pathContext,t)},a[u.pathType.Circle]=function(t){i.addItemToCollection(t.pathContext,t)},a[u.pathType.Line]=function(t){var e=u.measure.lineSlope(t.pathContext);o.addItemToCollection(e,t)},{scalarMatchingDistance:.001,pointMatchingDistance:.005});return u.extendObject(s,e),l.walk(t,{onPath:function(t){var e=a[t.pathContext.type];e&&e(t)}}),r.getCollectionsOfMultiple(function(t,e){h(e,u.measure.isArcSpanOverlapping,function(t,e){var n=u.measure.isBetweenArcAngles(t.endAngle,e,!1),r=u.measure.isBetweenArcAngles(e.endAngle,t,!1);n&&r?t.endAngle=t.startAngle+360:(t.startAngle=u.angle.noRevolutions((r=n?[t,e]:[e,t])[0].startAngle),t.endAngle=r[1].endAngle)})}),i.getCollectionsOfMultiple(function(t,e){for(var n=1;n<e.length;n++){var r=e[n];delete r.modelContext.paths[r.pathId]}}),o.getCollectionsOfMultiple(function(n,t){h(t,u.measure.isLineOverlapping,function(t,e){e=u.measure.modelExtents({paths:{lineA:t,lineB:e}});n.hasSlope?n.slope<0?(t.origin=[e.low[0],e.high[1]],t.end=[e.high[0],e.low[1]]):0<n.slope?(t.origin=e.low,t.end=e.high):(t.origin[0]=e.low[0],t.end[0]=e.high[0]):(t.origin[1]=e.low[1],t.end[1]=e.high[1])})}),t}}(vjgeo=vjgeo||{}),!function(c){var t,o;t=c.path||(c.path={}),(o={})[c.pathType.Arc]=function(t,e,n){return new c.models.OvalArc(t.startAngle,t.endAngle,t.radius,e,!1,n)},o[c.pathType.Circle]=function(t,e,n){return new c.models.Ring(t.radius+e,t.radius-e)},o[c.pathType.Line]=function(t,e,n){return new c.models.Slot(t.origin,t.end,e,n)},t.expand=function(t,e,n){var r,i;return t?(r=null,(i=o[t.type])&&((r=i(t,e,n)).origin=t.origin),r):null},t.straighten=function(t,e,n,r){for(var i=c.angle.ofArcSpan(t),o=1,a=(270<=i?o=4:180<i?o=3:(150<i||e)&&(o=2),c.angle.toRadians(i/o)),s=c.models.Polygon.circumscribedRadius(t.radius,a),e=c.point.fromArc(t),u=[c.point.subtract(e[0],t.origin)],l=c.angle.toRadians(t.startAngle)+a/2,h=0;h<o;h++)u.push(c.point.fromPolar(l,s)),l+=a;return u.push(c.point.subtract(e[1],t.origin)),(i=new c.models.Polyline(r,u)).origin=t.origin,"string"==typeof n&&n.length&&c.model.prefixPathIds(i,n),i}}(vjgeo=vjgeo||{}),!function(h){var c;function l(t,r,n,i){if(void 0===n&&(n=0),void 0===i&&(i={}),r<=0)return null;var o={models:{expansions:{models:{}},caps:{models:{}}}},a=!0,s=i.farPoint;if(c.walk(t,{onPath:function(t){var e,n;i.pointMatchingDistance&&h.measure.pathLength(t.pathContext)<i.pointMatchingDistance||(e=h.path.expand(t.pathContext,r,!0))&&(c.moveRelative(e,t.offset),n=c.getSimilarModelId(o.models.expansions,t.pathId),c.prefixPathIds(e,t.pathId+"_"),c.originate(e),a||(c.combine(o,e,!1,!0,!1,!0,i),i.measureA.modelsMeasured=!1,s=i.farPoint,delete i.farPoint,delete i.measureB),(o.models.expansions.models[n]=e).models&&(t=e.models.Caps)&&(delete e.models.Caps,o.models.caps.models[n]=t),a=!1)}}),n){var u,e=o.models.caps,l={models:{}};for(u in o.models.straightcaps=l,c.simplify(e),e.models)l.models[u]={models:{}},c.walk(e.models[u],{onPath:function(t){var e=t.pathContext,e=h.path.straighten(e,2==n,t.pathId+"_",!0);c.combine(o,e,!1,!0,!1,!0,i),i.measureA.modelsMeasured=!1,s=i.farPoint,delete i.farPoint,delete i.measureB,l.models[u].models[t.pathId]=e,delete t.modelContext.paths[t.pathId]}});delete o.models.caps}return i.farPoint=s,o}function p(t){var r=[];return c.findChains(t,function(t,e,n){r=t.filter(function(t){return t.endless})}),r}(c=h.model||(h.model={})).expandPaths=l,c.outline=function(t,e,n,r,i){var o,a,s,u;return void 0===r&&(r=!1),(e=l(t,e,n=void 0===n?0:n,i=void 0===i?{}:i))?(o=0==(n=p(n=t)).length?null:(a={models:{}},n.forEach(function(t,e){a.models[e]=h.chain.toNewModel(t)}),a))?(s=0,u={models:{}},p(e).forEach(function(t){var e=t.links[0].walkedPath,e=h.measure.isPointInsideModel(h.point.middle(e.pathContext),o,e.offset);(r&&e||!r&&!e)&&(u.models[s++]=h.chain.toNewModel(t))}),u):e:null}}(vjgeo=vjgeo||{}),!function(n){var t,i,r;function o(t,e,n){function r(t){return i[t]||(i[t]={}),i[t]}r(t)[e]=n,r(e)[t]=1/n}function a(t,e){o(t,r,e)}t=n.units||(n.units={}),r=n.unitType.Millimeter,t.conversionScale=function(t,e){return t==e?1:(i||(i={},a(n.unitType.Centimeter,10),a(n.unitType.Meter,1e3),a(n.unitType.Inch,25.4),a(n.unitType.Foot,25.4*12)),i[t][e]||o(t,e,i[t][r]*i[r][e]),i[t]&&i[t][e])},t.isValidUnit=function(t){for(var e in n.unitType)if(n.unitType[e]==t)return!0;return!1}}(vjgeo=vjgeo||{}),!function(u){var o,l,a;function r(t,e,n){void 0===n&&(n=1e-4);t=u.angle.noRevolutions(t),e=u.angle.noRevolutions(e);return 0==u.angle.noRevolutions(u.round(e-t,n))}function i(t,e,n){return n?!(!t||!e)&&o.pointDistance(t,e)<=n:0==u.round(t[0]-e[0])&&0==u.round(t[1]-e[1])}function s(t,e,n){return void 0===n&&(n=0),e.hasSlope?Math.abs(t[1]-(e.slope*t[0]+e.yIntercept))<=n:Math.abs(t[0]-e.line.origin[0])<=n}function t(t,e,n){return void 0===n&&(n=0),Math.abs(o.pointDistance(t,e.origin)-e.radius)<=n}function h(t,e){return!t.hasSlope&&!e.hasSlope||!(!t.hasSlope||!e.hasSlope||0!=u.round(t.slope-e.slope,1e-5))}(o=u.measure||(u.measure={})).isAngleEqual=r,(l={})[u.pathType.Line]=function(t,e,n){return i(t.origin,e.origin,n)&&i(t.end,e.end,n)||i(t.origin,e.end,n)&&i(t.end,e.origin,n)},l[u.pathType.Circle]=function(t,e,n){return i(t.origin,e.origin,n)&&t.radius==e.radius},l[u.pathType.Arc]=function(t,e,n){return l[u.pathType.Circle](t,e,n)&&r(t.startAngle,e.startAngle)&&r(t.endAngle,e.endAngle)},o.isPathEqual=function(t,e,n,r,i){var o,a=!1;function s(){a=o(t,e,n)}return t.type==e.type&&(o=l[t.type])&&(r||i?u.path.moveTemporary([t,e],[r,i],s):s()),a},o.isPointEqual=i,o.isPointDistinct=function(t,e,n){for(var r=0;r<e.length;r++)if(i(e[r],t,n))return!1;return!0},o.isPointOnSlope=s,o.isPointOnCircle=t,(a={})[u.pathType.Circle]=t,a[u.pathType.Arc]=function(t,e,n){return!!a[u.pathType.Circle](t,e,n)&&(n=u.angle.ofPointInDegrees(e.origin,t),o.isBetweenArcAngles(n,e,!1))},a[u.pathType.Line]=function(t,e,n,r){var i=r&&r.cachedLineSlope||o.lineSlope(e);return r&&!r.cachedLineSlope&&(r.cachedLineSlope=i),s(t,i,n)&&o.isBetweenPoints(t,e,!1)},o.isPointOnPath=function(t,e,n,r,i){void 0===n&&(n=0);var o=a[e.type];return!!o&&o(t,r?u.path.clone(e,r):e,n,i)},o.isSlopeEqual=function(t,e){var n,r,i;return!!h(t,e)&&(t.hasSlope||e.hasSlope?(n=(i=[t,e]).map(function(t){return u.angle.toDegrees(Math.atan(t.slope))}),i=i.map(function(t){return u.path.clone(t.line)}),r=i[0].origin,i.forEach(function(t,e){return u.path.rotate(t,-n[e],r)}),i=i.map(function(t){return(t.origin[1]+t.end[1])/2}),0==u.round(i[0]-i[1],1e-5)):0==u.round(t.line.origin[0]-e.line.origin[0]))},o.isSlopeParallel=h}(vjgeo=vjgeo||{}),!function(d){var g=d.measure||(d.measure={});function r(t,e,n){function r(t,e,n){if(e)for(var r=2;r--;)null!=e[r]&&(null==t[r]?t[r]=e[r]:t[r]=n(t[r],e[r]))}return e&&(r(t.low,e.low,Math.min),r(t.high,e.high,Math.max)),n&&w(t),t}function s(t,e,n,r){return r?Math.min(e,n)<t&&t<Math.max(e,n):Math.min(e,n)<=t&&t<=Math.max(e,n)}function u(t,e,n){var r=d.angle.noRevolutions(e.startAngle),e=r+d.angle.ofArcSpan(e);return s(t=d.angle.noRevolutions(t),r,e,n)||s(t,r+360,e+360,n)||s(t,r-360,e-360,n)}function o(t,e,n){for(var r=!1,i=2;i--;)if(0==d.round(e.origin[i]-e.end[i],1e-6)){if(r)return!1;r=!0}else{var o=d.round(e.origin[i]),a=d.round(e.end[i]);if(!s(d.round(t[i]),o,a,n))return!1}return!0}g.increase=r,g.isArcConcaveTowardsPoint=function(t,e){var n;return i(t.origin,e)<=t.radius||(e=new d.paths.Line(d.point.middle(t),e),n={},!(!d.path.intersection(e,new d.paths.Chord(t),n)&&!n.out_AreOverlapped))},g.isArcSpanOverlapping=function(t,e,r){function n(e,t){function n(t){return u(t,e,r)}return n(t.startAngle)||n(t.endAngle)}return n(t,e)||n(e,t)||t.startAngle==e.startAngle&&t.endAngle==e.endAngle},g.isBetween=s,g.isBetweenArcAngles=u,g.isBetweenPoints=o,g.isBezierSeedLinear=function(t,e){var n=p(t);if(!t.controls)return!1;for(var r=0;r<t.controls.length;r++)if(!g.isPointOnSlope(t.controls[r],n)){if(!e)return!1;if(o(t.controls[r],t,!1))return!1}return!0};var l=require("graham_scan");function h(t){return t.join(",")}function n(t,e){var n=new l,r=[];t.forEach(function(t){n.addPoint(t[0],t[1]),r.push(h(t))});var i=n.getHull(),o=i.slice(0,3).map(function(t){return h([t.x,t.y])}),a=[];switch(r.forEach(function(t){~o.indexOf(t)&&a.push(t)}),a.indexOf(o[1])){case 0:a.unshift(a.pop());break;case 2:a.push(a.shift())}return e&&(e.hullPoints=i.map(function(t){return[t.x,t.y]}),e.keyPoints=t),o[0]!=a[0]}function c(t,e){for(var n=2;n--;)if(!(d.round(t.low[n]-e.high[n])<=0&&0<=d.round(t.high[n]-e.low[n])))return!1;return!0}function p(t){var e=t.end[0]-t.origin[0];return 0==d.round(e,1e-6)?{line:t,hasSlope:!1}:{line:t,hasSlope:!0,slope:e=(t.end[1]-t.origin[1])/e,yIntercept:t.origin[1]-e*t.origin[0]}}function i(t,e){var n=e[0]-t[0],e=e[1]-t[1];return Math.sqrt(n*n+e*e)}function f(t,e,n){return[n(t[0],e[0]),n(t[1],e[1])]}g.isChainClockwise=function(t,e){return t.endless&&1!==t.links.length?n(d.chain.toKeyPoints(t),e):null},g.isPointArrayClockwise=n,g.isLineOverlapping=function(t,e,i){function n(t,e,n){function r(t){return o(t,e,i)}return r(n.origin)||r(n.end)}return n(0,t,e)||n(0,e,t)},g.isMeasurementOverlapping=c,g.lineSlope=p,g.pointDistance=i;var a={};function v(t,e){if(t){var n=a[t.type];if(n)return n=n(t),e&&(n.high=d.point.add(n.high,e),n.low=d.point.add(n.low,e)),n}return{low:null,high:null}}a[d.pathType.Line]=function(t){return{low:f(t.origin,t.end,Math.min),high:f(t.origin,t.end,Math.max)}},a[d.pathType.Circle]=function(t){var e=t.radius;return{low:d.point.add(t.origin,[-e,-e]),high:d.point.add(t.origin,[e,e])}},a[d.pathType.Arc]=function(o){var t=o.radius,a=d.point.fromArc(o);function e(t,e,n){for(var r=f(a[0],a[1],n),i=2;i--;)u(t[i],o,!1)&&(r[i]=e+o.origin[i]);return r}return{low:e([180,270],-t,Math.min),high:e([360,90],t,Math.max)}},g.pathExtents=v;var y={};function m(t){if(t){var e=y[t.type];if(e)return e(t)}return 0}function x(t,n){function e(t,e){e&&(t=t.slice(0,-2),(t=d.createRouteKey(t))in n.modelMap?r(n.modelMap[t],e):n.modelMap[t]=(t=e,{high:d.point.clone(t.high),low:d.point.clone(t.low)}))}n=n||new b(t);d.model.walk(t,{onPath:function(t){t.routeKey in n.pathMap||(n.pathMap[t.routeKey]=v(t.pathContext,t.offset)),e(t.route,n.pathMap[t.routeKey])},afterChildWalk:function(t){e(t.route,n.modelMap[t.routeKey])}}),n.modelsMeasured=!0;t=n.modelMap[""];return t&&w(t)}function w(t){return t.center=d.point.average(t.high,t.low),t.width=t.high[0]-t.low[0],t.height=t.high[1]-t.low[1],t}y[d.pathType.Line]=function(t){return i(t.origin,t.end)},y[d.pathType.Circle]=function(t){return 2*Math.PI*t.radius},y[d.pathType.Arc]=function(t){var e=y[d.pathType.Circle](t);return e*=d.angle.ofArcSpan(t)/360},y[d.pathType.BezierSeed]=function(t){return d.models.BezierCurve.computeLength(t)},g.pathLength=m,g.modelPathLength=function(t){var e=0;return d.model.walk(t,{onPath:function(t){e+=m(t.pathContext)}}),e},g.modelExtents=x,g.augment=w,t.prototype.measureModels=function(){this.modelsMeasured||x(this.modelContext,this)};var b=t;function t(t){this.modelContext=t,this.modelsMeasured=!1,this.modelMap={},this.pathMap={}}function A(t,e){var n,r,i,o,a=t[1].origin,s=a[0],u=t[3].origin[0],l=t[0].origin[0],h=s-l;return 2*h<l-u||h<(n=(s-u)/3)?null:(n=Math.min(n,h),(h=d.solvers.equilateralSide(n))<(r=(t=[d.point.fromSlopeIntersection(t[1],t[2]),d.point.fromSlopeIntersection(t[4],t[5])].map(function(t){return Math.abs(t[1]-a[1])}))[t=t[0]>t[1]?0:1])?(i=s-2*(o=d.solvers.equilateralAltitude(r)))+o<l||u<i-o?null:(l=2*o-e[1+t].width,u=Math.min(u-i+o,l)/2,{origin:(o=e[2-t].middle,l=i+u,o=p(o),[l,o.slope*l+o.yIntercept]),radius:r,type:"peak "+t}):{origin:[s-2*n,a[1]],radius:h,type:"side"})}g.Atlas=b,g.boundingHexagon=function(t){var e=d.cloneObject(t),r=(d.model.originate(e),x(e)),n=[],i={paths:{}};function o(t,e,n){return{radius:t,paths:new d.models.Polygon(6,t,30).paths,origin:d.point.add(e,r.center),notes:n}}d.model.center(e);for(var a=[[90,-90],[-60,-30],[-60,30]];a.length;){var s=a.shift(),s=function(t,e,n,r){return d.model.rotate(e,n),n=x(e),[(e={index:t,rotation:r,center:d.point.rotate(n.center,r),width:n.height,height:n.width,bottom:new d.paths.Line(n.low,[n.high[0],n.low[1]]),middle:new d.paths.Line([n.low[0],n.center[1]],[n.high[0],n.center[1]]),top:new d.paths.Line(n.high,[n.low[0],n.high[1]])}).top,e.middle,e.bottom].forEach(function(t){return d.path.rotate(t,r)}),e}(n.length,e,s[0],s[1]),u=d.solvers.equilateralSide(s.width/2);if(u>=s.height)return o(u,s.center,"solved by bound "+n.length);n.push(s)}if(function(t){for(var e=1;e<3;e++)if(!g.isPointEqual(t[0].center,t[e].center,1e-6)||0!==d.round(t[0].width-t[e].width))return;return 1}(n))return o(d.solvers.equilateralSide(n[0].width/2),n[0].center,"solved as circular");for(var l,h=n.map(function(t){return t.top}).concat(n.map(function(t){return t.bottom})),c=(h.forEach(function(t,e){var n;i.paths[e]=t,d.path.converge(h[(n=6)<=(e=e+2)?e-n:e<0?e+n:e],t,!0)}),n.forEach(function(t,e){i.paths["m"+e]=t.middle}),n.slice()),p=0;p<6;p++){0<p&&(h.push(h.shift()),c.push(c.shift()),d.model.rotate(i,-60));var f=A(h,c);f&&(!l||f.radius<l.radius)&&((l=f).index=p)}return t=d.point.rotate(l.origin,60*l.index),o(l.radius,t,"solved by "+l.index+" as "+l.type)},g.isPointInsideModel=function(t,e,i){(i=void 0===i?{}:i).farPoint||(i.farPoint=(n=e,r=i.farPoint,i.measureAtlas,r||((r=x(n).high)?d.point.add(r,[1,1]):[7654321,1234567]))),i.out_intersectionPoints=[];var n,r,o,a=new d.paths.Line(t,i.farPoint),s=v(a);return d.model.walk(e,{onPath:function(t){var e,n,r;i.measureAtlas&&!c(s,i.measureAtlas.pathMap[t.routeKey])||(n={path2Offset:t.offset},(t=d.path.intersection(a,t.pathContext,n))&&(e=i.out_intersectionPoints,n=t.intersectionPoints,r=0,n.forEach(function(t){g.isPointDistinct(t,e,1e-8)&&(e.push(t),r++)}),r%2==1)&&(o=!o))},beforeChildWalk:function(t){return!i.measureAtlas||(t=i.measureAtlas.modelMap[t.routeKey])&&c(s,t)}}),!!o}}(vjgeo=vjgeo||{}),!function(r){var t;(t=r.exporter||(r.exporter={})).toJson=function(t,n){return void 0===n&&(n={}),JSON.stringify(t,n.accuracy&&function(t,e){return r.isNumber(e)?r.round(e,n.accuracy):r.isPoint(e)?r.point.rounded(e,n.accuracy):e},n.indentation)},t.tryGetModelUnits=function(t){if(r.isModel(t))return t.units},t.colors={black:0,red:1,yellow:2,lime:3,aqua:4,blue:5,fuchsia:6,white:7,gray:9,maroon:14,orange:30,olive:58,green:94,teal:134,navy:174,purple:214,silver:254}}(vjgeo=vjgeo||{}),!function(c){var t;function p(t){var e,n;if(!/^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$/.test(t))return 7698037;var r=t.toLowerCase().replace(/\#/g,""),i=r.length;if(3==i){for(var o="",a=0;a<i;a++)o+=r.slice(a,a+1).concat(r.slice(a,a+1));r=o}for(var s=[],u=0;u<6;u+=2){var l=r.slice(u,u+2);s.push(parseInt("0x"+l))}return t=s[1],n=s[2],0==(e=s[0])&&0==t&&0==n?7698037:256*e*256+256*t+n}(t=c.importer||(c.importer={})).parseNumericList=function(t){for(var e,n=[],r=/-?(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+\-]?\d+)?/g;null!==(e=r.exec(t));)e.index===r.lastIndex&&r.lastIndex++,""!==e[0]&&n.push(parseFloat(e[0]));return n},t.htmlColorToEntColor=p,t.fromGeoJsonData=function(t,e){var n={},r=0;function i(t){n.models||(n.models={}),n.models["p_"+ ++r]=t}function o(t,e){t=new c.paths.Circle(t,1,e),n.paths||(n.paths={}),n.paths["p_"+ ++r]=t}function a(t,e){for(var n={paths:{},data:e},r=0;r<t.length;r++)n.paths[r]=new c.paths.Circle(t[r],1);i(n)}function s(t,e){i(new c.models.Polyline(!1,t,e))}function u(t,e){for(var n={models:{},data:e},r=0;r<t.length;r++)n.models[r]=new c.models.Polyline(!1,t[r]);i(n)}function l(t,e){if(1==t.length)i(new c.models.Polyline(!0,t[0],__assign(__assign({},e),{isFill:!0})));else{for(var n=[],r=0;r<t.length;r++)n.push(t[r]);i(new c.models.Polyline(n,__assign(__assign({},e),{isHole:!0})))}}function h(t,e){for(var n=0;n<t.length;n++)l(t[n],e)}return t.features.forEach(function(t){var e=t.geometry,n=__assign({},t.properties);switch("string"==typeof n.color&&(n.color=p(n.color)),e.type){case"Point":o(e.coordinates,n);break;case"MultiPoint":a(e.coordinates,n);break;case"LineString":s(e.coordinates,n);break;case"MultiLineString":u(e.coordinates,n);break;case"Polygon":l(e.coordinates,n);break;case"MultiPolygon":h(e.coordinates,n);break;case"GeometryCollection":e.geometries.forEach(function(t){switch(t.type){case"Point":o(t.coordinates,n);break;case"MultiPoint":a(t.coordinates,n);break;case"LineString":s(t.coordinates,n);break;case"MultiLineString":case"Polygon":u(t.coordinates,n);break;case"MultiPolygon":h(t.coordinates,n)}})}}),n.data=e||{},n}}(vjgeo=vjgeo||{}),!function(H){var K,W;function V(t,e){(t-=1)<0&&(t=0);var n=[1,255,0,0,2,255,255,0,3,0,255,0,4,0,255,255,5,0,0,255,6,255,0,255,7,255,255,255,8,128,128,128,9,192,192,192,10,255,0,0,11,255,127,127,12,204,0,0,13,204,102,102,14,153,0,0,15,153,76,76,16,127,0,0,17,127,63,63,18,76,0,0,19,76,38,38,20,255,63,0,21,255,159,127,22,204,51,0,23,204,127,102,24,153,38,0,25,153,95,76,26,127,31,0,27,127,79,63,28,76,19,0,29,76,47,38,30,255,127,0,31,255,191,127,32,204,102,0,33,204,153,102,34,153,76,0,35,153,114,76,36,127,63,0,37,127,95,63,38,76,38,0,39,76,57,38,40,255,191,0,41,255,223,127,42,204,153,0,43,204,178,102,44,153,114,0,45,153,133,76,46,127,95,0,47,127,111,63,48,76,57,0,49,76,66,38,50,255,255,0,51,255,255,127,52,204,204,0,53,204,204,102,54,153,153,0,55,153,153,76,56,127,127,0,57,127,127,63,58,76,76,0,59,76,76,38,60,191,255,0,61,223,255,127,62,153,204,0,63,178,204,102,64,114,153,0,65,133,153,76,66,95,127,0,67,111,127,63,68,57,76,0,69,66,76,38,70,127,255,0,71,191,255,127,72,102,204,0,73,153,204,102,74,76,153,0,75,114,153,76,76,63,127,0,77,95,127,63,78,38,76,0,79,57,76,38,80,63,255,0,81,159,255,127,82,51,204,0,83,127,204,102,84,38,153,0,85,95,153,76,86,31,127,0,87,79,127,63,88,19,76,0,89,47,76,38,90,0,255,0,91,127,255,127,92,0,204,0,93,102,204,102,94,0,153,0,95,76,153,76,96,0,127,0,97,63,127,63,98,0,76,0,99,38,76,38,100,0,255,63,101,127,255,159,102,0,204,51,103,102,204,127,104,0,153,38,105,76,153,95,106,0,127,31,107,63,127,79,108,0,76,19,109,38,76,47,110,0,255,127,111,127,255,191,112,0,204,102,113,102,204,153,114,0,153,76,115,76,153,114,116,0,127,63,117,63,127,95,118,0,76,38,119,38,76,57,120,0,255,191,121,127,255,223,122,0,204,153,123,102,204,178,124,0,153,114,125,76,153,133,126,0,127,95,127,63,127,111,128,0,76,57,129,38,76,66,130,0,255,255,131,127,255,255,132,0,204,204,133,102,204,204,134,0,153,153,135,76,153,153,136,0,127,127,137,63,127,127,138,0,76,76,139,38,76,76,140,0,191,255,141,127,223,255,142,0,153,204,143,102,178,204,144,0,114,153,145,76,133,153,146,0,95,127,147,63,111,127,148,0,57,76,149,38,66,76,150,0,127,255,151,127,191,255,152,0,102,204,153,102,153,204,154,0,76,153,155,76,114,153,156,0,63,127,157,63,95,127,158,0,38,76,159,38,57,76,160,0,63,255,161,127,159,255,162,0,51,204,163,102,127,204,164,0,38,153,165,76,95,153,166,0,31,127,167,63,79,127,168,0,19,76,169,38,47,76,170,0,0,255,171,127,127,255,172,0,0,204,173,102,102,204,174,0,0,153,175,76,76,153,176,0,0,127,177,63,63,127,178,0,0,76,179,38,38,76,180,63,0,255,181,159,127,255,182,51,0,204,183,127,102,204,184,38,0,153,185,95,76,153,186,31,0,127,187,79,63,127,188,19,0,76,189,47,38,76,190,127,0,255,191,191,127,255,192,102,0,204,193,153,102,204,194,76,0,153,195,114,76,153,196,63,0,127,197,95,63,127,198,38,0,76,199,57,38,76,200,191,0,255,201,223,127,255,202,153,0,204,203,178,102,204,204,114,0,153,205,133,76,153,206,95,0,127,207,111,63,127,208,57,0,76,209,66,38,76,210,255,0,255,211,255,127,255,212,204,0,204,213,204,102,204,214,153,0,153,215,153,76,153,216,127,0,127,217,127,63,127,218,76,0,76,219,76,38,76,220,255,0,191,221,255,127,223,222,204,0,153,223,204,102,178,224,153,0,114,225,153,76,133,226,127,0,95,227,127,63,111,228,76,0,57,229,76,38,66,230,255,0,127,231,255,127,191,232,204,0,102,233,204,102,153,234,153,0,76,235,153,76,114,236,127,0,63,237,127,63,95,238,76,0,38,239,76,38,57,240,255,0,63,241,255,127,159,242,204,0,51,243,204,102,127,244,153,0,38,245,153,76,95,246,127,0,31,247,127,63,79,248,76,0,19,249,76,38,47,250,51,51,51,251,91,91,91,252,132,132,132,253,173,173,173,254,214,214,214,255,255,255,255],r=n[4*(t%=256)+1],i=n[4*t+2],n=n[4*t+3];return e?"#"+(t=1==(t=r.toString(16)).length?"0"+t:t)+(e=1==(e=i.toString(16)).length?"0"+e:e)+(t=1==(t=n.toString(16)).length?"0"+t:t):[r,i,n]}function p(t,e,n,r){void 0===r&&(r=!1);var i=n-e;return(t=((t-e)%i+i)%i+e)===e?r?e:n:t}(K=H.exporter||(H.exporter={})).getDwgColorByIndex=V,K.toDWG=function(u,t){var l={fontSize:9},n=[],e={entities:[],header:{},tables:{}},h=[],B=(H.extendObject(l,t=void 0===t?{}:t),u&&u.data?u.data:{});if(!H.isModel(u))if(Array.isArray(u)){for(var r={paths:{}},i=0;i<u.length;i++)r.paths[i]=u[i];u=r}else u={paths:{p:u}};H.isModel(u)&&(d=u).exporterOptions&&H.extendObject(l,d.exporterOptions.toDWG);var D=1;if((u=H.cloneObject(u))&&u.models)for(var o in u.models)u.models[o].layer||(u.models[o].layer="_model_layer_"+D++);function a(t){if(t in K.colors)return{color:K.colors[t]}}var R=["color","colorIndex","layer","alpha","lineWidth"];function c(t){if(t){for(var e=[],n=B,r=0;r<t.length;r++){e.push(t[r]);var i=H.travel(u,e).result;if(i&&i.data)for(var n=n||{},o=0,a=R;o<a.length;o++){var s=a[o];void 0!==i.data[s]&&(n[s]=i.data[s])}}return n}}function p(t,e){t=t&&t.layer||e||"0";return n.indexOf(t)<0&&n.push(t),t}var s={};function f(t,e,n,r){return{type:"VERTEX",layer:p(null,e),x:H.round(t[0],l.accuracy),y:H.round(t[1],l.accuracy),bulge:n,arc:r}}function N(o){var e,t={},a=[0,0],n=[],s=(0<o.chain.links.length&&(t=o.chain.links[0].walkedPath.data,n=o.chain.links[0].walkedPath.route,a=o.chain.links[0].walkedPath.offset),t=__assign(__assign({},c(n)),t),{type:"POLYLINE",layer:p(null,o.layer),shape:o.chain.endless,vertices:[],data:t});return o.chain.links.forEach(function(t,e){t.walkedPath.pathContext.type===H.pathType.Arc&&(i=t.walkedPath.pathContext,r=H.round(Math.tan(H.angle.toRadians(H.angle.ofArcSpan(i))/4),l.accuracy),t.reversed&&(r*=-1),(n=__assign({},i)).center={x:H.round(i.origin[0]+a[0],l.accuracy),y:H.round(i.origin[1]+a[1],l.accuracy)});var n,r,i=t.endPoints[t.reversed?1:0];s.vertices.push(f(i,o.layer,r,n))}),o.chain.endless||(n=(n=o.chain.links[o.chain.links.length-1]).endPoints[n.reversed?0:1],s.vertices.push(f(n,o.layer))),t&&t.isHole&&0<o.chain.links.length&&(e=o.chain.links[0].walkedPath.modelContext)&&(-1==(n=h.findIndex(function(t){return t==e}))&&(h.push(e),n=h.length-1),n+=1,s.data=s.data||{},s.data.modelIndex=n),s}function U(t){var e=p(null,t.layer),n=a(e),r=H.point.middle(t.anchor);return{type:"TEXT",startPoint:f(r,null),endPoint:f(r,null),layer:e,textHeight:n&&n.fontSize||l.fontSize,text:t.text,halign:4,valign:0,rotation:H.angle.ofPointInDegrees(t.anchor.origin,t.anchor.end),data:t.data}}s[H.pathType.Line]=function(t,e,n,r,i,o){return r=__assign(__assign({},c(o)),r),{type:"LINE",layer:p(t,n),vertices:[{x:H.round(t.origin[0]+e[0],l.accuracy),y:H.round(t.origin[1]+e[1],l.accuracy)},{x:H.round(t.end[0]+e[0],l.accuracy),y:H.round(t.end[1]+e[1],l.accuracy)}],data:r}},s[H.pathType.Circle]=function(t,e,n,r,i,o){r=__assign(__assign({},c(o)),r);var a,o={type:"CIRCLE",layer:p(t,n),center:{x:H.round(t.origin[0]+e[0],l.accuracy),y:H.round(t.origin[1]+e[1],l.accuracy)},radius:H.round(t.radius,l.accuracy),data:r};return r&&r.isHole&&(a=i)&&(-1==(n=h.findIndex(function(t){return t==a}))&&(h.push(a),n=h.length-1),n+=1,o.data=o.data||{},o.data.modelIndex=n),o},s[H.pathType.Arc]=function(t,e,n,r,i,o){return r=__assign(__assign({},c(o)),r),{type:"ARC",layer:p(t,n),center:{x:H.round(t.origin[0]+e[0],l.accuracy),y:H.round(t.origin[1]+e[1],l.accuracy)},radius:H.round(t.radius,l.accuracy),startAngle:H.round(t.startAngle,l.accuracy),endAngle:H.round(t.endAngle,l.accuracy),data:r}},H.extendObject(t,l);var d,g,v,y=[],m=[];if(!0!==l.noUsePOLYLINE?H.model.findChains(d,function(t,e,n){t.forEach(function(t){t.endless&&1===t.links.length&&t.links[0].walkedPath.pathContext.type===H.pathType.Circle?m.push(t.links[0].walkedPath):y.push({chain:t,layer:n})}),m.push.apply(m,e)},{byLayers:!0,pointMatchingDistance:l.pointMatchingDistance}):H.model.walk(d,{onPath:function(t){m.push(t)}}),t=m,P=y,d=H.model.getAllCaptionsOffset(d),(g=e.entities).push.apply(g,P.map(N)),t.forEach(function(t){var e=s[t.pathContext.type];e&&(e=e(t.pathContext,t.offset,t.layer,t.data,t.modelContext,t.route),g.push(e))}),g.push.apply(g,d.map(U)),e.tables.lineType={lineTypes:{CONTINUOUS:{name:"CONTINUOUS",description:"______",patternLength:0}}},v={layers:{}},n.forEach(function(t){var e=a(t);e&&(v.layers[t]=(e=e.color,{name:t,color:e}))}),e.tables.layer=v,l.isGeoJson)return I=l,j={type:"FeatureCollection",features:[]},E=1,_={LINE:function(e){var t=[[e.vertices[0].x,e.vertices[0].y],[e.vertices[1].x,e.vertices[1].y]];e.data&&e.data.typename?t.forEach(function(t){S({type:"Feature",id:E++,properties:{layer:e.layer,color:O(e)},geometry:{type:"Point",coordinates:t}})}):S({type:"Feature",id:E++,properties:__assign({layer:e.layer,color:O(e)},e.data),geometry:{type:"LineString",coordinates:t}})},CIRCLE:function(e){var t=W(e.center,e.radius,I.dispersedPointCount||36),n=!1;if((n=e.data&&(e.data.isFill||e.data.isHole)?!0:n)&&e.data.isHole&&e.data.isHole&&e.data.modelIndex){var r=j.features.findIndex(function(t){return t.properties.modelIndex==e.data.modelIndex});if(0<=r)return void j.features[r].geometry.coordinates.push(t)}S({type:"Feature",id:E++,properties:{layer:e.layer,color:O(e),modelIndex:e.data.modelIndex},geometry:{type:n?"Polygon":"LineString",coordinates:n?[t]:t}})},ARC:function(e){var t=!1,n=t=e.data&&(e.data.isFill||e.data.isHole)?!0:t,n=(t&&e.data&&1==e.data.chord&&(n=!1),W(e.center,e.radius,I.dispersedPointCount||36,e.startAngle,e.endAngle,n));if(t&&e.data.isHole&&e.data.isHole&&e.data.modelIndex){var r=j.features.findIndex(function(t){return t.properties.modelIndex==e.data.modelIndex});if(0<=r)return void j.features[r].geometry.coordinates.push(n)}S({type:"Feature",id:E++,properties:{layer:e.layer,color:O(e),modelIndex:e.data.modelIndex},geometry:{type:t?"Polygon":"LineString",coordinates:t?[n]:n}})},POLYLINE:function(e){if(e.data&&e.data.typename)e.vertices.forEach(function(t){S({type:"Feature",id:E++,properties:__assign({layer:e.layer,color:O(e)},e.data),geometry:{type:"Point",coordinates:[t.x,t.y]}})});else{for(var t,n,r,i=[],o=0;o<e.vertices.length;o++)(a=e.vertices[o]).arc?(t=W(a.arc.center,a.arc.radius,I.dispersedPointCount||36,a.arc.startAngle,a.arc.endAngle),n=function(t,e){return Math.abs(t[0]-e[0])<1e-6&&Math.abs(t[1]-e[1])<1e-6},0<o&&(r=e.vertices[o-1].arcPoints,n(t[0],r[r.length-1])||(n(t[t.length-1],r[r.length-1])?t=t.reverse():n(t[0],r[0])?e.vertices[o-1].arcPoints=r.reverse():n(t[r.length-1],r[0])?(e.vertices[o-1].arcPoints=r.reverse(),t=t.reverse()):H.measure.pointDistance(r,t[0])>H.measure.pointDistance(r,t[t.length-1])&&(t=t.reverse()))),a.arcPoints=t):a.arcPoints=[a.x,a.y];for(var a,o=0;o<e.vertices.length;o++)(a=e.vertices[o]).arc?(i.push.apply(i,a.arcPoints),delete a.arcPoints,delete a.arc):i.push([e.vertices[o].x,e.vertices[o].y]);if(!e.shape||H.measure.isPointEqual(i[0],i[i.length-1],1e-6)||i.push(i[0]),e.shape&&e.data&&2<e.vertices.length&&(e.data.isFill||e.data.isHole)){if(e.data.isHole&&e.data.modelIndex){var s=j.features.findIndex(function(t){return t.properties.modelIndex==e.data.modelIndex});if(0<=s)return void j.features[s].geometry.coordinates.push(i)}S({type:"Feature",id:E++,properties:{layer:e.layer,color:O(e),modelIndex:e.data.modelIndex},geometry:{type:"Polygon",coordinates:[i]}})}else S({type:"Feature",id:E++,properties:{layer:e.layer,color:O(e)},geometry:{type:"LineString",coordinates:i}})}},TEXT:function(t){for(var e={id:E++,type:"Feature",properties:{symbol:!0,text:t.text,layer:t.layer,text_rotate:t.rotation,color:O(t)},geometry:{coordinates:[t.startPoint.x,t.startPoint.y],type:"Point"}},n=I.textZoom||0,r=1;r<=24;r++){var i=Math.pow(2,r-n)*t.textHeight*(I.textScale||1);200<i&&(i=200),e.properties["text_size_zoom"+r]=i}S(e)}},e.entities.forEach(function(t){var e=_[t.type];e&&e(t)}),j;P=e,C=l,T={entitys:[],layers:[],linetypes:[]},(M={}).LINE=function(t){var e,n,r,i;t.data&&t.data.typename?(e=(r=t).data,n=__assign({},e),r=r.vertices,"DbText"!=e.typename&&"DbMText"!=e.typename?q([[r[0].x,r[0].y],[r[1].x,r[1].y]],e):(i=H.measure.pointDistance([r[0].x,r[0].y],[r[1].x,r[1].y]),"DbText"==e.typename?(n.height=i,n.position=[r[0].x,r[0].y]):(n.textHeight=i,n.location=[r[0].x,r[0].y]),T.entitys.push(n))):z(__assign(__assign({color:t.color},t.data),{typename:"DbLine",start:[t.vertices[0].x,t.vertices[0].y],end:[t.vertices[1].x,t.vertices[1].y],layer:t.layer}))},M.CIRCLE=function(e){var t=!1;if(t=e.data&&(e.data.isFill||e.data.isHole)?!0:t){t=W(e.center,e.radius,C.dispersedPointCount||36);if(e.data.isHole&&e.data.modelIndex){var n=T.entitys.findIndex(function(t){return t.modelIndex==e.data.modelIndex});if(0<=n)return T.entitys[n].isMultiPolygon||(T.entitys[n].isMultiPolygon=!0,T.entitys[n].points=[T.entitys[n].points]),void T.entitys[n].points.push(t)}z(__assign(__assign({color:e.color,pattern:"SOLID"},e.data),{typename:"DbHatch",points:t,layer:e.layer}))}else z(__assign(__assign({color:e.color},e.data),{typename:"DbCircle",center:[e.center.x,e.center.y],radius:e.radius,layer:e.layer}))},M.ARC=function(e){var t=!1;if(t=e.data&&(e.data.isFill||e.data.isHole)?!0:t){t=!0,t=(e.data&&1==e.data.chord&&(t=!1),W(e.center,e.radius,C.dispersedPointCount||36,e.startAngle,e.endAngle,t));if(e.data.isHole&&e.data.modelIndex){var n=T.entitys.findIndex(function(t){return t.modelIndex==e.data.modelIndex});if(0<=n)return T.entitys[n].isMultiPolygon||(T.entitys[n].isMultiPolygon=!0,T.entitys[n].points=[T.entitys[n].points]),void T.entitys[n].points.push(t)}z(__assign(__assign({color:e.color,pattern:"SOLID"},e.data),{typename:"DbHatch",points:t,layer:e.layer}))}else z(__assign(__assign({color:e.color},e.data),{typename:"DbArc",center:[e.center.x,e.center.y],radius:e.radius,startAngle:e.startAngle*Math.PI/180,endAngle:e.endAngle*Math.PI/180,layer:e.layer}))},M.POLYLINE=function(e){if(e.data&&e.data.typename)q(e.vertices.map(function(t){return[t.x,t.y]}),e.data);else if(e.shape&&e.data&&2<e.vertices.length&&(e.data.isFill||e.data.isHole)){var t=e.vertices.map(function(t){return[t.x,t.y,t.bulge||0]});if(e.data.isHole&&e.data.modelIndex){var n=T.entitys.findIndex(function(t){return t.modelIndex==e.data.modelIndex});if(0<=n)return T.entitys[n].isMultiPolygon||(T.entitys[n].isMultiPolygon=!0,T.entitys[n].points=[T.entitys[n].points]),void T.entitys[n].points.push(t)}z(__assign(__assign({color:e.color,pattern:"SOLID"},e.data),{typename:"DbHatch",points:t,layer:e.layer}))}else z(__assign(__assign({color:e.color},e.data),{typename:"DbPolyline",points:e.vertices.map(function(t){return[t.x,t.y]}),bulge:e.vertices.map(function(t){return t.bulge||0}),closed:!!e.shape,layer:e.layer}))},M.TEXT=function(t){z(__assign(__assign({color:t.color,horizontalMode:4,verticalMode:0},t.data),{typename:"DbText",text:t.text,position:[t.startPoint.x,t.startPoint.y],height:t.textHeight,rotation:t.rotation,layer:t.layer}))};var x,w=P.tables.lineType;for(x in w.lineTypes){var b=w.lineTypes[x];T.linetypes.push({name:b.name,comments:b.description,style:[{method:"patternLength",parameter:b.patternLength}]})}var A,P,C,T,M,I,j,_,E,k=P.tables.layer;for(A in k.layers){var L=k.layers[A];T.layers.push({name:L.name,color:L.color})}return P.entities.forEach(function(t){var e=M[t.type];e&&e(t)}),T;function z(t){T.entitys.push(t)}function q(t,e){if(e&&e.pointAttr){if(e.pointAttr.length<t.length&&(t.length=e.pointAttr.length),e.points&&e.points.length==t.length){for(var n=0,r=0,i=[],o=[],a=0;a<e.points.length-1;a++){var s=H.measure.pointDistance(e.points[a],e.points[a+1]),u=H.measure.pointDistance(t[a],t[a+1]);i.push(s),o.push(u),n+=s,r+=u}for(var i=i.map(function(t){return t/n}),o=o.map(function(t){return t/r}),l=!0,a=0;a<i.length;a++)if(1e-5<Math.abs(i[a]-o[a])){l=!1;break}l||(t=t.reverse())}for(var h=__assign({},e),a=0;a<t.length;a++)h[e.pointAttr[a]]=t[a];delete h.points,delete h.pointAttr,T.entitys.push(h)}}function S(t){j.features.push(t)}function F(t){return"string"==typeof t?t:"#"+(t=6!=(t=t.toString(16)).length?"0".repeat(6-t.length)+t:t)}function O(t){return t.color?F(t.color):t.data?t.data.colorIndex?V(t.data.colorIndex,!0):t.data.color?F(t.data.color):void 0:void 0}},W=function(t,e,n,r,i,o){void 0===o&&(o=!1);var a=t,s=[];r=p(r=void 0===r?0:r,0,360,!0),(i=p(i=void 0===i?360:i,0,360))<r&&(i+=360);for(var u=(i-r)/(n=void 0===n?360:n),l=0;l<n+1;l++){var h=Math.PI/180*(r+l*u),c=a.x+e*Math.cos(h),h=a.y+e*Math.sin(h);s.push([c,h])}return o&&i-r!=360&&s.push([a.x,a.y]),s}}(vjgeo=vjgeo||{}),!function(s){var t,e;t=s.solvers||(s.solvers={}),e=Math.sqrt(3)/2,t.equilateralAltitude=function(t){return t*e},t.equilateralSide=function(t){return t/e},t.solveTriangleSSS=function(t,e,n){return s.angle.toDegrees(Math.acos((e*e+n*n-t*t)/(2*e*n)))},t.solveTriangleASA=function(t,e,n){return n=180-t-n,e*Math.sin(s.angle.toRadians(t))/Math.sin(s.angle.toRadians(n))},t.circleTangentAngles=function(t,e,n){void 0===n&&(n=!1);var r=new s.paths.Line(t.origin,e.origin),i=s.measure.pointDistance(t.origin,e.origin);if(t.radius>=i+e.radius||e.radius>=i+t.radius)return null;if(n&&t.radius+e.radius>=i)return null;if(n||0!=s.round(t.radius-e.radius)){var o=i/2,o=new s.paths.Circle([o,0],o),i=new s.paths.Circle(t.radius>e.radius?[0,0]:[i,0],n?t.radius+e.radius:Math.abs(t.radius-e.radius)),n=s.path.intersection(i,o);if(!n||!n.path1Angles)return null;o=n.path1Angles}else o=[90,270];var a=s.angle.ofLineInDegrees(r);return o.map(function(t){return s.angle.noRevolutions(t+a)})}}(vjgeo=vjgeo||{}),!function(c){var l,i;function p(t,e,n,r){n=n?[e.path2Offset,e.path1Offset]:[e.path1Offset,e.path2Offset];l.moveTemporary(t,n,r)}function r(t){var e=t.path1Angles;return t.path2Angles?t.path1Angles=t.path2Angles:delete t.path1Angles,e&&(t.path2Angles=e),t}function f(t,e){for(var n=[],r=0;r<t.length;r++)n.push(c.point.fromAngleOnCircle(t[r],e));return n}function d(t,e,n){if(!t)return null;for(var r=[],i=0;i<t.length;i++)c.measure.isBetweenArcAngles(t[i],e,n.excludeTangents)&&r.push(t[i]);return 0==r.length?null:r}function o(t,e,n){var r=c.round(e.radius);if(e.radius<=0)return null;var i=new c.paths.Line(c.point.subtract(t.origin,e.origin),c.point.subtract(t.end,e.origin)),e=c.angle.ofLineInDegrees(t),o=180<=e?e-360:e;function a(t){return c.round(c.angle.noRevolutions(t+o))}l.rotate(i,-o,c.point.zero());t=c.round(i.origin[1]),e=Math.abs(t);if(r<e)return null;var s=[];if(e==r){if(n.excludeTangents)return null;s.push(a(0<t?90:270))}else{function u(t,e){c.measure.isBetween(c.round(t),c.round(i.origin[0]),c.round(i.end[0]),n.excludeTangents)&&s.push(a(e))}e=Math.asin(t/r),t=c.angle.toDegrees(e),e=Math.cos(e)*r;u(-e,180-t),u(e,t)}return 0<s.length?s:null}function g(t,e,n){if(t.radius<=0||e.radius<=0)return null;if(t.radius==e.radius&&c.measure.isPointEqual(t.origin,e.origin,1e-4))return n.out_AreOverlapped=!0,null;c.point.subtract(c.point.zero(),t.origin);var r=new c.paths.Circle(c.point.zero(),t.radius),t=new c.paths.Circle(c.point.subtract(e.origin,t.origin),e.radius),i=c.angle.ofPointInDegrees(c.point.zero(),t.origin);function o(t){return c.angle.noRevolutions(t+i)}l.rotate(t,-i,c.point.zero());e=t.origin[0];return 0==c.round(t.radius-e-r.radius)?n.excludeTangents?null:[[o(180)],[o(180)]]:0==c.round(t.radius+e-r.radius)?n.excludeTangents?null:[[o(0)],[o(0)]]:0==c.round(e-t.radius-r.radius)?n.excludeTangents?null:[[o(0)],[o(180)]]:c.round(e-t.radius)>r.radius||c.round(e+t.radius)<r.radius||c.round(e-t.radius)<-r.radius?null:(n=c.solvers.solveTriangleSSS(t.radius,r.radius,e),r=c.solvers.solveTriangleSSS(r.radius,e,t.radius),[a(n),a(180-r)]);function a(t){return[o(t),o(c.angle.mirror(t,!1,!0))]}}l=c.path||(c.path={}),(i={})[c.pathType.Arc]={},i[c.pathType.Circle]={},i[c.pathType.Line]={},i[c.pathType.Arc][c.pathType.Arc]=function(s,u,l,t){var h=null;return p([s,u],l,t,function(){var t=g(s,u,l);if(t){var e=d(t[0],s,l),n=d(t[1],u,l);if(e&&n)if(1===e.length||1===n.length)for(var r=0;r<e.length;r++)for(var i=0;i<n.length;i++){var o=c.point.fromAngleOnCircle(e[r],s),a=c.point.fromAngleOnCircle(n[i],u);if(c.measure.isPointEqual(o,a,1e-4))return void(h={intersectionPoints:[o],path1Angles:[e[r]],path2Angles:[n[i]]})}else h={intersectionPoints:f(e,s),path1Angles:e,path2Angles:n}}else l.out_AreOverlapped&&(l.out_AreOverlapped=c.measure.isArcSpanOverlapping(s,u,l.excludeTangents))}),h},i[c.pathType.Arc][c.pathType.Circle]=function(r,i,o,t){var a=null;return p([r,i],o,t,function(){var t,e,n=g(r,i,o);n&&(t=d(n[0],r,o))&&(n=2==t.length?n[1]:(e=function(t,e){for(var n=2;n--;)if(t[n]===e)return n}(n[0],t[0]),[n[1][e]]),a={intersectionPoints:f(t,r),path1Angles:t,path2Angles:n})}),a},i[c.pathType.Arc][c.pathType.Line]=function(e,n,r,t){var i=null;return p([e,n],r,t,function(){var t=o(n,e,r);t&&(t=d(t,e,r))&&(i={intersectionPoints:f(t,e),path1Angles:t})}),i},i[c.pathType.Circle][c.pathType.Arc]=function(t,e,n){e=i[c.pathType.Arc][c.pathType.Circle](e,t,n,!0);return e?r(e):null},i[c.pathType.Circle][c.pathType.Circle]=function(e,n,r,t){var i=null;return p([e,n],r,t,function(){var t=g(e,n,r);t&&(i={intersectionPoints:f(t[0],e),path1Angles:t[0],path2Angles:t[1]})}),i},i[c.pathType.Circle][c.pathType.Line]=function(e,n,r,t){var i=null;return p([e,n],r,t,function(){var t=o(n,e,r);t&&(i={intersectionPoints:f(t,e),path1Angles:t})}),i},i[c.pathType.Line][c.pathType.Arc]=function(t,e,n){e=i[c.pathType.Arc][c.pathType.Line](e,t,n,!0);return e?r(e):null},i[c.pathType.Line][c.pathType.Circle]=function(t,e,n){e=i[c.pathType.Circle][c.pathType.Line](e,t,n,!0);return e?r(e):null},i[c.pathType.Line][c.pathType.Line]=function(e,n,r,t){var i=null;return p([e,n],r,t,function(){var t=c.point.fromSlopeIntersection(e,n,r);t&&c.measure.isBetweenPoints(t,e,r.excludeTangents)&&c.measure.isBetweenPoints(t,n,r.excludeTangents)&&(i={intersectionPoints:[t]})}),i},l.intersection=function(t,e,n){if(void 0===n&&(n={}),t&&e){var r=i[t.type][e.type];if(r)return r(t,e,n)}return null}}(vjgeo=vjgeo||{}),!function(w){var b,o,A,P;function e(t){var e=w.point.fromPathEnds(t);if(e){function n(t){return{point:e[t],propertyName:r[t]}}var r,i=o[t.type];if(i)return r=i(t),[n(0),n(1)]}return null}function C(n,r){var i=e(n),o=e(r),a=null;function s(t,e,n){return{path:t,isStart:0==n,propertyName:e[n].propertyName,point:e[n].point,oppositePoint:e[1-n].point}}function t(t,e){return w.measure.isPointEqual(i[t].point,o[e].point,1e-4)&&(a=[s(n,i,t),s(r,o,e)])}return t(0,0)||t(0,1)||t(1,0)||t(1,1),a}function T(t,e,n){for(var r=new w.paths.Circle(e,t),i=0;i<2;i++){var o=b.intersection(r,n[i].path);if(!o)return;if(n[i].shardPoint=o.intersectionPoints[0],w.measure.isPointEqual(n[i].point,o.intersectionPoints[0],1e-4)){if(!(1<o.intersectionPoints.length))return;n[i].shardPoint=o.intersectionPoints[1]}}return 1}function M(t,e){var n,r=!1;return e&&(n=t.path[t.propertyName],e.clipPath(),0<w.measure.pathLength(t.path)&&(r=!0),t.path[t.propertyName]=n),r}b=w.path||(w.path={}),(o={})[w.pathType.Arc]=function(t){return["startAngle","endAngle"]},o[w.pathType.Line]=function(t){return["origin","end"]},(A={})[w.pathType.Arc]=function(t,e,n,r,i){var o=t.radius,a=(a=t,r=r,[a=b.clone(a),b.breakAtPoint(a,r)][i?0:1]);return!a||(w.measure.isArcConcaveTowardsPoint(a,n)?o-=e:o+=e,w.round(o)<=0)?null:new w.paths.Arc(t.origin,o,t.startAngle,t.endAngle)},A[w.pathType.Line]=function(t,e,n,r,i){return new w.paths.Parallel(t,e,n)},(P={})[w.pathType.Arc]=function(t,e,n,r){var i=new w.paths.Line(t.origin,r),o=w.angle.ofLineInDegrees(i),i=o;return w.measure.isArcConcaveTowardsPoint(t,r)||(i+=180),{filletAngle:w.angle.noRevolutions(i),clipPath:function(){t[e]=o}}},P[w.pathType.Line]=function(t,e,n,r){var i=new w.paths.Line([0,0],[0,1]),o=w.angle.ofLineInDegrees(t),a=(b.rotate(i,o,[0,0]),b.moveRelative(i,r),w.point.fromSlopeIntersection(t,i));return a?{filletAngle:w.angle.ofPointInDegrees(r,a),clipPath:function(){t[e]=a}}:null},b.dogbone=function(t,e,n,r){if(w.isPathLine(t)&&w.isPathLine(e)&&n&&0<n){var i={pointMatchingDistance:.005},o=(w.extendObject(i,r),C(t,e));if(o){var i=function(t){for(var e=0,n=[],r=0;r<t.length;r++){var i=w.measure.pathLength(t[r]);n.push(i),e+=i}return n[0]/e}([t,e]),r=new w.paths.Line(o[0].oppositePoint,o[1].oppositePoint),t=w.point.middle(r,i),e=w.angle.ofPointInDegrees(o[0].point,t),a=w.point.add(o[0].point,w.point.fromPolar(w.angle.toRadians(e),n));if(!T(n,a,o))return null;for(var s=[],u=0;u<2;u++){var l=function(t,e){return e={filletAngle:w.angle.ofPointInDegrees(e,t.shardPoint),clipPath:function(){t.path[t.propertyName]=t.shardPoint}},e=M(t,e)?e:null}(o[u],a);if(!l)return null;s.push(l)}r=new w.paths.Arc(a,n,s[0].filletAngle,s[1].filletAngle);return w.round(w.angle.noRevolutions(w.angle.ofArcMiddle(r)))==w.round(e)&&(r.startAngle=s[1].filletAngle,r.endAngle=s[0].filletAngle),s[0].clipPath(),s[1].clipPath(),r}}return null},b.fillet=function(t,e,n,r){if(t&&e&&n&&0<n){var i={pointMatchingDistance:.005},o=(w.extendObject(i,r),C(t,e));if(o){if(!T(n,o[0].point,o))return null;for(var a=[],s=0;s<2;s++){var u=o[1-s].shardPoint;if(!u)return null;v=o[s],y=n,u=u,x=m=void 0,m=null,x=A[v.path.type];x=m=x?x(v.path,y,u,v.shardPoint,v.isStart):m;a.push(x)}i=b.intersection(a[0],a[1]);if(i){for(var l=1==i.intersectionPoints.length?i.intersectionPoints[0]:w.point.closest(o[0].point,i.intersectionPoints),h=[],s=0;s<2;s++){c=o[s],p=n,f=l,g=d=void 0,d=null,g=P[c.path.type];g=d=M(c,d=g?g(c.path,c.propertyName,p,f):d)?d:null;if(!g)return null;h.push(g)}return 0==w.round(h[0].filletAngle-h[1].filletAngle)?null:(r=new w.paths.Arc(l,n,h[0].filletAngle,h[1].filletAngle),180==(t=w.angle.ofArcSpan(r))?null:(180<t&&(r.startAngle=h[1].filletAngle,r.endAngle=h[0].filletAngle),h[0].clipPath(),h[1].clipPath(),r))}}}var c,p,f,d,g,v,y,m,x;return null}}(vjgeo=vjgeo||{}),!function(h){var t;function n(o,t,a){var s={paths:{}},u=0,l=t.links;function e(e,n){var r=l[e].walkedPath,i=l[n].walkedPath;r.modelContext===i.modelContext&&r.modelContext.type==h.models.BezierCurve.typeName||h.path.moveTemporary([r.pathContext,i.pathContext],[r.offset,i.offset],function(){if(h.isObject(a)){var t=h.angle.ofChainLinkJoint(l[e],l[n]);if(0===h.round(t))return;t=0<t?a.left:a.right}else t=a;!t||t<0||(t=o?h.path.fillet(r.pathContext,i.pathContext,t):h.path.dogbone(r.pathContext,i.pathContext,t))&&(s.paths["fillet"+u]=t,u++)})}for(var n=1;n<l.length;n++)e(n-1,n);return t.endless&&e(n-1,0),u?s:null}(t=h.chain||(h.chain={})).dogbone=function(t,e){return n(!1,t,e)},t.fillet=function(t,e){return n(!0,t,e)}}(vjgeo=vjgeo||{}),!function(t){(t=t.kit||(t.kit={})).construct=function(t,e){function n(){return t.apply(this,e)}return n.prototype=t.prototype,new n},t.getParameterValues=function(t){var e=[],n=t.metaParameters;if(n)for(var r=0;r<n.length;r++){var i=n[r].value;Array.isArray(i)&&(i=i[0]),e.push(i)}return e}}(vjgeo=vjgeo||{}),!function(m){var x;function w(a,i,o){function s(t,e,n){for(;t;){e.links.push(t),e.pathLength+=t.pathLength;var r=t.reversed?0:1,r=t.endPoints[r],r=a.getElementAtPoint(r);if(!r||0===r.valueIds.length)break;var i=r.valueIds.map(function(t){return a.values[t]}),o=(i=i,o=t.walkedPath.pathContext,i[0].walkedPath.pathContext===o?i[1]:i[0]);if(r.valueIds.splice(0,2),!o)break;if(o.walkedPath.pathContext===n.walkedPath.pathContext){1<e.links.length&&(e.endless=!0);break}t=o}var o}a.forEachPoint(function(t,e,n,r){0<r.valueIds.length&&(s(e[0],r={links:[],pathLength:0},e[0]),r.endless?i(r,!1):(r.links.reverse(),e=r.links[0],r.links.map(function(t){t.reversed=!t.reversed}),r.pathLength-=r.links[r.links.length-1].pathLength,s(r.links.pop(),r,e),1<r.links.length?i(r,!0):o(r.links[0].walkedPath)))})}function b(t,e){e=e===t.reversed?1:0;return t.endPoints[e]}function e(t){for(var e,r,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];switch(n.length){case 1:"function"==typeof n[0]?r=n[0]:e=n[0];break;case 2:r=n[0],e=n[1]}var o,a,s,u={pointMatchingDistance:1e-6},l=(m.extendObject(u,e),{}),h={},c={},p={onPath:function(t){var e=u.byLayers?t.layer:"",n=(l[e]||(l[e]=new m.PointGraph),l[e]),r=m.measure.pathLength(t.pathContext);if(t.pathContext.type===m.pathType.Circle||t.pathContext.type===m.pathType.Arc&&0===m.round(m.angle.ofArcSpan(t.pathContext)-360)||t.pathContext.type===m.pathType.BezierSeed&&m.measure.isPointEqual(t.pathContext.origin,t.pathContext.end,u.pointMatchingDistance)){var i={links:[{walkedPath:t,reversed:null,endPoints:null,pathLength:r}],endless:!0,pathLength:r};h[e]||(h[e]=[]),h[e].push(i)}else if(r<u.pointMatchingDistance/5)c[e]||(c[e]=[]),c[e].push(t);else for(var o=m.point.fromPathEnds(t.pathContext,t.offset),a=0;a<2;a++){var s=n.insertValue({walkedPath:t,endPoints:o,reversed:0!=a,pathLength:r});n.insertValueIdAtPoint(s,o[a])}}};function f(t){t.childModel.type===m.models.BezierCurve.typeName&&a.push(t)}u.shallow&&(p.beforeChildWalk=function(){return!1}),u.unifyBeziers&&(a=[],s={beforeChildWalk:function(t){return f(t),!0}},f({childId:"",childModel:o=t,layer:o.layer,data:o.data,offset:o.origin,parentModel:null,route:[],routeKey:""}),x.walk(o,s),A(o=a,!0)),x.walk(t,p);function d(n){var t=l[n];t.mergeNearestSinglePoints(u.pointMatchingDistance),g=[],h[n]||(h[n]=[]),w(t,function(t,e){t.endless=e?m.measure.isPointEqual(b(t.links[0],!0),b(t.links[t.links.length-1],!1),u.pointMatchingDistance):!!t.endless,h[n].push(t)},function(t){g.push(t)}),h[n].sort(function(t,e){return e.pathLength-t.pathLength}),u.contain&&(v=m.isObject(u.contain)?u.contain:{alternateDirection:!1},v=function(e,t){var o=e.map(function(t){return m.chain.toNewModel(t)}),a=[],n=(e.forEach(function(n,r){var t,i;n.endless&&(t=n.links[0].walkedPath,i=m.path.clone(t.pathContext,t.offset),e.forEach(function(t,e){n!==t&&t.endless&&m.measure.isPointInsideModel(m.point.middle(i),o[e])&&(a[r]=t)}))}),[]);e.forEach(function(t,e){e=a[e];(e?(e.contains||(e.contains=[]),e.contains):n).push(t)}),t.alternateDirection&&function r(t,i){t.forEach(function(t,e){var n=m.measure.isChainClockwise(t);null!==n&&(!n&&i||n&&!i)&&m.chain.reverse(t),t.contains&&r(t.contains,!i)})}(n,!0);return n}(h[n],v),h[n]=v),r&&r(h[n],g,n,c[n])}var g,v,y;for(y in l)d(y);return o&&A(o,!1),u.byLayers?h:h[""]}function A(t,a){var s="tempPaths",u="tempLayer";t.forEach(function(t){var e=t.childModel;if(a){null!=t.layer&&""!==t.layer&&(e[u]=e.layer,e.layer=t.layer),null!=t.data&&(e[u]=e.data,e.data=t.data);var n,r=m.models.BezierCurve.getBezierSeeds(e,{byLayers:!0});for(n in r){var i,o=r[n];0<o.length&&(e[s]=e.paths,i={},o.forEach(function(t,e){t.layer=n,i["seed_"+e]=t}),e.paths=i)}}else s in e&&(e.paths=e[s],delete e[s]),u in e&&(null==e[u]?delete e.layer:e.layer=e[u],delete e[u])})}(x=m.model||(m.model={})).findSingleChain=function(t){var r=null;return e(t,function(t,e,n){r=t[0]},{byLayers:!1}),r},x.findChains=e}(vjgeo=vjgeo||{}),!function(f){var t;function i(t,e){if(void 0===e&&(e=1),t.endless){for(var n=Math.abs(e),r=0;r<n;r++)e<0?t.links.push(t.links.shift()):t.links.unshift(t.links.pop());return t}}function d(t,e){!t||e.length<2||f.measure.isPointEqual(e[0],e[e.length-1],1e-5)&&e.pop()}(t=f.chain||(f.chain={})).cycle=i,t.reverse=function(t){return t.links.reverse(),t.links.forEach(function(t){return t.reversed=!t.reversed}),t},t.startAt=function(t,e){if(t.endless){for(var n=-1,r=0;r<t.links.length;r++)if(t.links[r].walkedPath.routeKey==e){n=r;break}return 0<n&&i(t,n),t}},t.toNewModel=function(t,e){void 0===e&&(e=!1);for(var n={paths:{}},r=0;r<t.links.length;r++){var i,o,a=t.links[r].walkedPath;a.pathContext.type===f.pathType.BezierSeed?(e&&delete a.modelContext.paths[a.pathId],n.models||(n.models={}),o=f.model.getSimilarModelId(n,a.pathId),n.models[o]=f.model.moveRelative(new f.models.BezierCurve(a.pathContext),a.offset)):(e?(i=a.pathContext,delete a.modelContext.paths[a.pathId]):i=f.path.clone(a.pathContext),o=f.model.getSimilarPathId(n,a.pathId),n.paths[o]=f.path.moveRelative(i,a.offset))}return n},t.toPoints=function(t,e,n){var r,i=[],o=0,a=0;Array.isArray(e)&&(r=e);for(var s=0;s<t.links.length;s++){for(var u=t.links[s],l=u.walkedPath,h=u.pathLength;0<f.round(h-a);){var c,p=a/h;if(u.reversed&&(p=1-p),i.push(f.point.add(f.point.middle(l.pathContext,p),l.offset)),n&&n<=i.length)return i;if(r){if(c=r[o],++o>r.length)return i}else c=e;a+=c}a-=h}return d(t.endless,i),i},t.toKeyPoints=function(t,e){for(var n=[],r=0;r<t.links.length;r++){var i=t.links[r],o=i.walkedPath,a=f.path.toKeyPoints(o.pathContext,e);0<a.length&&(i.reversed&&a.reverse(),0<r&&a.shift(),i=a.map(function(t){return f.point.add(t,o.offset)}),n.push.apply(n,i))}return d(t.endless,n),n}}(vjgeo=vjgeo||{}),!function(o){var t,i;function e(t,e){this.modelContext=t,this.options=e,this.pointMap=new o.PointGraph,this.list=[],this.removed=[],this.ordinals={},this.load()}t=o.model||(o.model={}),e.prototype.load=function(){var i=this;t.walk(this.modelContext,{onPath:function(t){var e=o.point.fromPathEnds(t.pathContext,t.offset);if(e){t.endPoints=e;for(var n=i.pointMap.insertValue(t),r=2;r--;)i.pointMap.insertValueIdAtPoint(n,e[r])}}}),this.options.pointMatchingDistance&&this.pointMap.mergePoints(this.options.pointMatchingDistance)},e.prototype.findDeadEnds=function(){for(var i=this,o=0,t=(this.pointMap.forEachPoint(function(t,e,n,r){i.ordinals[n]=o++,i.list.push(r)}),o=0,this);o<this.list.length;)!function(){var n=t.list[o];1===n.valueIds.length?t.removePath(n,n.valueIds[0],o):t.options.keep&&n.valueIds.length%2&&n.valueIds.forEach(function(t){var e=i.pointMap.values[t];i.options.keep(e)||i.removePath(n,t,o)}),o++}();return this.removed},e.prototype.removePath=function(t,e,n){var r=this.pointMap.values[e],i=this.getOtherPointId(r.endPoints,t.pointId),i=this.pointMap.index[i];this.removed.push(r),this.removeValue(t,e),this.removeValue(i,e),0<i.valueIds.length&&this.appendQueue(i,n)},e.prototype.removeValue=function(t,e){e=t.valueIds.indexOf(e);0<=e&&t.valueIds.splice(e,1)},e.prototype.appendQueue=function(t,e){var n=this.ordinals[t.pointId];n<e&&(this.list[n]=null,this.list.push(t),this.ordinals[t.pointId]=this.list.length)},e.prototype.getOtherPointId=function(t,e){for(var n=0;n<t.length;n++){var r=this.pointMap.getIdOfPoint(t[n]);if(e!==r)return r}},i=e,t.removeDeadEnds=function(t,e,n,r){return e=new i(t,{pointMatchingDistance:e||.005,keep:n}),(n=e.findDeadEnds()).length<e.pointMap.values.length&&n.forEach(function(t){r(t,"dead end"),delete t.modelContext.paths[t.pathId]}),t}}(vjgeo=vjgeo||{}),!function(v){var y;(y=v.importer||(v.importer={})).fromSVGPathData=function(t,h){void 0===h&&(h={});var e={};function c(t){e.paths||(e.paths={}),e.paths["p_"+ ++s]=t}function p(t){e.models||(e.models={}),e.models["p_"+ ++s]=t}function f(t,e,n){void 0===n&&(n=t.from),(e=void 0===e?0:e)<0&&(e+=t.data.length);e=v.point.mirror([t.data[0+e],t.data[1+e]],!1,!0);return t.absolute?e:v.point.add(e,n)}function r(t,e){return v.measure.isPointEqual(t.from,e)||c(new v.paths.Line(t.from,e)),e}for(var n,i={M:function(t){if(o=f(t),2<t.data.length){t.from=o;for(var e=2;e<t.data.length;e+=2)t.from=r(t,f(t,e));return t.from}return o},Z:function(t){return r(t,o)},H:function(t){var e=v.point.clone(t.from);return t.absolute?e[0]=t.data[0]:e[0]+=t.data[0],r(t,e)},V:function(t){var e=v.point.clone(t.from);return t.absolute?e[1]=-t.data[0]:e[1]-=t.data[0],r(t,e)},L:function(t){for(var e,n=0;n<t.data.length;n+=2)e=f(t,n),t.from=r(t,e);return t.from},A:function(t){for(var e,n,r,i,o,a,s,u,l=0;l<t.data.length;l+=7)e=t.data[0+l],n=t.data[1+l],r=t.data[2+l],s=1===t.data[3+l],u=1===t.data[4+l],i=f(t,5+l),o=e!==n,a=new v.paths.Line(t.from,v.point.rotate(i,r,t.from)),o&&(a=v.path.distort(a,1,e/n)),a=new v.paths.Arc(a.origin,a.end,e,s,u),o?(e<a.radius&&(e*=s=a.radius/e,n*=s),u=new v.models.EllipticArc(a,1,n/e,h.bezierAccuracy),v.model.rotate(u,-r,t.from),p(u)):(v.path.rotate(a,-r,t.from),c(a)),t.from=i;return i},C:function(t){for(var e,n,r,i=t.from,o=0;o<t.data.length;o+=6)t.from=i,e=f(t,0+o,i),n=f(t,2+o,i),r=f(t,4+o,i),p(new v.models.BezierCurve(i,e,n,r,h.bezierAccuracy)),i=r;return r},S:function(t){for(var e,n,r,i=t.from,o="C"===t.prev.command||"S"===t.prev.command?f(t.prev,-4):t.from,a=0;a<t.data.length;a+=4)t.from=i,e=v.point.rotate(o,180,i),n=f(t,0+a),r=f(t,2+a),p(new v.models.BezierCurve(i,e,n,r,h.bezierAccuracy)),i=r,o=n;return r},Q:function(t){for(var e,n,r=t.from,i=0;i<t.data.length;i+=4)t.from=r,e=f(t,0+i),n=f(t,2+i),p(new v.models.BezierCurve(r,e,n,h.bezierAccuracy)),r=n;return n},T:function(t){for(var e,n="Q"===t.prev.command?(i=f(t.prev,-4),v.point.rotate(i,180,t.from)):"T"===t.prev.command?(t.prev.absolute=!0,f(t.prev,-2)):t.from,r=0;r<t.data.length;r+=2)e=f(t,0+r),p(new v.models.BezierCurve(t.from,n,e,h.bezierAccuracy)),t.from=e,n=v.point.rotate(n,180,t.from);var i=v.point.mirror(n,!1,!0);return t.data.push.apply(t.data,i),e}},o=[0,0],a=[0,0],s=0,u=/([achlmqstvz])([0-9e\.,\+-\s]*)/gi;null!==(d=u.exec(t));){d.index===u.lastIndex&&u.lastIndex++;var l=d[1],d=d[2],g={command:l.toUpperCase(),data:[],from:a,prev:n},l=(l===g.command&&(g.absolute=!0),g.data=y.parseNumericList(d),i[g.command]);l&&(a=l(g)),n=g}return e}}(vjgeo=vjgeo||{}),!function(g){var t,u;function v(t,r){var e,n,i=new g.measure.Atlas(t),o=g.measure.modelExtents(t,i),a=o.high[1],s=[],u={},t=(g.model.walk(t,{beforeChildWalk:function(t){var e=t.childModel,n=i.modelMap[t.routeKey];if(n)return n=g.measure.augment(n),g.model.originate(e,[n.center[0],a*r]),n=e.origin[0]-o.low[0],e=(u[t.childId]=n)/o.width,s.push({childId:t.childId,xRatio:e}),!1}}),s.sort(function(t,e){return t.xRatio-e.xRatio}),s[0]),l=s[s.length-1];return 1<s.length&&(e=t.xRatio,n=l.xRatio-e,s.forEach(function(t){return t.xRatio=(t.xRatio-e)/n})),{cpa:s,firstX:u[t.childId],lastX:o.width-u[l.childId]}}function y(n,t,r){t.forEach(function(t){var e=n.models[t.childId];e.origin=t.origin,r&&g.model.rotate(e,t.angle,t.origin)})}function r(t,e,n,r){for(var i,o={},a=(g.isModel(e)?(s=g.measure.modelExtents,i=o.models={},g.model):(s=g.measure.pathExtents,i=o.paths={},g.path)).move,s=s(e),u=s.high[t]-s.low[t],l=0;l<n;l++){var h=[0,0];h[t]=l*(u+r),i[l]=a(g.cloneObject(e),h)}return o}function i(t,e,n){return r(1,t,e,n=void 0===n?0:n)}function l(t,e,n){return r(0,t,e,n=void 0===n?0:n)}function o(t){return Array.isArray(t)?t:[t,t]}function a(t,e,n,r){for(var i=g.isModel(t)?t:{paths:{0:t}},o=r(i),a={models:{}},s=0;s<n;s++){var u=s%2;a.models[s]=g.model.move(l(t,e+u,o.xMargin),[u*o.x,s*o.y])}return a}t=g.layout||(g.layout={}),(u={})[g.pathType.Arc]=function(e,n,t){var r=g.angle.ofArcSpan(e);t.forEach(function(t){return t.angle=n?e.endAngle-t.xRatio*r-90:e.startAngle+t.xRatio*r+90})},u[g.pathType.Line]=function(t,e,n){var r=g.angle.ofLineInDegrees(t);n.forEach(function(t){return t.angle=r})},t.childrenOnPath=function(t,e,n,r,i,o){void 0===r&&(r=!1),void 0===i&&(i=!1),void 0===o&&(o=!0);var a=(n=v(t,n=void 0===n?0:n)).cpa,s=e;return i&&1<a.length&&(i=g.measure.pathLength(e),n.firstX+n.lastX<i)&&(s=g.path.clone(e),g.path.alterLength(s,-n.firstX,!0),g.path.alterLength(s,-n.lastX)),a.forEach(function(t){return t.origin=g.point.middle(s,r?1-t.xRatio:t.xRatio)}),(i=u[s.type])&&i(s,r,a),y(t,a,o),t},t.childrenOnChain=function(t,e,n,r,i,o){void 0===r&&(r=!1),void 0===i&&(i=!1),void 0===o&&(o=!0);var a,s,u,l,h,c,p=(n=v(t,n=void 0===n?0:n)).cpa,f=e.pathLength,d=(1<p.length?(i&&(f-=n.firstX+n.lastX),s=p.map(function(t){return(r?1-t.xRatio:t.xRatio)*f}),r&&s.reverse(),u=s.map(function(t,e){return Math.abs(t-(0==e?0:s[e-1]))}),i?u[0]+=r?n.lastX:n.firstX:u.shift(),(a=g.chain.toPoints(e,u)).length<p.length&&(n=e.links[e.links.length-1],a.push(n.endPoints[n.reversed?0:1])),i&&a.shift()):((a=g.chain.toPoints(e,.5*f)).length=2,a.push(e.links[e.links.length-1].endPoints[e.links[e.links.length-1].reversed?0:1])),r&&a.reverse(),l=a,h=-90,c=new g.paths.Arc([0,0],0,0,0),l.map(function(t,e){t=0===e?g.angle.ofPointInDegrees(t,l[e+1])+90:e===l.length-1?g.angle.ofPointInDegrees(l[e-1],t)+90:(c.origin=t,c.startAngle=g.angle.ofPointInDegrees(t,l[e+1]),c.endAngle=g.angle.ofPointInDegrees(t,l[e-1]),g.angle.ofArcMiddle(c));return t+h}));return 1<p.length?p.forEach(function(t,e){t.angle=d[e],t.origin=a[e]}):(p[0].angle=d[1],p[0].origin=a[1]),y(t,p,o),t},t.cloneToRadial=function(t,e,n,r){for(var i,o={},a=(g.isModel(t)?(i=o.models={},g.model):(i=o.paths={},g.path)).rotate,s=0;s<e;s++)i[s]=a(g.cloneObject(t),s*n,r);return o},t.cloneToColumn=i,t.cloneToRow=l,t.cloneToGrid=function(t,e,n,r){return r=o(r),i(l(t,e,r[0]),n,r[1])},t.cloneToBrick=function(t,e,n,r){var i=o(r);return a(t,e,n,function(t){var t=g.measure.modelExtents(t),e=i[0]||0,n=i[1]||0;return{x:(t.width+e)/-2,y:t.height+n,xMargin:e}})},t.cloneToHoneycomb=function(t,e,n,r){return void 0===r&&(r=0),a(t,e,n,function(t){return t=g.measure.boundingHexagon(t),{x:(t=2*g.solvers.equilateralAltitude(t.radius)+r)/-2,y:g.solvers.equilateralAltitude(t),xMargin:r}})}}(vjgeo=vjgeo||{}),!function(f){var t,n,r,i,o,d,c,e;function a(t){var e;return(r[t]||(e=r[t]={exports:{},id:t,loaded:!1},n[t].call(e.exports,e,e.exports,a),e.loaded=!0,e)).exports}function l(t){var e=[t.origin],t=(e.push.apply(e,t.controls),e.push(t.end),e.map(function(t){return{x:t[0],y:t[1]}}));return i?o.apply(i,t):i=new o(t),i}function h(t,e){t=t.points.map(g),t=new c(t);return e&&(t.parentRange=e),t}function p(t){var e=[];return e.push.apply(e,t.origin),t.controls&&(e.push.apply(e,t.controls[0]),1<t.controls.length)&&e.push.apply(e,t.controls[1]),e.push.apply(e,t.end),new o(e)}function g(t){return[t.x,t.y]}function v(t,e,n,r){for(var i,o,a,s=new d(t,e),u=new d(t,n),l=s,h=0,c=u;h<100;){var p=g(t.get((s.t+c.t)/2));try{i=new f.paths.Arc(s.point,p,c.point)}catch(t){if(o)return o;break}if(void 0===a&&(a=f.measure.isPointEqual(s.point,f.point.fromAngleOnCircle(i.endAngle,i))),function(n,r,t,i,o){var a=t-r;function e(t){var e=g(n.get(r+a*t)),t=f.point.middle(i,o?1-t:t);return f.measure.pointDistance(t,e)}return e(.25)+e(.75)}(t,e,c.t,i,a)<=r?(i.bezierData={startT:e,endT:c.t},l=c,o=i):u=c,l.t===u.t||o&&o!==i&&f.angle.ofArcSpan(i)-f.angle.ofArcSpan(o)<.5)return o;h++,c=new d(t,(l.t+u.t)/2)}n=new f.paths.Line(s.point,c.point);return n.bezierData={startT:e,endT:c.t},n}function y(t,e,n,r){var i=l(t.seed),o=[e.bezierData.startT,e.bezierData.endT].map(function(t){return new d(i,t,r)}),a=n.slice(),t=a.map(function(t){return f.measure.pointDistance(t,o[0].point)});t[0]>t[1]&&a.reverse();for(var s=2;s--;)if(!f.measure.isPointEqual(a[s],o[s].point))return null;return e.bezierData}function m(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.type=m.typeName,this.data={};var n=Array.isArray(t[0]),r=t.length;switch(2<=r&&f.isObjectOrUndefinedNotArray(t[t.length-1])&&(this.data=t[t.length-1]||{},r-=1),r){case 2:if(!n){this.seed=t[0],this.accuracy=t[1];break}this.accuracy=t[1];case 1:this.seed=n?new c(t[0]):t[0];break;default:switch(r){case 4:if(f.isPoint(t[3])){this.seed=new c(t);break}this.accuracy=t[3];case 3:n&&(this.seed=new c(t.slice(0,3)));break;case 5:this.accuracy=t[4],this.seed=new c(t.slice(0,4))}}if(this.paths={},f.measure.isBezierSeedLinear(this.seed))(a=new f.paths.Line(f.point.clone(this.seed.origin),f.point.clone(this.seed.end))).bezierData={startT:0,endT:1},this.paths={0:a};else{var i,o,a,s=p(this.seed);this.paths={};try{i=0===(o=(o=s).extrema().values.map(function(t){return f.round(t)}).filter(function(t,e,n){return n.indexOf(t)===e}).sort()).length?[0,1]:(0!==o[0]&&o.unshift(0),1!==o[o.length-1]&&o.push(1),o)}catch(t){return void console.warn(t)}this.accuracy||(a=s.length(),this.accuracy=a/100);for(var u=0,l=1;l<i.length;l++){var h=i[l]-i[l-1];u+=function(t,e,n,r,i,o){for(var a,s=0;r<i;)r=(a=v(e,r,i,n)).bezierData.endT,f.measure.pathLength(a)<1e-4||(t.paths[a.type+"_"+(o+s)]=a,s++);return s}(this,s,this.accuracy*h,i[l-1],i[l],u)}}}t=f.models||(f.models={}),n=[function(t,e,n){"use strict";t.exports=n(1)},function(t,e,n){"use strict";var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function h(t,e,n,r,i){var o=y.projectionratio(i=void 0===i?.5:i,t),a=1-o,o={x:o*e.x+a*r.x,y:o*e.y+a*r.y},e=y.abcratio(i,t);return{A:{x:n.x+(n.x-o.x)/e,y:n.y+(n.y-o.y)/e},B:n,C:o}}function p(t){var n,e=t&&t.forEach?t:[].slice.call(arguments),r=!1,i=("object"===c(e[0])&&(r=e.length,n=[],e.forEach(function(e){["x","y","z"].forEach(function(t){void 0!==e[t]&&n.push(e[t])})}),e=n),!1),o=e.length;if(r){if(4<r){if(1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");i=!0}}else if(6!==o&&8!==o&&9!==o&&12!==o&&1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");for(var a=!i&&(9===o||12===o)||t&&t[0]&&void 0!==t[0].z,s=[],u=0,l=(this._3d=a)?3:2;u<o;u+=l){var h={x:e[u],y:e[u+1]};a&&(h.z=e[u+2]),s.push(h)}this.order=s.length-1,this.points=s,r=["x","y"],a&&r.push("z"),this.dims=r,this.dimlen=r.length,function(t){for(var e=t.order,n=t.points,r=y.align(n,{p1:n[0],p2:n[e]}),i=0;i<r.length;i++)if(1e-4<f(r[i].y))return t._linear=!1;t._linear=!0}(this),this._t1=0,this._t2=1,this.update()}function r(){return y}var f=Math.abs,a=Math.min,s=Math.max,d=Math.cos,g=Math.sin,i=Math.acos,v=Math.sqrt,o=Math.PI,u={x:0,y:0,z:0},y=n(2),m=n(3),l=n(4);p.SVGtoBeziers=function(t){return l(p,t)},p.quadraticFromPoints=function(t,e,n,r){return 0===(r=void 0===r?.5:r)?new p(e,e,n):1===r?new p(t,e,e):(e=h(2,t,e,n,r),new p(t,e.A,n))},p.cubicFromPoints=function(t,e,n,r,i){var o=h(3,t,e,n,r=void 0===r?.5:r),a=(i=void 0===i?y.dist(e,o.C):i)*(1-r)/r,s=y.dist(t,n),u=(n.x-t.x)/s,s=(n.y-t.y)/s,l=e.x-i*u,i=e.y-i*s,u=e.x+a*u,e=e.y+a*s,a=o.A,s=a.x+(l-a.x)/(1-r),o=a.y+(i-a.y)/(1-r),l=a.x+(u-a.x)/r,i=a.y+(e-a.y)/r,u={x:t.x+(s-t.x)/r,y:t.y+(o-t.y)/r},e={x:n.x+(l-n.x)/(1-r),y:n.y+(i-n.y)/(1-r)};return new p(t,u,e,n)},p.getUtils=r,p.PolyBezier=m,p.prototype={getUtils:r,valueOf:function(){return this.toString()},toString:function(){return y.pointsToString(this.points)},toSVG:function(t){if(this._3d)return!1;for(var e=this.points,n=["M",e[0].x,e[0].y,2===this.order?"Q":"C"],r=1,i=e.length;r<i;r++)n.push(e[r].x),n.push(e[r].y);return n.join(" ")},setRatios:function(t){if(t.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=t,this._lut=[]},verify:function(){var t=this.coordDigest();t!==this._print&&(this._print=t,this.update())},coordDigest:function(){return this.points.map(function(t,e){return""+e+t.x+t.y+(t.z||0)}).join("")},update:function(t){this._lut=[],this.dpoints=y.derive(this.points,this._3d),this.computedirection()},computedirection:function(){var t=this.points,t=y.angle(t[0],t[this.order],t[1]);this.clockwise=0<t},length:function(){return y.length(this.derivative.bind(this))},_lut:[],getLUT:function(t){if(this.verify(),this._lut.length!==(t=t||100)){this._lut=[],t--;for(var e=0;e<=t;e++)this._lut.push(this.compute(e/t))}return this._lut},on:function(t,e){e=e||5;for(var n,r=this.getLUT(),i=[],o=0,a=0;a<r.length;a++)n=r[a],y.dist(n,t)<e&&(i.push(n),o+=a/r.length);return!!i.length&&o/i.length},project:function(t){var e,n,r,i,o=this.getLUT(),a=o.length-1,o=y.closest(o,t),s=o.mdist,o=o.mpos,u=(o+1)/a,l=.1/a;for(s+=1,e=n=(o-1)/a;n<u+l;n+=l)r=this.compute(n),(i=y.dist(t,r))<s&&(s=i,e=n);return(r=this.compute(e)).t=e,r.d=s,r},get:function(t){return this.compute(t)},point:function(t){return this.points[t]},compute:function(t){return this.ratios?y.computeWithRatios(t,this.points,this.ratios,this._3d):y.compute(t,this.points,this._3d,this.ratios)},raise:function(){for(var t,e,n=this.points,r=[n[0]],i=n.length,o=1;o<i;o++)t=n[o],e=n[o-1],r[o]={x:(i-o)/i*t.x+o/i*e.x,y:(i-o)/i*t.y+o/i*e.y};return r[i]=n[i-1],new p(r)},derivative:function(t){var e,n,r=1-t,i=0,o=this.dpoints[0],r=(2===this.order&&(o=[o[0],o[1],u],e=r,n=t),3===this.order&&(e=r*r,n=r*t*2,i=t*t),{x:e*o[0].x+n*o[1].x+i*o[2].x,y:e*o[0].y+n*o[1].y+i*o[2].y});return this._3d&&(r.z=e*o[0].z+n*o[1].z+i*o[2].z),r},curvature:function(t){return y.curvature(t,this.points,this._3d)},inflections:function(){return y.inflections(this.points)},normal:function(t){return this._3d?this.__normal3(t):this.__normal2(t)},__normal2:function(t){var t=this.derivative(t),e=v(t.x*t.x+t.y*t.y);return{x:-t.y/e,y:t.x/e}},__normal3:function(t){var e=this.derivative(t),t=this.derivative(t+.01),n=v(e.x*e.x+e.y*e.y+e.z*e.z),r=v(t.x*t.x+t.y*t.y+t.z*t.z),n=(e.x/=n,e.y/=n,e.z/=n,t.x/=r,t.y/=r,t.z/=r,{x:t.y*e.z-t.z*e.y,y:t.z*e.x-t.x*e.z,z:t.x*e.y-t.y*e.x}),r=v(n.x*n.x+n.y*n.y+n.z*n.z),t=(n.x/=r,n.y/=r,n.z/=r,[n.x*n.x,n.x*n.y-n.z,n.x*n.z+n.y,n.x*n.y+n.z,n.y*n.y,n.y*n.z-n.x,n.x*n.z-n.y,n.y*n.z+n.x,n.z*n.z]);return{x:t[0]*e.x+t[1]*e.y+t[2]*e.z,y:t[3]*e.x+t[4]*e.y+t[5]*e.z,z:t[6]*e.x+t[7]*e.y+t[8]*e.z}},hull:function(t){var e,n,r=this.points,i=[],o=[],a=0,s=0;for(o[a++]=r[0],o[a++]=r[1],o[a++]=r[2],3===this.order&&(o[a++]=r[3]);1<r.length;){for(i=[],s=0,n=r.length-1;s<n;s++)e=y.lerp(t,r[s],r[s+1]),o[a++]=e,i.push(e);r=i}return o},split:function(t,e){var n;return 0===t&&e?this.split(e).left:1===e?this.split(t).right:(n=this.hull(t),(n={left:new p(2===this.order?[n[0],n[3],n[5]]:[n[0],n[4],n[7],n[9]]),right:new p(2===this.order?[n[5],n[4],n[2]]:[n[9],n[8],n[6],n[3]]),span:n}).left._t1=y.map(0,0,1,this._t1,this._t2),n.left._t2=y.map(t,0,1,this._t1,this._t2),n.right._t1=y.map(t,0,1,this._t1,this._t2),n.right._t2=y.map(1,0,1,this._t1,this._t2),e?(e=y.map(e,t,1,0,1),n.right.split(e).left):n)},extrema:function(){var t,n,e=this.dims,r={},i=[];return e.forEach(function(e){n=function(t){return t[e]},t=this.dpoints[0].map(n),r[e]=y.droots(t),3===this.order&&(t=this.dpoints[1].map(n),r[e]=r[e].concat(y.droots(t))),r[e]=r[e].filter(function(t){return 0<=t&&t<=1}),i=i.concat(r[e].sort(y.numberSort))}.bind(this)),i=i.sort(y.numberSort).filter(function(t,e){return i.indexOf(t)===e}),r.values=i,r},bbox:function(){var e=this.extrema(),n={};return this.dims.forEach(function(t){n[t]=y.getminmax(this,t,e[t])}.bind(this)),n},overlaps:function(t){var e=this.bbox(),t=t.bbox();return y.bboxoverlap(e,t)},offset:function(n,t){var r,e,i,o;return void 0!==t?(e={c:o=this.get(n),n:r=this.normal(n),x:o.x+r.x*t,y:o.y+r.y*t},this._3d&&(e.z=o.z+r.z*t),e):this._linear?(i=this.normal(0),o=this.points.map(function(t){var e={x:t.x+n*i.x,y:t.y+n*i.y};return t.z&&r.z&&(e.z=t.z+n*i.z),e}),[new p(o)]):this.reduce().map(function(t){return t._linear?t.offset(n)[0]:t.scale(n)})},simple:function(){if(3===this.order){var t=y.angle(this.points[0],this.points[3],this.points[1]),e=y.angle(this.points[0],this.points[3],this.points[2]);if(0<t&&e<0||t<0&&0<e)return!1}var t=this.normal(0),e=this.normal(1),n=t.x*e.x+t.y*e.y;return this._3d&&(n+=t.z*e.z),f(i(n))<o/3},reduce:function(){var t,e,n=0,r=0,i=[],o=[],a=this.extrema().values;for(-1===(a=-1===a.indexOf(0)?[0].concat(a):a).indexOf(1)&&a.push(1),n=a[0],t=1;t<a.length;t++)r=a[t],(e=this.split(n,r))._t1=n,e._t2=r,i.push(e),n=r;return i.forEach(function(t){for(r=n=0;r<=1;)for(r=n+.01;r<=1.01;r+=.01)if(!(e=t.split(n,r)).simple()){if(f(n-(r-=.01))<.01)return[];(e=t.split(n,r))._t1=y.map(n,0,1,t._t1,t._t2),e._t2=y.map(r,0,1,t._t1,t._t2),o.push(e),n=r;break}n<1&&((e=t.split(n,1))._t1=y.map(n,0,1,t._t1,t._t2),e._t2=t._t2,o.push(e))}),o},scale:function(o){var a=this.order,s="function"==typeof o?o:!1;if(s&&2===a)return this.raise().scale(s);var u,l,h=this.clockwise,n=s?s(0):o,r=s?s(1):o,i=[this.offset(0,10),this.offset(1,10)],c=y.lli4(i[0],i[0].c,i[1],i[1].c);if(c)return u=this.points,l=[],[0,1].forEach(function(t){var e=l[t*a]=y.copy(u[t*a]);e.x+=(t?r:n)*i[t].n.x,e.y+=(t?r:n)*i[t].n.y}.bind(this)),[0,1].forEach((s?function(t){var e,n,r,i;2===this.order&&t||(n={x:(e=u[t+1]).x-c.x,y:e.y-c.y},r=s?s((t+1)/a):o,s&&!h&&(r=-r),i=v(n.x*n.x+n.y*n.y),n.x/=i,n.y/=i,l[t+1]={x:e.x+r*n.x,y:e.y+r*n.y})}:function(t){var e,n;2===this.order&&t||(e=l[t*a],n=this.derivative(t),n={x:e.x+n.x,y:e.y+n.y},l[t+1]=y.lli4(e,n,c,u[t+1]))}).bind(this)),new p(l);throw new Error("cannot scale this curve. Try reducing it first.")},outline:function(e,n,r,i){function o(n,r,i,o,a){return function(t){var e=r-n;return y.map(t,0,1,n+o/i*e,n+(o+a)/i*e)}}n=void 0===n?e:n;var a,t=this.reduce(),s=t.length,u=[],l=[],h=0,c=this.length(),p=void 0!==r&&void 0!==i,t=(t.forEach(function(t){g=t.length(),p?(u.push(t.scale(o(e,r,c,h,g))),l.push(t.scale(o(-n,-i,c,h,g)))):(u.push(t.scale(e)),l.push(t.scale(-n))),h+=g}),l=l.map(function(t){return(a=t.points)[3]?t.points=[a[3],a[2],a[1],a[0]]:t.points=[a[2],a[1],a[0]],t}).reverse(),u[0].points[0]),f=u[s-1].points[u[s-1].points.length-1],s=l[s-1].points[l[s-1].points.length-1],d=l[0].points[0],s=y.makeline(s,t),t=y.makeline(f,d),f=[s].concat(u).concat([t]).concat(l),g=f.length;return new m(f)},outlineshapes:function(t,e,n){for(var r=this.outline(t,e=e||t).curves,i=[],o=1,a=r.length;o<a/2;o++){var s=y.makeshape(r[o],r[a-o],n);s.startcap.virtual=1<o,s.endcap.virtual=o<a/2-1,i.push(s)}return i},intersects:function(t,e){return t?t.p1&&t.p2?this.lineIntersects(t):(t instanceof p&&(t=t.reduce()),this.curveintersects(this.reduce(),t,e)):this.selfintersects(e)},lineIntersects:function(t){var e=a(t.p1.x,t.p2.x),n=a(t.p1.y,t.p2.y),r=s(t.p1.x,t.p2.x),i=s(t.p1.y,t.p2.y),o=this;return y.roots(this.points,t).filter(function(t){t=o.get(t);return y.between(t.x,e,r)&&y.between(t.y,n,i)})},selfintersects:function(t){for(var e,n,r=this.reduce(),i=r.length-2,o=[],a=0;a<i;a++)e=r.slice(a,a+1),n=r.slice(a+2),e=this.curveintersects(e,n,t),o=o.concat(e);return o},curveintersects:function(t,n,e){var r=[],i=(t.forEach(function(e){n.forEach(function(t){e.overlaps(t)&&r.push({left:e,right:t})})}),[]);return r.forEach(function(t){t=y.pairiteration(t.left,t.right,e);0<t.length&&(i=i.concat(t))}),i},arcs:function(t){return this._iterate(t=t||.5,[])},_error:function(t,e,n,r){var i=(r-n)/4,n=this.get(n+i),r=this.get(r-i),i=y.dist(t,e),e=y.dist(t,n),n=y.dist(t,r);return f(e-i)+f(n-i)},_iterate:function(t,e){var n=0,r=1;do{var i,o,a,s,u=0,r=1,l=this.get(n),h=!1,c=1;do{a=h,o=i,p=this.get(s=(n+r)/2),f=this.get(r),(i=y.getccenter(l,p,f)).interval={start:n,end:r};var p,f,h=this._error(i,l,n,r)<=t;if((p=a&&!h)||(c=r),h){if(1<=r){i.interval.end=c=1,o=i,1<r&&(f={x:i.x+i.r*d(i.e),y:i.y+i.r*g(i.e)},i.e+=y.angle({x:i.x,y:i.y},f,this.get(1)));break}r+=(r-n)/2}else r=s}while(!p&&u++<100)}while(!(100<=u)&&(e.push(o=o||i),n=c,r<1));return e}},t.exports=p},function(t,e,s){"use strict";function c(t){return t<0?-m(-t,1/3):m(t,1/3)}var p,f,d,g,v,y,m,n,x,w,u,l,b,A;p=Math.abs,f=Math.cos,d=Math.sin,g=Math.acos,v=Math.atan2,y=Math.sqrt,m=Math.pow,n=Math.PI,x=2*n,w=n/2,u=Number.MAX_SAFE_INTEGER||9007199254740991,l=Number.MIN_SAFE_INTEGER||-9007199254740991,b={x:0,y:0,z:0},A={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(t,e){e=e(t),t=e.x*e.x+e.y*e.y;return void 0!==e.z&&(t+=e.z*e.z),y(t)},compute:function(t,e,n){if(0===t)return e[0];var r=e.length-1;if(1===t)return e[r];var i,o,a,s,u,l,h,c=e,p=1-t;if(0==r)return e[0];if(1==r)return h={x:p*c[0].x+t*c[1].x,y:p*c[0].y+t*c[1].y},n&&(h.z=p*c[0].z+t*c[1].z),h;if(r<4)return s=p*p,u=t*t,l=0,2==r?(c=[c[0],c[1],c[2],b],i=s,o=p*t*2,a=u):3==r&&(i=s*p,o=s*t*3,a=p*u*3,l=t*u),h={x:i*c[0].x+o*c[1].x+a*c[2].x+l*c[3].x,y:i*c[0].y+o*c[1].y+a*c[2].y+l*c[3].y},n&&(h.z=i*c[0].z+o*c[1].z+a*c[2].z+l*c[3].z),h;for(var f=JSON.parse(JSON.stringify(e));1<f.length;){for(var d=0;d<f.length-1;d++)f[d]={x:f[d].x+(f[d+1].x-f[d].x)*t,y:f[d].y+(f[d+1].y-f[d].y)*t},void 0!==f[d].z&&(f[d]=f[d].z+(f[d+1].z-f[d].z)*t);f.splice(f.length-1,1)}return f[0]},computeWithRatios:function(t,e,n,r){var i,o=1-t,a=n[0],s=n[1],u=n[2],n=n[3];return a*=o,s*=t,2===e.length?{x:(a*e[0].x+s*e[1].x)/(i=a+s),y:(a*e[0].y+s*e[1].y)/i,z:!!r&&(a*e[0].z+s*e[1].z)/i}:(a*=o,s*=2*o,u*=t*t,3===e.length?{x:(a*e[0].x+s*e[1].x+u*e[2].x)/(i=a+s+u),y:(a*e[0].y+s*e[1].y+u*e[2].y)/i,z:!!r&&(a*e[0].z+s*e[1].z+u*e[2].z)/i}:(a*=o,s*=1.5*o,u*=3*o,n*=t*t*t,4===e.length?{x:(a*e[0].x+s*e[1].x+u*e[2].x+n*e[3].x)/(i=a+s+u+n),y:(a*e[0].y+s*e[1].y+u*e[2].y+n*e[3].y)/i,z:!!r&&(a*e[0].z+s*e[1].z+u*e[2].z+n*e[3].z)/i}:void 0))},derive:function(t,e){for(var n=[],r=t,i=r.length,o=i-1;1<i;i--,o--){for(var a,s=[],u=0;u<o;u++)a={x:o*(r[u+1].x-r[u].x),y:o*(r[u+1].y-r[u].y)},e&&(a.z=o*(r[u+1].z-r[u].z)),s.push(a);n.push(s),r=s}return n},between:function(t,e,n){return e<=t&&t<=n||A.approximately(t,e)||A.approximately(t,n)},approximately:function(t,e,n){return p(t-e)<=(n||1e-6)},length:function(t){for(var e,n=0,r=A.Tvalues.length,i=0;i<r;i++)e=.5*A.Tvalues[i]+.5,n+=A.Cvalues[i]*A.arcfn(e,t);return.5*n},map:function(t,e,n,r,i){return r+(i-r)*((t-e)/(n-e))},lerp:function(t,e,n){var r={x:e.x+t*(n.x-e.x),y:e.y+t*(n.y-e.y)};return e.z&&n.z&&(r.z=e.z+t*(n.z-e.z)),r},pointToString:function(t){var e=t.x+"/"+t.y;return void 0!==t.z&&(e+="/"+t.z),e},pointsToString:function(t){return"["+t.map(A.pointToString).join(", ")+"]"},copy:function(t){return JSON.parse(JSON.stringify(t))},angle:function(t,e,n){var r=e.x-t.x,e=e.y-t.y,i=n.x-t.x,n=n.y-t.y;return v(r*n-e*i,r*i+e*n)},round:function(t,e){var t=""+t,n=t.indexOf(".");return parseFloat(t.substring(0,n+1+e))},dist:function(t,e){var n=t.x-e.x,t=t.y-e.y;return y(n*n+t*t)},closest:function(t,n){var r,i,o=m(2,63);return t.forEach(function(t,e){(i=A.dist(n,t))<o&&(o=i,r=e)}),{mdist:o,mpos:r}},abcratio:function(t,e){if(2!==e&&3!==e)return!1;if(void 0===t)t=.5;else if(0===t||1===t)return t;t=m(t,e)+m(1-t,e);return p((t-1)/t)},projectionratio:function(t,e){if(2!==e&&3!==e)return!1;if(void 0===t)t=.5;else if(0===t||1===t)return t;var n=m(1-t,e);return n/(m(t,e)+n)},lli8:function(t,e,n,r,i,o,a,s){var u=(t-n)*(o-s)-(e-r)*(i-a);return 0!=u&&{x:((t*r-e*n)*(i-a)-(t-n)*(i*s-o*a))/u,y:((t*r-e*n)*(o-s)-(e-r)*(i*s-o*a))/u}},lli4:function(t,e,n,r){var i=t.x,t=t.y,o=e.x,e=e.y,a=n.x,n=n.y,s=r.x,r=r.y;return A.lli8(i,t,o,e,a,n,s,r)},lli:function(t,e){return A.lli4(t,t.c,e,e.c)},makeline:function(t,e){var n=s(1),r=t.x,t=t.y,i=e.x,e=e.y,o=(i-r)/3,a=(e-t)/3;return new n(r,t,r+o,t+a,r+2*o,t+2*a,i,e)},findbbox:function(t){var e=u,n=u,r=l,i=l;return t.forEach(function(t){t=t.bbox();e>t.x.min&&(e=t.x.min),n>t.y.min&&(n=t.y.min),r<t.x.max&&(r=t.x.max),i<t.y.max&&(i=t.y.max)}),{x:{min:e,mid:(e+r)/2,max:r,size:r-e},y:{min:n,mid:(n+i)/2,max:i,size:i-n}}},shapeintersections:function(r,t,i,e,o){var a,s;return A.bboxoverlap(t,e)?(a=[],t=[r.startcap,r.forward,r.back,r.endcap],s=[i.startcap,i.forward,i.back,i.endcap],t.forEach(function(n){n.virtual||s.forEach(function(t){var e;t.virtual||0<(e=n.intersects(t,o)).length&&(e.c1=n,e.c2=t,e.s1=r,e.s2=i,a.push(e))})}),a):[]},makeshape:function(t,e,n){var r=e.points.length,i=t.points.length,r=A.makeline(e.points[r-1],t.points[0]),i=A.makeline(t.points[i-1],e.points[0]),o={startcap:r,forward:t,back:e,endcap:i,bbox:A.findbbox([r,t,e,i])},a=A;return o.intersections=function(t){return a.shapeintersections(o,o.bbox,t,t.bbox,n)},o},getminmax:function(t,e,n){if(!n)return{min:0,max:0};var r,i=u,o=l;-1===(n=-1===n.indexOf(0)?[0].concat(n):n).indexOf(1)&&n.push(1);for(var a=0,s=n.length;a<s;a++)r=n[a],(r=t.get(r))[e]<i&&(i=r[e]),r[e]>o&&(o=r[e]);return{min:i,mid:(i+o)/2,max:o,size:o-i}},align:function(t,e){var n=e.p1.x,r=e.p1.y,i=-v(e.p2.y-r,e.p2.x-n);return t.map(function(t){return{x:(t.x-n)*f(i)-(t.y-r)*d(i),y:(t.x-n)*d(i)+(t.y-r)*f(i)}})},roots:function(t,e){function n(t){return 0<=t&&t<=1}var r,i,o,a,s,u,l,h=t.length-1,t=A.align(t,e=e||{p1:{x:0,y:0},p2:{x:1,y:0}});return 2==h?0!==(a=(r=t[0].y)-2*(u=t[1].y)+(s=t[2].y))?[-((e=-y(u*u-r*s))+(h=-r+u))/a,-(-e+h)/a].filter(n):u!==s&&0===a?[(2*u-s)/(2*u-2*s)].filter(n):[]:(e=t[0].y,a=3*(h=t[1].y)-e-3*(o=t[2].y)+t[3].y,r=3*e-6*h+3*o,u=-3*e+3*h,s=e,A.approximately(a,0)?A.approximately(r,0)?A.approximately(u,0)?[]:[-s/u].filter(n):(o=2*r,[((i=y(u*u-4*r*s))-u)/o,(-u-i)/o].filter(n)):(h=(t=(3*(u/=a)-(r/=a)*r)/3)/3,((o=(e=(i=(2*r*r*r-9*r*u+27*(s/=a))/27)/2)*e+h*h*h)<0?(a=y((u=-t/3)*u*u),h=g((s=-i/(2*a))<-1?-1:1<s?1:s),[(t=2*c(a))*f(h/3)-r/3,t*f((h+x)/3)-r/3,t*f((h+2*x)/3)-r/3]):0==o?[2*(l=e<0?c(-e):-c(e))-r/3,-l-r/3]:(u=y(o),[(l=c(-e+u))-c(e+u)-r/3])).filter(n)))},droots:function(t){var e,n,r,i,o,a;return 3===t.length?0!==(n=(o=t[0])-2*(a=t[1])+(e=t[2]))?[-((r=-y(a*a-o*e))+(i=-o+a))/n,-(-r+i)/n]:a!==e&&0===n?[(2*a-e)/(2*(a-e))]:[]:2===t.length?(o=t[0])!==(a=t[1])?[o/(o-a)]:[]:void 0},curvature:function(t,e,n,r){var i,o,a,s=A.derive(e),u=s[0],s=s[1],l=0,h=0,u=A.compute(t,u),s=A.compute(t,s),c=u.x*u.x+u.y*u.y,u=n?(i=y(m(u.y*s.z-s.y*u.z,2)+m(u.z*s.x-s.z*u.x,2)+m(u.x*s.y-s.x*u.y,2)),m(c+u.z*u.z,1.5)):(i=u.x*s.y-u.y*s.x,m(c,1.5));return 0===i||0===u?{k:0,r:0}:(l=i/u,h=u/i,r||(s=A.curvature(t-.001,e,n,!0).k,o=((c=A.curvature(t+.001,e,n,!0).k)-l+(l-s))/2,a=(p(c-l)+p(l-s))/2),{k:l,r:h,dk:o,adk:a})},inflections:function(t){if(t.length<4)return[];var t=A.align(t,{p1:t[0],p2:t.slice(-1)[0]}),e=t[2].x*t[1].y,n=t[3].x*t[1].y,r=t[1].x*t[2].y,t=18*(-3*e+2*n+3*r-t[3].x*t[2].y),n=18*(3*e-n-3*r),r=18*(r-e);if(A.approximately(t,0)){if(!A.approximately(n,0)){e=-r/n;if(0<=e&&e<=1)return[e]}return[]}e=Math.sqrt(n*n-4*t*r);return A.approximately(r=2*t,0)?[]:[(e-n)/r,-(n+e)/r].filter(function(t){return 0<=t&&t<=1})},bboxoverlap:function(t,e){for(var n,r,i,o=["x","y"],a=o.length,s=0;s<a;s++)if(n=t[i=o[s]].mid,r=e[i].mid,i=(t[i].size+e[i].size)/2,p(n-r)>=i)return!1;return!0},expandbox:function(t,e){e.x.min<t.x.min&&(t.x.min=e.x.min),e.y.min<t.y.min&&(t.y.min=e.y.min),e.z&&e.z.min<t.z.min&&(t.z.min=e.z.min),e.x.max>t.x.max&&(t.x.max=e.x.max),e.y.max>t.y.max&&(t.y.max=e.y.max),e.z&&e.z.max>t.z.max&&(t.z.max=e.z.max),t.x.mid=(t.x.min+t.x.max)/2,t.y.mid=(t.y.min+t.y.max)/2,t.z&&(t.z.mid=(t.z.min+t.z.max)/2),t.x.size=t.x.max-t.x.min,t.y.size=t.y.max-t.y.min,t.z&&(t.z.size=t.z.max-t.z.min)},pairiteration:function(t,e,n){var r,i=t.bbox(),o=e.bbox(),a=n||.5;return i.x.size+i.y.size<a&&o.x.size+o.y.size<a?[(1e5*(t._t1+t._t2)/2|0)/1e5+"/"+(1e5*(e._t1+e._t2)/2|0)/1e5]:(n=t.split(.5),i=e.split(.5),o=(o=[{left:n.left,right:i.left},{left:n.left,right:i.right},{left:n.right,right:i.right},{left:n.right,right:i.left}]).filter(function(t){return A.bboxoverlap(t.left.bbox(),t.right.bbox())}),r=[],0===o.length?r:(o.forEach(function(t){r=r.concat(A.pairiteration(t.left,t.right,a))}),r=r.filter(function(t,e){return r.indexOf(t)===e})))},getccenter:function(t,e,n){var r,i=e.x-t.x,o=e.y-t.y,a=n.x-e.x,s=n.y-e.y,u=i*f(w)-o*d(w),i=i*d(w)+o*f(w),o=a*f(w)-s*d(w),a=a*d(w)+s*f(w),s=(t.x+e.x)/2,l=(t.y+e.y)/2,h=(e.x+n.x)/2,c=(e.y+n.y)/2,s=A.lli8(s,l,s+u,l+i,h,c,h+o,c+a),u=A.dist(s,t),l=v(t.y-s.y,t.x-s.x),i=v(e.y-s.y,e.x-s.x),h=v(n.y-s.y,n.x-s.x);return l<h?((i<l||h<i)&&(l+=x),h<l&&(r=h,h=l,l=r)):h<i&&i<l?(r=h,h=l,l=r):h+=x,s.s=l,s.e=h,s.r=u,s},numberSort:function(t,e){return t-e}},t.exports=A},function(t,e,n){"use strict";function r(t){this.curves=[],this._3d=!1,t&&(this.curves=t,this._3d=this.curves[0]._3d)}var i;i=n(2),r.prototype={valueOf:function(){return this.toString()},toString:function(){return"["+this.curves.map(function(t){return i.pointsToString(t.points)}).join(", ")+"]"},addCurve:function(t){this.curves.push(t),this._3d=this._3d||t._3d},length:function(){return this.curves.map(function(t){return t.length()}).reduce(function(t,e){return t+e})},curve:function(t){return this.curves[t]},bbox:function(){for(var t=this.curves,e=t[0].bbox(),n=1;n<t.length;n++)i.expandbox(e,t[n].bbox());return e},offset:function(e){var n=[];return this.curves.forEach(function(t){n=n.concat(t.offset(e))}),new r(n)}},t.exports=r},function(t,e,n){"use strict";var s=n(5),u={x:!1,y:!1};t.exports=function(t,e){for(var n,r=s(e).split(" "),i=new RegExp("[MLCQZ]",""),o=[],a={C:6,Q:4,L:2,M:2};r.length;)n=r.splice(0,1)[0],i.test(n)&&(n=function(t,e,n){if("Z"!==e){if("M"!==e)return e=[!1,u.x,u.y].concat(n),t=new(t.bind.apply(t,e)),e=n.slice(-2),u={x:e[0],y:e[1]},t;u={x:n[0],y:n[1]}}}(t,n,r.splice(0,a[n]).map(parseFloat)))&&o.push(n);return new t.PolyBezier(o)}},function(t,e){"use strict";t.exports=function(t){for(var e,n,r,i,o,a=(t=t.replace(/,/g," ").replace(/-/g," - ").replace(/-\s+/g,"-").replace(/([a-zA-Z])/g," $1 ")).replace(/([a-zA-Z])\s?/g,"|$1").split("|"),s=a.length,u=[],l=0,h=0,c=0,p=0,f=0,d=0,g=0,v=0,y="",m=1;m<s;m++)if(r=(n=(e=a[m]).substring(0,1)).toLowerCase(),i=(u=(u=e.replace(n,"").trim().split(" ")).filter(function(t){return""!==t}).map(parseFloat)).length,"m"===r){if("m"===n?(c+=u[0],p+=u[1]):(c=u[0],p=u[1]),y=y+"M "+((l=c)+" "+(h=p)+" "),2<i)for(o=0;o<i;o+=2)"m"===n?(c+=u[o],p+=u[o+1]):(c=u[o],p=u[o+1]),y+=["L",c,p,""].join(" ")}else if("l"===r)for(o=0;o<i;o+=2)"l"===n?(c+=u[o],p+=u[o+1]):(c=u[o],p=u[o+1]),y+=["L",c,p,""].join(" ");else if("h"===r)for(o=0;o<i;o++)"h"===n?c+=u[o]:c=u[o],y+=["L",c,p,""].join(" ");else if("v"===r)for(o=0;o<i;o++)"v"===n?p+=u[o]:p=u[o],y+=["L",c,p,""].join(" ");else if("q"===r)for(o=0;o<i;o+=4)"q"===n?(f=c+u[o],d=p+u[o+1],c+=u[o+2],p+=u[o+3]):(f=u[o],d=u[o+1],c=u[o+2],p=u[o+3]),y+=["Q",f,d,c,p,""].join(" ");else if("t"===r)for(o=0;o<i;o+=2)f=c+(c-f),d=p+(p-d),"t"===n?(c+=u[o],p+=u[o+1]):(c=u[o],p=u[o+1]),y+=["Q",f,d,c,p,""].join(" ");else if("c"===r)for(o=0;o<i;o+=6)"c"===n?(f=c+u[o],d=p+u[o+1],g=c+u[o+2],v=p+u[o+3],c+=u[o+4],p+=u[o+5]):(f=u[o],d=u[o+1],g=u[o+2],v=u[o+3],c=u[o+4],p=u[o+5]),y+=["C",f,d,g,v,c,p,""].join(" ");else if("s"===r)for(o=0;o<i;o+=4)f=c+(c-g),d=p+(p-v),"s"===n?(g=c+u[o],v=p+u[o+1],c+=u[o+2],p+=u[o+3]):(g=u[o],v=u[o+1],c=u[o+2],p=u[o+3]),y+=["C",f,d,g,v,c,p,""].join(" ");else"z"===r&&(y+="Z ",c=l,p=h);return y.trim()}}],r={},a.m=n,a.c=r,a.p="",o=a(0),d=function(t,e,n){this.t=e,this.point=f.point.add(g(t.get(e)),n)},c=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];switch(this.type=f.pathType.BezierSeed,t.length){case 1:var n=t[0];this.origin=n[0],3===n.length?(this.controls=[n[1]],this.end=n[2]):4===n.length?(this.controls=[n[1],n[2]],this.end=n[3]):this.end=n[1];break;case 3:Array.isArray(t[1])?this.controls=t[1]:this.controls=[t[1]],this.end=t[2];break;case 4:this.controls=[t[1],t[2]],this.end=t[3]}},m.getBezierSeeds=function(s,t){(t=void 0===t?{}:t).shallow=!0,t.unifyBeziers=!1;function u(t,e,n){void 0===n&&(n=!1),r[e]||(r[e]=[]),r[e].push(n?f.path.clone(t):t)}var r={};return f.model.findChains(s,function(t,e,a){t.forEach(function(t){e=s,i=a,o=u,(r=[(n=t).links[0],n.links[n.links.length-1]])[0].walkedPath.pathContext.bezierData.startT>r[1].walkedPath.pathContext.bezierData.startT&&(f.chain.reverse(n),r.reverse());var e,n,r,i,o=null!==(r={startT:(r=r.map(function(t){return y(e,t.walkedPath.pathContext,t.endPoints,t.walkedPath.offset)}))[0]?r[0].startT:null,endT:r[1]?r[1].endT:null}).startT&&null!==r.endT?r:2<n.links.length?(null===r.startT&&(o(n.links[0].walkedPath.pathContext,i,!0),r.startT=n.links[1].walkedPath.pathContext.bezierData.startT),null===r.endT&&(o(n.links[n.links.length-1].walkedPath.pathContext,i,!0),r.endT=n.links[n.links.length-2].walkedPath.pathContext.bezierData.endT),r):null;o?(i=l(s.seed).split(o.startT,o.endT),u(h(i),a)):t.links.forEach(function(t){return u(t.walkedPath.pathContext,a,!0)})}),e.forEach(function(t){if(t.pathContext.type===f.pathType.Line)return u(t.pathContext,a,!0);var e=y(s,t.pathContext,f.point.fromPathEnds(t.pathContext),t.offset);e?(e=l(s.seed).split(e.startT,e.endT),u(h(e),a)):u(t.pathContext,a,!0)})},t),t.byLayers?r:r[""]},m.computeLength=function(t){return p(t).length()},m.computePoint=function(t,e){return g(l(t).compute(e))},m.typeName="BezierCurve",e=m,(t.BezierCurve=e).metaParameters=[{title:"points",type:"select",value:[[[100,0],[-80,-60],[100,220],[100,60]],[[0,0],[100,0],[100,100]],[[0,0],[20,0],[80,100],[100,100]]]}]}(vjgeo=vjgeo||{}),!function(p){var f,t;function n(e){var t=p.angle.ofArcSpan(e),n=(n=p.angle.toRadians(t),Math.tan(n/4)/3*4),n=[e.radius,e.radius*n];return[n,p.point.rotate(p.point.mirror(n,!1,!0),t,[0,0])].map(function(t){return p.point.add(e.origin,p.point.rotate(t,e.startAngle,[0,0]))})}function d(t){var e;return p.angle.ofArcSpan(t)<=90?(e=p.point.fromPathEnds(t),t=n(t),{type:p.pathType.BezierSeed,origin:e[0],controls:t,end:e[1]}):null}f=p.models||(p.models={}),t=function(){for(var o=this,a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];function e(t){switch(t){case 2:l&&(o.origin=a[0]);break;case 3:o.origin=a[0];break;case 4:o.origin=[a[0],a[1]]}for(var e=360/u,n=new p.paths.Arc([0,0],1,0,e),r=0;r<u;r++){var i=d(n);switch(t){case 1:i=p.path.scale(i,a[0]);break;case 2:i=l?p.path.scale(i,a[1]):p.path.distort(i,a[0],a[1]);break;case 3:i=p.path.distort(i,a[1],a[2]);break;case 4:i=p.path.distort(i,a[2],a[3])}o.models["Curve_"+(1+r)]=new f.BezierCurve(i,s),n.startAngle+=e,n.endAngle+=e}}this.models={},this.data={};var s,u=8,l=p.isPoint(a[0]),n=a.length;switch(0<n&&p.isObjectOrUndefinedNotArray(a[a.length-1])&&(this.data=a[a.length-1]||{},n-=1),n){case 2:e(2);break;case 3:l?e(3):(s=a[2],e(2));break;case 4:l?(s=a[3],e(3)):e(4);break;case 5:s=a[4],e(4)}},(f.Ellipse=t).metaParameters=[{title:"radiusX",type:"range",min:1,max:50,value:50},{title:"radiusY",type:"range",min:1,max:50,value:25}],t=function(){for(var t,e,n,r,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];this.models={},this.data={};0<(a=i.length)&&p.isObjectOrUndefinedNotArray(i[i.length-1])&&(this.data=i[i.length-1]||{}),e=p.isPathArc(i[0])?(t=i[0],n=i[1],r=i[2],i[3]):(t=new p.paths.Arc([0,0],1,i[0],i[1]),n=i[2],r=i[3],i[4]);for(var a=p.angle.ofArcSpan(t),s=Math.ceil(a/45),u=a/s,l=p.path.clone(t),h=0;h<s;h++){l.startAngle=t.startAngle+h*u,l.endAngle=l.startAngle+u;var c=d(l),c=p.path.distort(c,n,r);this.models["Curve_"+(1+h)]=new f.BezierCurve(c,e)}},(f.EllipticArc=t).metaParameters=[{title:"startAngle",type:"range",min:0,max:90,value:0},{title:"endAngle",type:"range",min:90,max:360,value:180},{title:"radiusX",type:"range",min:1,max:50,value:50},{title:"radiusY",type:"range",min:1,max:50,value:25}]}(vjgeo=vjgeo||{}),!function(d){var t;function g(t){var e;if(Array.isArray(t)){if(d.isPoint(t[0]))return t;e=t}else e=d.importer.parseNumericList(t);for(var n=[],r=0;r<e.length;r+=2)n.push([e[r],e[r+1]]);return n}t=function(){for(var t,r,i=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];function o(t,e,n){(n=void 0===n?!1:n)&&0==d.measure.pointDistance(r[t],r[e])||(i.paths["ShapeLine"+f]=new d.paths.Line(r[t],r[e]))}this.paths={},this.data={};var a,s,u,l,h,c=e.length;if(0<c&&d.isObjectOrUndefinedNotArray(e[e.length-1])&&(this.data=e[e.length-1]||{},c-=1),1==c&&Array.isArray(e[0])&&0<e[0].length&&Array.isArray(e[0][0])&&0<e[0][0].length&&Array.isArray(e[0][0][0])&&1<e[0][0][0].length)for(var p=0;p<e[0].length;p++)for(var f=1;f<e[0][p].length;f++)a=e[0][p],s=f-1,u=f,void 0===(h=p+1+"")&&(h=""),(l=void 0===(l=!1)?!1:l)&&0==d.measure.pointDistance(a[s],a[u])||(i.paths["ShapeLine"+f+h]=new d.paths.Line(a[s],a[u]));else{switch(c){case 1:t=!0,r=g(e[0]);break;case 2:t=e[0],r=g(e[1])}for(f=1;f<r.length;f++)o(f-1,f);t&&2<r.length&&o(r.length-1,0,!0)}},((d.models||(d.models={})).Polyline=t).metaParameters=[{title:"closed",type:"bool",value:!0},{title:"points",type:"select",value:[[[0,0],[40,40],[60,20],[100,100],[60,60],[40,80]],[[0,0],[100,0],[50,87]],[-10,0,10,0,0,20],"-10 0 10 0 0 20"]}]}(vjgeo=vjgeo||{}),!function(u){var o,t;function l(t,e,n,r,i){this.paths={},this.data={},this.paths=new o.Polyline(!0,l.getPoints(t,e,n,r)).paths,this.data=i||{}}o=u.models||(u.models={}),l.circumscribedRadius=function(t,e){return t/Math.cos(e/2)},l.getPoints=function(t,e,n,r){void 0===r&&(r=!1);var i=[],o=u.angle.toRadians(n=void 0===n?0:n),a=2*Math.PI/t;r&&(e=l.circumscribedRadius(e,a));for(var s=0;s<t;s++)i.push(u.point.fromPolar(a*s+o,e));return i},t=l,(o.Polygon=t).metaParameters=[{title:"number of sides",type:"range",min:3,max:24,value:6},{title:"radius",type:"range",min:1,max:100,value:50},{title:"offset angle",type:"range",min:0,max:180,value:0},{title:"radius on flats (vs radius on vertexes)",type:"bool",value:!1}]}(vjgeo=vjgeo||{}),!function(a){var t;t=function(t,e,n,r){this.paths={},this.data={},this.data=r||{};for(var i=0;i<e.length;i++){var o=n?n[i]:i.toString();this.paths[o]=new a.paths.Circle(e[i],t)}},((a.models||(a.models={})).Holes=t).metaParameters=[{title:"holeRadius",type:"range",min:.1,max:10,step:.1,value:1},{title:"points",type:"select",value:[[[0,0],[10,10],[20,20],[30,30],[40,40],[50,50],[60,60],[70,70],[80,80]],[[0,0],[0,25],[0,50],[0,75],[0,100],[25,50],[50,50],[75,50],[100,100],[100,75],[100,50],[100,25],[100,0]]]}]}(vjgeo=vjgeo||{}),!function(t){var o;o=t.models||(t.models={}),t=function(t,e,n,r,i){void 0===r&&(r=0),this.paths={},this.data={},n=o.Polygon.getPoints(n,t,r),t=n.map(function(t,e){return"bolt "+e}),this.paths=new o.Holes(e,n,t).paths,this.data=i||{}},(o.BoltCircle=t).metaParameters=[{title:"bolt circle radius",type:"range",min:1,max:100,value:50},{title:"hole radius",type:"range",min:1,max:50,value:5},{title:"bolt count",type:"range",min:3,max:24,value:12},{title:"offset angle",type:"range",min:0,max:180,value:0}]}(vjgeo=vjgeo||{}),!function(t){var i;i=t.models||(t.models={}),t=function(t,e,n,r){this.paths={},this.data={},this.paths=new i.Holes(n,[[0,0],[t,0],[t,e],[0,e]],["BottomLeft_bolt","BottomRight_bolt","TopRight_bolt","TopLeft_bolt"]).paths,this.data=r||{}},(i.BoltRectangle=t).metaParameters=[{title:"width",type:"range",min:1,max:100,value:100},{title:"height",type:"range",min:1,max:100,value:50},{title:"hole radius",type:"range",min:1,max:50,value:5}]}(vjgeo=vjgeo||{}),!function(f){var t;t=function(t,e,n,r,i,o){void 0===r&&(r=0),void 0===i&&(i=!1),this.paths={},this.data={},this.data=o||{};var a,s,u,l,h,c,p=Math.min(e,t)/2;switch(r){case-1:case 1:a=p/2;break;default:a=p*Math.SQRT2/2}switch(n=Math.min(n,a),r){case-1:h=2*(u=n),c=[180,l=s=0,0,180];break;case 1:l=2*(s=n),h=u=0,c=[270,270,90,90];break;default:l=h=2*(s=u=n/Math.SQRT2),c=[225,315,45,135]}i?(this.paths.Left=new f.paths.Line([0,0],[0,e-h]),this.paths.Right=new f.paths.Line([t,0],[t,e-h])):(this.paths.Left=new f.paths.Line([0,h],[0,e-h]),this.paths.Right=new f.paths.Line([t,h],[t,e-h]),this.paths.Bottom=new f.paths.Line([l,0],[t-l,0]),this.paths.BottomLeft=new f.paths.Arc([s,u],n,c[0]-90,c[0]+90),this.paths.BottomRight=new f.paths.Arc([t-s,u],n,c[1]-90,c[1]+90)),this.paths.TopRight=new f.paths.Arc([t-s,e-u],n,c[2]-90,c[2]+90),this.paths.TopLeft=new f.paths.Arc([s,e-u],n,c[3]-90,c[3]+90),this.paths.Top=new f.paths.Line([l,e],[t-l,e])},((f.models||(f.models={})).Dogbone=t).metaParameters=[{title:"width",type:"range",min:1,max:100,value:50},{title:"height",type:"range",min:1,max:100,value:100},{title:"radius",type:"range",min:0,max:50,value:5},{title:"style",type:"select",value:[0,1,-1]},{title:"bottomless",type:"bool",value:!1}]}(vjgeo=vjgeo||{}),!function(a){var t;t=function(t,e,n,r,i){this.paths={},this.data={},this.data=i||{};var i=t/2,t=(void 0===(n=n<0?0:n)&&(n=i),n=Math.min(n,i),n=Math.min(n,e),Math.max(i-n,0)),o=Math.max(e-n,0);r||(this.paths.Bottom=new a.paths.Line([-i,0],[i,0])),o&&(this.paths.Left=new a.paths.Line([-i,0],[-i,o]),this.paths.Right=new a.paths.Line([i,0],[i,o])),0<n&&(this.paths.TopLeft=new a.paths.Arc([-t,o],n,90,180),this.paths.TopRight=new a.paths.Arc([t,o],n,0,90)),t&&(this.paths.Top=new a.paths.Line([-t,e],[t,e]))},((a.models||(a.models={})).Dome=t).metaParameters=[{title:"width",type:"range",min:1,max:100,value:50},{title:"height",type:"range",min:1,max:100,value:100},{title:"radius",type:"range",min:0,max:50,value:25},{title:"bottomless",type:"bool",value:!1}]}(vjgeo=vjgeo||{}),!function(u){var t;t=function(){for(var t,e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this.paths={},this.data={};var i=0;switch(0<(a=n.length)&&u.isObjectOrUndefinedNotArray(n[n.length-1])&&(this.data=n[n.length-1]||{},a-=1),a){case 3:t=n[0],e=n[1],i=n[2];break;case 2:i=n[1];case 1:var o=u.measure.modelExtents(n[0]);this.origin=u.point.subtract(o.low,[i,i]),t=o.high[0]-o.low[0]+2*i,e=o.high[1]-o.low[1]+2*i}var a=Math.min(e,t)/2,a=t-(i=Math.min(i,a)),s=e-i;0<i&&(this.paths.BottomLeft=new u.paths.Arc([i,i],i,180,270),this.paths.BottomRight=new u.paths.Arc([a,i],i,270,0),this.paths.TopRight=new u.paths.Arc([a,s],i,0,90),this.paths.TopLeft=new u.paths.Arc([i,s],i,90,180)),0<a-i&&(this.paths.Bottom=new u.paths.Line([i,0],[a,0]),this.paths.Top=new u.paths.Line([a,e],[i,e])),0<s-i&&(this.paths.Right=new u.paths.Line([t,i],[t,s]),this.paths.Left=new u.paths.Line([0,s],[0,i]))},((u.models||(u.models={})).RoundRectangle=t).metaParameters=[{title:"width",type:"range",min:1,max:100,value:50},{title:"height",type:"range",min:1,max:100,value:100},{title:"radius",type:"range",min:0,max:50,value:11}]}(vjgeo=vjgeo||{}),!function(t){var r;r=t.models||(t.models={}),t=function(t,e,n){this.paths={},this.data={},this.paths=new r.RoundRectangle(t,e,Math.min(e/2,t/2)).paths,this.data=n||{}},(r.Oval=t).metaParameters=[{title:"width",type:"range",min:1,max:100,value:50},{title:"height",type:"range",min:1,max:100,value:100}]}(vjgeo=vjgeo||{}),!function(p){var t;t=function(n,r,o,a,t,s,e){var u,i,l,h,c=this;void 0===t&&(t=!1),void 0===s&&(s=!1),this.paths={},this.data={},this.data=e||{},s&&(u={models:{}},this.models={Caps:u}),a<=0||o<=0||(n=p.angle.noRevolutions(n),r=p.angle.noRevolutions(r),0!=p.round(n-r)&&(r<n&&(r+=360),e=function(t,e,n,r){var i;return s?u.models[t]=i={paths:{}}:i=c,i.paths[t]=new p.paths.Arc(p.point.fromPolar(p.angle.toRadians(e),o),a,e+n,e+r)},(l=function(t,e){return c.paths[t]=new p.paths.Arc([0,0],o+e,n,r)})("Outer",a),(i=0<o-a)&&l("Inner",-a),(l=[]).push(e("StartCap",n,180,0)),l.push(e("EndCap",r,0,180)),p.measure.pointDistance(l[0].origin,l[1].origin)/2<a)&&(h=p.path.intersection(l[0],l[1]))&&(i&&t||(l[0].startAngle=h.path1Angles[0],l[1].endAngle=h.path2Angles[0]),!t)&&i&&2==h.intersectionPoints.length&&(e("StartCap2",n,180,0).endAngle=h.path1Angles[1],e("EndCap2",r,0,180).startAngle=h.path2Angles[1]+360))},((p.models||(p.models={})).OvalArc=t).metaParameters=[{title:"start angle",type:"range",min:-360,max:360,step:1,value:180},{title:"end angle",type:"range",min:-360,max:360,step:1,value:0},{title:"sweep",type:"range",min:0,max:100,step:1,value:50},{title:"radius",type:"range",min:0,max:100,step:1,value:15},{title:"self intersect",type:"bool",value:!1}]}(vjgeo=vjgeo||{}),!function(o){var a,t;a=o.models||(o.models={}),t=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.paths={},this.data={};var r,i=e.length;3===i?o.isObjectOrUndefinedNotArray(e[e.length-1])&&(this.data=e[e.length-1]||{},i-=1):2==i&&o.isObject(e[1])&&o.isModel(e[0])&&(this.data=e[e.length-1]||{},i-=1),r=2!==i||o.isObject(e[0])?(o.isModel(e[i=0])?(r=o.measure.modelExtents(e[0]),2===e.length&&(i=e[1])):r=e[0],this.origin=o.point.subtract(r.low,[i,i]),t=r.high[0]-r.low[0]+2*i,r.high[1]-r.low[1]+2*i):(t=e[0],e[1]),this.paths=new a.Polyline(!0,[[0,0],[t,0],[t,r],[0,r]]).paths},(a.Rectangle=t).metaParameters=[{title:"width",type:"range",min:1,max:100,value:50},{title:"height",type:"range",min:1,max:100,value:100}]}(vjgeo=vjgeo||{}),!function(a){var t;t=function(t,e,n){this.paths={},this.data={},this.data=n||{};var r,i={Ring_outer:t,Ring_inner:e};for(r in i){var o=i[r];void 0===o||o<=0||(this.paths[r]=new a.paths.Circle(a.point.zero(),o))}},((a.models||(a.models={})).Ring=t).metaParameters=[{title:"outer radius",type:"range",min:0,max:100,step:1,value:50},{title:"inner radius",type:"range",min:0,max:100,step:1,value:20}]}(vjgeo=vjgeo||{}),!function(o){var t;t=function(t,e,n,r){this.paths={},this.data={},this.data=r||{};var r=new o.paths.Arc([0,0],t,0,360),e=new o.paths.Arc([e,0],n,0,360),i=o.solvers.circleTangentAngles(r,e);i?(i=i.sort(function(t,e){return t-e}),r.startAngle=i[0],r.endAngle=i[1],e.startAngle=i[1],e.endAngle=i[0],this.paths.Left=r,this.paths.Right=e,this.paths.Top=new o.paths.Line(o.point.fromAngleOnCircle(i[0],r),o.point.fromAngleOnCircle(i[0],e)),this.paths.Bottom=new o.paths.Line(o.point.fromAngleOnCircle(i[1],r),o.point.fromAngleOnCircle(i[1],e))):this.paths.Belt=new o.paths.Circle(Math.max(t,n))},((o.models||(o.models={})).Belt=t).metaParameters=[{title:"left radius",type:"range",min:0,max:100,value:30},{title:"distance between centers",type:"range",min:0,max:100,value:50},{title:"right radius",type:"range",min:0,max:100,value:15}]}(vjgeo=vjgeo||{}),!function(u){var t;t=function(t,e,n){function r(t,e){return t+(e*e-t*t)/(2*t)}this.paths={},this.data={},this.data=n||{};var i,o,a,n=e/2,s=t/2,s=e<t?(i=r(n,s),o=270,a=360-u.angle.toDegrees(Math.acos(s/i)),[0,i]):(i=r(s,n),o=180-u.angle.toDegrees(Math.asin(n/i)),a=180,[i,0]),n=new u.paths.Arc(s,i,o,a);this.paths.curve_start=n,this.paths.curve_end=u.path.moveRelative(u.path.mirror(n,!0,!0),[t,e])},((u.models||(u.models={})).SCurve=t).metaParameters=[{title:"width",type:"range",min:1,max:100,value:50},{title:"height",type:"range",min:1,max:100,value:100}]}(vjgeo=vjgeo||{}),!function(u){var t;t=function(t,e,n,r,i){function o(t,e){var n;r?a.models[t]=n={paths:{}}:n=s,n.paths[t]=e}var a,s=this,i=(void 0===r&&(r=!1),this.paths={},this.data={},this.data=i||{},r&&(a={models:{}},this.models={Caps:a}),u.angle.ofPointInDegrees(t,e)),e=u.measure.pointDistance(t,e);this.paths.Top=new u.paths.Line([0,n],[e,n]),this.paths.Bottom=new u.paths.Line([0,-n],[e,-n]),o("StartCap",new u.paths.Arc([0,0],n,90,270)),o("EndCap",new u.paths.Arc([e,0],n,270,90)),u.model.rotate(this,i,[0,0]),this.origin=t},((u.models||(u.models={})).Slot=t).metaParameters=[{title:"origin",type:"select",value:[[0,0],[10,0],[10,10]]},{title:"end",type:"select",value:[[80,0],[0,30],[10,30]]},{title:"radius",type:"range",min:1,max:50,value:10}]}(vjgeo=vjgeo||{}),!function(t){var n;n=t.models||(t.models={}),t=function(t,e){this.paths={},this.data={},this.paths=new n.Rectangle(t,t).paths,this.data=e||{}},(n.Square=t).metaParameters=[{title:"side",type:"range",min:1,max:100,value:100}]}(vjgeo=vjgeo||{}),!function(t){var l;function h(t,e,n,r,i){void 0===r&&(r=2),this.paths={},this.data={},this.data=i||{},n=n||e*h.InnerRadiusRatio(t,r);for(var o=l.Polygon.getPoints(t,e),a=l.Polygon.getPoints(t,n,180/t),s=[],u=0;u<t;u++)s.push(o[u]),s.push(a[u]);i=new l.Polyline(!0,s);this.paths=i.paths,delete i.paths}l=t.models||(t.models={}),h.InnerRadiusRatio=function(t,e){return 0<t&&1<e&&e<t/2?Math.cos(Math.PI*e/t)/Math.cos(Math.PI*(e-1)/t):0},t=h,(l.Star=t).metaParameters=[{title:"number of sides",type:"range",min:3,max:24,value:8},{title:"outer radius",type:"range",min:1,max:100,value:50},{title:"inner radius",type:"range",min:0,max:100,value:15},{title:"skip points (when inner radius is zero)",type:"range",min:0,max:12,value:2}]}(vjgeo=vjgeo||{}),!function(u){var l,h,t;l=u.models||(u.models={}),h=0,t=function(t,e,n,r,i,o){this.paths={},this.data={},this.paths.Text=new u.paths.Line(e,u.point.add(e,u.point.fromPolar((r||0)+Math.PI/2,n))),this.layer||(this.layer="dbentity_"+h++),this.data=__assign({typename:i?"DbMText":"DbText",text:t,contents:t,rotation:r},o)},(l.Text=t).metaParameters=[{title:"text",type:"text",value:"vjmap"},{title:"position",type:"select",value:[[0,0],[10,10]]},{title:"height",type:"range",min:1,max:1e3,value:10},{title:"rotation",type:"range",min:0,max:360,value:0},{title:"isMText",type:"bool",value:!1}],t=function(t,e,n){this.paths={},this.data={};var r=e.map(function(t){return t.point});if(0!=r.length){if(2<r.length){for(var i=0,o=!0,a=0;a<r.length-1;a++){var s=u.measure.pointDistance(r[a],r[a+1]);if(0!=a&&1e-5<Math.abs(i-s)){o=!1;break}i=s}o&&(e.push({attr:"_temp_point",point:[r[r.length-1][0]+i/100,r[r.length-1][1]]}),r=e.map(function(t){return t.point}))}else 1==r.length&&(e.push({attr:"_temp_point",point:[r[0][0]+1,r[0][1]]}),r=e.map(function(t){return t.point}));this.paths=new l.Polyline(!1,r).paths,this.layer||(this.layer="dbentity_"+h++),this.data=__assign({typename:t,pointAttr:e.map(function(t){return t.attr}),points:r},n)}},(l.DbEntity=t).metaParameters=[{title:"typename",type:"select",value:["DbAlignedDimension"]},{title:"param",type:"select",value:[[{point:[0,-5],attr:"dimLinePoint"},{point:[5,-5],attr:"xLine1Point"},{point:[10,-5],attr:"xLine2Point"}],[{point:[0,0],attr:"dimLinePoint"},{point:[5,4],attr:"xLine1Point"},{point:[10,10],attr:"xLine2Point"}]]}]}(vjgeo=vjgeo||{})},{clone:5,graham_scan:6,kdbush:7}],5:[function(t,e,n){!function(g){!function(){var t=function(){"use strict";function f(t,u,e,l){"object"==typeof u&&(e=u.depth,l=u.prototype,u.filter,u=u.circular);var h=[],c=[],p=void 0!==g;return void 0===u&&(u=!0),function t(e,n){if(null===e)return null;if(0==n)return e;var r,i,o,a;if("object"!=typeof e)return e;if(f.__isArray(e))r=[];else if(f.__isRegExp(e))r=new RegExp(e.source,d(e)),e.lastIndex&&(r.lastIndex=e.lastIndex);else if(f.__isDate(e))r=new Date(e.getTime());else{if(p&&g.isBuffer(e))return r=g.allocUnsafe?g.allocUnsafe(e.length):new g(e.length),e.copy(r),r;void 0===l?(i=Object.getPrototypeOf(e),r=Object.create(i)):(r=Object.create(l),i=l)}if(u){var s=h.indexOf(e);if(-1!=s)return c[s];h.push(e),c.push(r)}for(o in e)(a=i?Object.getOwnPropertyDescriptor(i,o):a)&&null==a.set||(r[o]=t(e[o],n-1));return r}(t,e=void 0===e?1/0:e)}function e(t){return Object.prototype.toString.call(t)}function d(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return f.clonePrototype=function(t){var e;return null===t?null:((e=function(){}).prototype=t,new e)},f.__objToStr=e,f.__isDate=function(t){return"object"==typeof t&&"[object Date]"===e(t)},f.__isArray=function(t){return"object"==typeof t&&"[object Array]"===e(t)},f.__isRegExp=function(t){return"object"==typeof t&&"[object RegExp]"===e(t)},f.__getRegExpFlags=d,f}();"object"==typeof e&&e.exports&&(e.exports=t)}.call(this)}.call(this,t("buffer").Buffer)},{buffer:2}],6:[function(t,e,n){function r(){this.anchorPoint=void 0,this.reverse=!1,this.points=[]}r.prototype={constructor:r,Point:function(t,e){this.x=t,this.y=e},_findPolarAngle:function(t,e){var n;return!t||!e||(n=e.x-t.x,e=e.y-t.y,0==n&&0==e)?0:(t=57.295779513082*Math.atan2(e,n),this.reverse?t<=0&&(t+=360):0<=t&&(t+=360),t)},addPoint:function(t,e){return void 0===this.anchorPoint?void(this.anchorPoint=new this.Point(t,e)):this.anchorPoint.y>e&&this.anchorPoint.x>t||this.anchorPoint.y===e&&this.anchorPoint.x>t||this.anchorPoint.y>e&&this.anchorPoint.x===t?(this.points.push(new this.Point(this.anchorPoint.x,this.anchorPoint.y)),void(this.anchorPoint=new this.Point(t,e))):void this.points.push(new this.Point(t,e))},_sortPoints:function(){var n=this;return this.points.sort(function(t,e){t=n._findPolarAngle(n.anchorPoint,t),e=n._findPolarAngle(n.anchorPoint,e);return t<e?-1:e<t?1:0})},_checkPoints:function(t,e,n){e=this._findPolarAngle(t,e),t=this._findPolarAngle(t,n);return t<e?!(180<e-t):!(e<t)||180<t-e},getHull:function(){var t,e,n,r,i,o,a=[];if(this.reverse=this.points.every(function(t){return t.x<0&&t.y<0}),(e=(t=this._sortPoints()).length)<3)return t.unshift(this.anchorPoint),t;for(a.push(t.shift(),t.shift());;)if(a.push(t.shift()),n=a[a.length-3],r=a[a.length-2],i=a[a.length-1],this._checkPoints(n,r,i)&&a.splice(a.length-2,1),0==t.length){if(e==a.length)return o=this.anchorPoint,(a=a.filter(function(t){return!!t})).some(function(t){return t.x==o.x&&t.y==o.y})||a.unshift(this.anchorPoint),a;e=(t=a).length,(a=[]).push(t.shift(),t.shift())}}},"function"==typeof define&&define.amd&&define(function(){return r}),void 0!==e&&(e.exports=r)},{}],7:[function(t,e,n){var r,i;r=this,i=function(){"use strict";function s(t,e,n,r,i,o){var a;i-r<=n||(function t(e,n,r,i,o,a){for(;i<o;){600<o-i&&(s=o-i+1,c=r-i+1,l=Math.log(s),u=.5*Math.exp(2*l/3),l=.5*Math.sqrt(l*u*(s-u)/s)*(c-s/2<0?-1:1),h=Math.max(i,Math.floor(r-c*u/s+l)),c=Math.min(o,Math.floor(r+(s-c)*u/s+l)),t(e,n,r,h,c,a));var s,u,l,h,c,p=n[2*r+a],f=i,d=o;for(g(e,n,i,r),n[2*o+a]>p&&g(e,n,i,o);f<d;){for(g(e,n,f,d),f++,d--;n[2*f+a]<p;)f++;for(;n[2*d+a]>p;)d--}n[2*i+a]===p?g(e,n,i,d):g(e,n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(t,e,a=Math.floor((r+i)/2),r,i,o%2),s(t,e,n,r,a-1,o+1),s(t,e,n,a+1,i,o+1))}function g(t,e,n,r){i(t,n,r),i(e,2*n,2*r),i(e,2*n+1,2*r+1)}function i(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function w(t,e,n,r){t-=n,n=e-r;return t*t+n*n}function o(t,e,n,r,i){e=e||a,n=n||u,i=i||Array,this.nodeSize=r||64,this.points=t,this.ids=new i(t.length),this.coords=new i(2*t.length);for(var o=0;o<t.length;o++)this.ids[o]=o,this.coords[2*o]=e(t[o]),this.coords[2*o+1]=n(t[o]);s(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function a(t){return t[0]}function u(t){return t[1]}return o.prototype={range:function(t,e,n,r){for(var i=this.ids,o=this.coords,a=t,s=e,u=n,l=r,h=this.nodeSize,c=[0,i.length-1,0],p=[];c.length;){var f=c.pop(),d=c.pop(),g=c.pop();if(d-g<=h)for(var v=g;v<=d;v++)m=o[2*v],x=o[2*v+1],a<=m&&m<=u&&s<=x&&x<=l&&p.push(i[v]);else{var y=Math.floor((g+d)/2),m=o[2*y],x=o[2*y+1],w=(a<=m&&m<=u&&s<=x&&x<=l&&p.push(i[y]),(f+1)%2);(0===f?a<=m:s<=x)&&(c.push(g),c.push(y-1),c.push(w)),(0===f?m<=u:x<=l)&&(c.push(y+1),c.push(d),c.push(w))}}return p},within:function(t,e,n){for(var r=this.ids,i=this.coords,o=t,a=e,s=n,u=this.nodeSize,l=[0,r.length-1,0],h=[],c=s*s;l.length;){var p=l.pop(),f=l.pop(),d=l.pop();if(f-d<=u)for(var g=d;g<=f;g++)w(i[2*g],i[2*g+1],o,a)<=c&&h.push(r[g]);else{var v=Math.floor((d+f)/2),y=i[2*v],m=i[2*v+1],x=(w(y,m,o,a)<=c&&h.push(r[v]),(p+1)%2);(0===p?o-s<=y:a-s<=m)&&(l.push(d),l.push(v-1),l.push(x)),(0===p?y<=o+s:m<=a+s)&&(l.push(v+1),l.push(f),l.push(x))}}return h}},function(t,e,n,r,i){return new o(t,e,n,r,i)}},"object"==typeof n&&void 0!==e?e.exports=i():"function"==typeof define&&define.amd?define(i):r.kdbush=i()},{}]},{},[4])(4)});